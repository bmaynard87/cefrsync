import{d as P,J as S,K as b,p as $,u as q,q as h,c as A,a as o,b as e,h as G,w as l,i as c,j as f,e as n,o as m,g as i,t as g,f as I,l as N,F as R}from"./app-BCtOYXay.js";import{G as U,_ as x}from"./GoogleSignInButton-D2wljEeQ.js";import{_,a as y}from"./index-DSGy8FSM.js";import{_ as B,a as F}from"./LoadingButton.vue_vue_type_script_setup_true_lang-CdRJAPXy.js";import{_ as p}from"./FormField.vue_vue_type_script_setup_true_lang-ayl1JO0i.js";import{_ as j}from"./PasswordStrengthIndicator.vue_vue_type_script_setup_true_lang-DxvZB0fI.js";import{u as T}from"./useRecaptcha-CqPa1HlG.js";import"./utils-CDN07tui.js";import"./Spinner.vue_vue_type_script_setup_true_lang-CpVccD2C.js";import"./useForwardExpose-BeEIkiv6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-kcNRNydb.js";import"./Label.vue_vue_type_script_setup_true_lang-CrAQFTYJ.js";const D={class:"mb-6"},H={class:"relative my-6"},J={class:"absolute inset-0 flex items-center"},K={class:"grid grid-cols-2 gap-4"},L={class:"space-y-2"},M={class:"text-center text-sm text-gray-600"},ne=P({__name:"Register",setup(O){const w=S();w.props.auth?.user&&b.replace(route("language-chat.index"));const v=$(()=>w.props.flash?.error),r=q({first_name:"",last_name:"",email:"",password:"",password_confirmation:"",recaptcha_token:""}),{executeRecaptcha:V}=T(),d=h(null),u=h(null),C=async()=>{u.value=null;try{const t=await V("register");r.recaptcha_token=t,r.post(route("register"),{onFinish:()=>r.reset("password","password_confirmation"),onError:()=>{u.value="Registration failed. Please try again."}})}catch(t){console.error("reCAPTCHA error:",t),u.value="Unable to verify reCAPTCHA. Please refresh the page and try again."}},k=t=>{d.value=null,b.post(route("auth.google.callback"),{credential:t.credential},{onError:a=>{d.value=a.credential||"Authentication failed. Please try again."}})},E=t=>{console.error("Google Sign-In error:",t),d.value="Google Sign-In failed. Please try again."};return(t,a)=>(m(),A(R,null,[o(e(G),{title:"Register"}),o(F,{title:"Create your account",subtitle:"Start your language learning journey today"},{default:l(()=>[v.value?(m(),c(e(_),{key:0,class:"mb-6 border-red-200 bg-red-50"},{default:l(()=>[o(e(y),{class:"text-sm text-red-800"},{default:l(()=>[i(g(v.value),1)]),_:1})]),_:1})):f("",!0),u.value?(m(),c(e(_),{key:1,class:"mb-6 border-red-200 bg-red-50"},{default:l(()=>[o(e(y),{class:"text-sm text-red-800"},{default:l(()=>[i(g(u.value),1)]),_:1})]),_:1})):f("",!0),d.value?(m(),c(e(_),{key:2,class:"mb-6 border-red-200 bg-red-50"},{default:l(()=>[o(e(y),{class:"text-sm text-red-800"},{default:l(()=>[i(g(d.value),1)]),_:1})]),_:1})):f("",!0),n("div",D,[t.$page.props.auth?.googleClientId?(m(),c(U,{key:0,"client-id":t.$page.props.auth.googleClientId,onSignin:k,onError:E},null,8,["client-id"])):f("",!0)]),n("div",H,[n("div",J,[o(e(x))]),a[5]||(a[5]=n("div",{class:"relative flex justify-center text-sm"},[n("span",{class:"bg-white px-2 text-gray-500"},"OR")],-1))]),n("form",{onSubmit:I(C,["prevent"]),class:"space-y-5"},[n("div",K,[o(p,{id:"first_name",label:"First Name",modelValue:e(r).first_name,"onUpdate:modelValue":a[0]||(a[0]=s=>e(r).first_name=s),error:e(r).errors.first_name,placeholder:"John",required:"",autofocus:"",autocomplete:"given-name"},null,8,["modelValue","error"]),o(p,{id:"last_name",label:"Last Name",modelValue:e(r).last_name,"onUpdate:modelValue":a[1]||(a[1]=s=>e(r).last_name=s),error:e(r).errors.last_name,placeholder:"Doe",required:"",autocomplete:"family-name"},null,8,["modelValue","error"])]),o(p,{id:"email",label:"Email",type:"email",modelValue:e(r).email,"onUpdate:modelValue":a[2]||(a[2]=s=>e(r).email=s),error:e(r).errors.email,placeholder:"you@example.com",required:"",autocomplete:"username"},null,8,["modelValue","error"]),n("div",L,[o(p,{id:"password",label:"Password",type:"password",modelValue:e(r).password,"onUpdate:modelValue":a[3]||(a[3]=s=>e(r).password=s),error:e(r).errors.password,placeholder:"••••••••",required:"",autocomplete:"new-password"},null,8,["modelValue","error"]),o(j,{password:e(r).password},null,8,["password"])]),o(p,{id:"password_confirmation",label:"Confirm Password",type:"password",modelValue:e(r).password_confirmation,"onUpdate:modelValue":a[4]||(a[4]=s=>e(r).password_confirmation=s),error:e(r).errors.password_confirmation,placeholder:"••••••••",required:"",autocomplete:"new-password"},null,8,["modelValue","error"]),o(B,{loading:e(r).processing,"loading-text":"Creating account..."},{default:l(()=>[...a[6]||(a[6]=[i(" Create account ",-1)])]),_:1},8,["loading"])],32),o(e(x),{class:"my-6"}),n("p",M,[a[8]||(a[8]=i(" Already have an account? ",-1)),o(e(N),{href:t.route("login"),class:"font-medium text-gray-900 hover:text-gray-700 hover:underline"},{default:l(()=>[...a[7]||(a[7]=[i(" Sign in ",-1)])]),_:1},8,["href"])])]),_:1})],64))}});export{ne as default};
