import{p as M,q as _,B as W,E as H,D as Fe,d as S,Q as pt,r as P,b as l,i as L,w as k,G as B,o as y,y as J,R as ee,S as ze,U as ft,C as ue,a as b,j as I,V as gt,L as vt,M as yt,c as C,F as U,e as n,l as ie,n as T,g as A,m as te,f as mt,k as le,N as ht,t as O,J as Ne,T as xt,W as Q,X as bt,I as _t,Y as wt,Z as kt,_ as Ee,K as qe,h as Ct}from"./app-BkWxr0z5.js";import{_ as Dt}from"./AppShell.vue_vue_type_script_setup_true_lang-KMVDNP1n.js";import{_ as $t}from"./AppLogo.vue_vue_type_script_setup_true_lang-GUqw2Lfl.js";import{P as Y,b as F,_ as je,a as Se}from"./Spinner.vue_vue_type_script_setup_true_lang-Cr35SSNI.js";import{g as V,u as Oe,b as ke,P as Re,C as Et,a as Ue,c as Ve}from"./check-CPtM_ZKl.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as We}from"./createContext-BY7q_Zwd.js";import{c as St,d as Ot,i as de,e as Le,f as Lt,u as Pt,b as Mt,a as z,o as Tt,g as Bt,h as At}from"./useForwardExpose-B4_GA0pw.js";import{c as G}from"./utils-CDN07tui.js";import{_ as ye}from"./Label.vue_vue_type_script_setup_true_lang-BbHFT-z-.js";import{_ as Pe}from"./LanguageSelect.vue_vue_type_script_setup_true_lang-BPLWZtCM.js";import{u as It}from"./useLanguageOptions-UipWHood.js";function He(t,a,e){const s=e.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:e});a&&s.addEventListener(t,a,{once:!0}),s.dispatchEvent(o)}const[Ft]=We("ConfigProvider");function me(t){if(t===null||typeof t!="object")return!1;const a=Object.getPrototypeOf(t);return a!==null&&a!==Object.prototype&&Object.getPrototypeOf(a)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function _e(t,a,e=".",s){if(!me(a))return _e(t,{},e,s);const o=Object.assign({},a);for(const r in t){if(r==="__proto__"||r==="constructor")continue;const f=t[r];f!=null&&(s&&s(o,r,f,e)||(Array.isArray(f)&&Array.isArray(o[r])?o[r]=[...f,...o[r]]:me(f)&&me(o[r])?o[r]=_e(f,o[r],(e?`${e}.`:"")+r.toString(),s):o[r]=f))}return o}function zt(t){return(...a)=>a.reduce((e,s)=>_e(e,s,"",t),{})}const Nt=zt(),qt=St(()=>{const t=_(new Map),a=_(),e=M(()=>{for(const f of t.value.values())if(f)return!0;return!1}),s=Ft({scrollBody:_(!0)});let o=null;const r=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=a.value??"",Le&&o?.(),a.value=void 0};return W(e,(f,v)=>{if(!de)return;if(!f){v&&r();return}a.value===void 0&&(a.value=document.body.style.overflow);const i=window.innerWidth-document.documentElement.clientWidth,m={padding:i,margin:0},d=s.scrollBody?.value?typeof s.scrollBody.value=="object"?Nt({padding:s.scrollBody.value.padding===!0?i:s.scrollBody.value.padding,margin:s.scrollBody.value.margin===!0?i:s.scrollBody.value.margin},m):m:{padding:0,margin:0};i>0&&(document.body.style.paddingRight=typeof d.padding=="number"?`${d.padding}px`:String(d.padding),document.body.style.marginRight=typeof d.margin=="number"?`${d.margin}px`:String(d.margin),document.documentElement.style.setProperty("--scrollbar-width",`${i}px`),document.body.style.overflow="hidden"),Le&&(o=Lt(document,"touchmove",g=>Rt(g),{passive:!1})),H(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function jt(t){const a=Math.random().toString(36).substring(2,7),e=qt();e.value.set(a,t);const s=M({get:()=>e.value.get(a)??!1,set:o=>e.value.set(a,o)});return Ot(()=>{e.value.delete(a)}),s}function Xe(t){const a=window.getComputedStyle(t);if(a.overflowX==="scroll"||a.overflowY==="scroll"||a.overflowX==="auto"&&t.clientWidth<t.scrollWidth||a.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const e=t.parentNode;return!(e instanceof Element)||e.tagName==="BODY"?!1:Xe(e)}}function Rt(t){const a=t||window.event,e=a.target;return e instanceof Element&&Xe(e)?!1:a.touches.length>1?!0:(a.preventDefault&&a.cancelable&&a.preventDefault(),!1)}var Ut=function(t){if(typeof document>"u")return null;var a=Array.isArray(t)?t[0]:t;return a.ownerDocument.body},X=new WeakMap,oe=new WeakMap,re={},he=0,Je=function(t){return t&&(t.host||Je(t.parentNode))},Vt=function(t,a){return a.map(function(e){if(t.contains(e))return e;var s=Je(e);return s&&t.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e})},Kt=function(t,a,e,s){var o=Vt(a,Array.isArray(t)?t:[t]);re[e]||(re[e]=new WeakMap);var r=re[e],f=[],v=new Set,i=new Set(o),m=function(g){!g||v.has(g)||(v.add(g),m(g.parentNode))};o.forEach(m);var d=function(g){!g||i.has(g)||Array.prototype.forEach.call(g.children,function(h){if(v.has(h))d(h);else try{var x=h.getAttribute(s),u=x!==null&&x!=="false",p=(X.get(h)||0)+1,c=(r.get(h)||0)+1;X.set(h,p),r.set(h,c),f.push(h),p===1&&u&&oe.set(h,!0),c===1&&h.setAttribute(e,"true"),u||h.setAttribute(s,"true")}catch($){console.error("aria-hidden: cannot operate on ",h,$)}})};return d(a),v.clear(),he++,function(){f.forEach(function(g){var h=X.get(g)-1,x=r.get(g)-1;X.set(g,h),r.set(g,x),h||(oe.has(g)||g.removeAttribute(s),oe.delete(g)),x||g.removeAttribute(e)}),he--,he||(X=new WeakMap,X=new WeakMap,oe=new WeakMap,re={})}},Wt=function(t,a,e){e===void 0&&(e="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),o=Ut(t);return o?(s.push.apply(s,Array.from(o.querySelectorAll("[aria-live], script"))),Kt(s,o,e,"aria-hidden")):function(){return null}};function Ht(t){let a;W(()=>Pt(t),e=>{e?a=Wt(e):a&&a()}),Fe(()=>{a&&a()})}const[q,Xt]=We("DialogRoot");var Jt=S({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:a}){const e=t,o=Mt(e,"open",a,{defaultValue:e.defaultOpen,passive:e.open===void 0}),r=_(),f=_(),{modal:v}=pt(e);return Xt({open:o,modal:v,openModal:()=>{o.value=!0},onOpenChange:i=>{o.value=i},onOpenToggle:()=>{o.value=!o.value},contentId:"",titleId:"",descriptionId:"",triggerElement:r,contentElement:f}),(i,m)=>P(i.$slots,"default",{open:l(o),close:()=>o.value=!1})}}),Yt=Jt,Gt=S({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const a=t;z();const e=q();return(s,o)=>(y(),L(l(Y),B(a,{type:s.as==="button"?"button":void 0,onClick:o[0]||(o[0]=r=>l(e).onOpenChange(!1))}),{default:k(()=>[P(s.$slots,"default")]),_:3},16,["type"]))}}),Zt=Gt;const Qt="dismissableLayer.pointerDownOutside",es="dismissableLayer.focusOutside";function Ye(t,a){const e=a.closest("[data-dismissable-layer]"),s=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),o=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(e&&(s===e||o.indexOf(s)<o.indexOf(e)))}function ts(t,a,e=!0){const s=a?.value?.ownerDocument??globalThis?.document,o=_(!1),r=_(()=>{});return J(f=>{if(!de||!ee(e))return;const v=async m=>{const d=m.target;if(!(!a?.value||!d)){if(Ye(a.value,d)){o.value=!1;return}if(m.target&&!o.value){let h=function(){He(Qt,t,g)};const g={originalEvent:m};m.pointerType==="touch"?(s.removeEventListener("click",r.value),r.value=h,s.addEventListener("click",r.value,{once:!0})):h()}else s.removeEventListener("click",r.value);o.value=!1}},i=window.setTimeout(()=>{s.addEventListener("pointerdown",v)},0);f(()=>{window.clearTimeout(i),s.removeEventListener("pointerdown",v),s.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>{ee(e)&&(o.value=!0)}}}function ss(t,a,e=!0){const s=a?.value?.ownerDocument??globalThis?.document,o=_(!1);return J(r=>{if(!de||!ee(e))return;const f=async v=>{if(!a?.value)return;await H(),await H();const i=v.target;!a.value||!i||Ye(a.value,i)||v.target&&!o.value&&He(es,t,{originalEvent:v})};s.addEventListener("focusin",f),r(()=>s.removeEventListener("focusin",f))}),{onFocusCapture:()=>{ee(e)&&(o.value=!0)},onBlurCapture:()=>{ee(e)&&(o.value=!1)}}}const N=ze({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var as=S({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:a}){const e=t,s=a,{forwardRef:o,currentElement:r}=z(),f=M(()=>r.value?.ownerDocument??globalThis.document),v=M(()=>N.layersRoot),i=M(()=>r.value?Array.from(v.value).indexOf(r.value):-1),m=M(()=>N.layersWithOutsidePointerEventsDisabled.size>0),d=M(()=>{const u=Array.from(v.value),[p]=[...N.layersWithOutsidePointerEventsDisabled].slice(-1),c=u.indexOf(p);return i.value>=c}),g=ts(async u=>{const p=[...N.branches].some(c=>c?.contains(u.target));!d.value||p||(s("pointerDownOutside",u),s("interactOutside",u),await H(),u.defaultPrevented||s("dismiss"))},r),h=ss(u=>{[...N.branches].some(c=>c?.contains(u.target))||(s("focusOutside",u),s("interactOutside",u),u.defaultPrevented||s("dismiss"))},r);Tt("Escape",u=>{i.value===v.value.size-1&&(s("escapeKeyDown",u),u.defaultPrevented||s("dismiss"))});let x;return J(u=>{r.value&&(e.disableOutsidePointerEvents&&(N.layersWithOutsidePointerEventsDisabled.size===0&&(x=f.value.body.style.pointerEvents,f.value.body.style.pointerEvents="none"),N.layersWithOutsidePointerEventsDisabled.add(r.value)),v.value.add(r.value),u(()=>{e.disableOutsidePointerEvents&&N.layersWithOutsidePointerEventsDisabled.size===1&&(f.value.body.style.pointerEvents=x)}))}),J(u=>{u(()=>{r.value&&(v.value.delete(r.value),N.layersWithOutsidePointerEventsDisabled.delete(r.value))})}),(u,p)=>(y(),L(l(Y),{ref:l(o),"as-child":u.asChild,as:u.as,"data-dismissable-layer":"",style:ft({pointerEvents:m.value?d.value?"auto":"none":void 0}),onFocusCapture:l(h).onFocusCapture,onBlurCapture:l(h).onBlurCapture,onPointerdownCapture:l(g).onPointerDownCapture},{default:k(()=>[P(u.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),ns=as;const os=Bt(()=>_([]));function rs(){const t=os();return{add(a){const e=t.value[0];a!==e&&e?.pause(),t.value=Me(t.value,a),t.value.unshift(a)},remove(a){t.value=Me(t.value,a),t.value[0]?.resume()}}}function Me(t,a){const e=[...t],s=e.indexOf(a);return s!==-1&&e.splice(s,1),e}function ls(t){return t.filter(a=>a.tagName!=="A")}const xe="focusScope.autoFocusOnMount",be="focusScope.autoFocusOnUnmount",Te={bubbles:!1,cancelable:!0};function is(t,{select:a=!1}={}){const e=V();for(const s of t)if(R(s,{select:a}),V()!==e)return!0}function us(t){const a=Ge(t),e=Be(a,t),s=Be(a.reverse(),t);return[e,s]}function Ge(t){const a=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)a.push(e.currentNode);return a}function Be(t,a){for(const e of t)if(!ds(e,{upTo:a}))return e}function ds(t,{upTo:a}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(a!==void 0&&t===a)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function cs(t){return t instanceof HTMLInputElement&&"select"in t}function R(t,{select:a=!1}={}){if(t&&t.focus){const e=V();t.focus({preventScroll:!0}),t!==e&&cs(t)&&a&&t.select()}}var ps=S({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:a}){const e=t,s=a,{currentRef:o,currentElement:r}=z(),f=_(null),v=rs(),i=ze({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});J(d=>{if(!de)return;const g=r.value;if(!e.trapped)return;function h(c){if(i.paused||!g)return;const $=c.target;g.contains($)?f.value=$:R(f.value,{select:!0})}function x(c){if(i.paused||!g)return;const $=c.relatedTarget;$!==null&&(g.contains($)||R(f.value,{select:!0}))}function u(c){g.contains(f.value)||R(g)}document.addEventListener("focusin",h),document.addEventListener("focusout",x);const p=new MutationObserver(u);g&&p.observe(g,{childList:!0,subtree:!0}),d(()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",x),p.disconnect()})}),J(async d=>{const g=r.value;if(await H(),!g)return;v.add(i);const h=V();if(!g.contains(h)){const u=new CustomEvent(xe,Te);g.addEventListener(xe,p=>s("mountAutoFocus",p)),g.dispatchEvent(u),u.defaultPrevented||(is(ls(Ge(g)),{select:!0}),V()===h&&R(g))}d(()=>{g.removeEventListener(xe,c=>s("mountAutoFocus",c));const u=new CustomEvent(be,Te),p=c=>{s("unmountAutoFocus",c)};g.addEventListener(be,p),g.dispatchEvent(u),setTimeout(()=>{u.defaultPrevented||R(h??document.body,{select:!0}),g.removeEventListener(be,p),v.remove(i)},0)})});function m(d){if(!e.loop&&!e.trapped||i.paused)return;const g=d.key==="Tab"&&!d.altKey&&!d.ctrlKey&&!d.metaKey,h=V();if(g&&h){const x=d.currentTarget,[u,p]=us(x);u&&p?!d.shiftKey&&h===p?(d.preventDefault(),e.loop&&R(u,{select:!0})):d.shiftKey&&h===u&&(d.preventDefault(),e.loop&&R(p,{select:!0})):h===x&&d.preventDefault()}}return(d,g)=>(y(),L(l(Y),{ref_key:"currentRef",ref:o,tabindex:"-1","as-child":d.asChild,as:d.as,onKeydown:m},{default:k(()=>[P(d.$slots,"default")]),_:3},8,["as-child","as"]))}}),fs=ps;function gs(t){return t?"open":"closed"}var vs=S({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=q(),{forwardRef:r,currentElement:f}=z();return o.titleId||=Oe(void 0,"reka-dialog-title"),o.descriptionId||=Oe(void 0,"reka-dialog-description"),ue(()=>{o.contentElement=f,V()!==document.body&&(o.triggerElement.value=V())}),(v,i)=>(y(),L(l(fs),{"as-child":"",loop:"",trapped:e.trapFocus,onMountAutoFocus:i[5]||(i[5]=m=>s("openAutoFocus",m)),onUnmountAutoFocus:i[6]||(i[6]=m=>s("closeAutoFocus",m))},{default:k(()=>[b(l(ns),B({id:l(o).contentId,ref:l(r),as:v.as,"as-child":v.asChild,"disable-outside-pointer-events":v.disableOutsidePointerEvents,role:"dialog","aria-describedby":l(o).descriptionId,"aria-labelledby":l(o).titleId,"data-state":l(gs)(l(o).open.value)},v.$attrs,{onDismiss:i[0]||(i[0]=m=>l(o).onOpenChange(!1)),onEscapeKeyDown:i[1]||(i[1]=m=>s("escapeKeyDown",m)),onFocusOutside:i[2]||(i[2]=m=>s("focusOutside",m)),onInteractOutside:i[3]||(i[3]=m=>s("interactOutside",m)),onPointerDownOutside:i[4]||(i[4]=m=>s("pointerDownOutside",m))}),{default:k(()=>[P(v.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Ze=vs,ys=S({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=q(),r=ke(s),{forwardRef:f,currentElement:v}=z();return Ht(v),(i,m)=>(y(),L(Ze,B({...e,...l(r)},{ref:l(f),"trap-focus":l(o).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:m[0]||(m[0]=d=>{d.defaultPrevented||(d.preventDefault(),l(o).triggerElement.value?.focus())}),onPointerDownOutside:m[1]||(m[1]=d=>{const g=d.detail.originalEvent,h=g.button===0&&g.ctrlKey===!0;(g.button===2||h)&&d.preventDefault()}),onFocusOutside:m[2]||(m[2]=d=>{d.preventDefault()})}),{default:k(()=>[P(i.$slots,"default")]),_:3},16,["trap-focus"]))}}),ms=ys,hs=S({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,o=ke(a);z();const r=q(),f=_(!1),v=_(!1);return(i,m)=>(y(),L(Ze,B({...e,...l(o)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:m[0]||(m[0]=d=>{d.defaultPrevented||(f.value||l(r).triggerElement.value?.focus(),d.preventDefault()),f.value=!1,v.value=!1}),onInteractOutside:m[1]||(m[1]=d=>{d.defaultPrevented||(f.value=!0,d.detail.originalEvent.type==="pointerdown"&&(v.value=!0));const g=d.target;l(r).triggerElement.value?.contains(g)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&v.value&&d.preventDefault()})}),{default:k(()=>[P(i.$slots,"default")]),_:3},16))}}),xs=hs,bs=S({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=q(),r=ke(s),{forwardRef:f}=z();return(v,i)=>(y(),L(l(Re),{present:v.forceMount||l(o).open.value},{default:k(()=>[l(o).modal.value?(y(),L(ms,B({key:0,ref:l(f)},{...e,...l(r),...v.$attrs}),{default:k(()=>[P(v.$slots,"default")]),_:3},16)):(y(),L(xs,B({key:1,ref:l(f)},{...e,...l(r),...v.$attrs}),{default:k(()=>[P(v.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),_s=bs,ws=S({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(t){const a=t;z();const e=q();return(s,o)=>(y(),L(l(Y),B(a,{id:l(e).descriptionId}),{default:k(()=>[P(s.$slots,"default")]),_:3},16,["id"]))}}),ks=ws,Cs=S({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const a=q();return jt(!0),z(),(e,s)=>(y(),L(l(Y),{as:e.as,"as-child":e.asChild,"data-state":l(a).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:k(()=>[P(e.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Ds=Cs,$s=S({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const a=q(),{forwardRef:e}=z();return(s,o)=>l(a)?.modal.value?(y(),L(l(Re),{key:0,present:s.forceMount||l(a).open.value},{default:k(()=>[b(Ds,B(s.$attrs,{ref:l(e),as:s.as,"as-child":s.asChild}),{default:k(()=>[P(s.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):I("v-if",!0)}}),Es=$s,Ss=S({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const a=At();return(e,s)=>l(a)||e.forceMount?(y(),L(gt,{key:0,to:e.to,disabled:e.disabled,defer:e.defer},[P(e.$slots,"default")],8,["to","disabled","defer"])):I("v-if",!0)}}),Os=Ss,Ls=S({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const a=t;return(e,s)=>(y(),L(l(Os),vt(yt(a)),{default:k(()=>[P(e.$slots,"default")]),_:3},16))}}),Ps=Ls,Ms=S({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const a=t,e=q();return z(),(s,o)=>(y(),L(l(Y),B(a,{id:l(e).titleId}),{default:k(()=>[P(s.$slots,"default")]),_:3},16,["id"]))}}),Ts=Ms;const Bs=F("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const As=F("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Qe=F("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Is=F("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Ae=F("LanguagesIcon",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const Ie=F("LightbulbIcon",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const Fs=F("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const zs=F("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Ns=F("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const qs=F("SendIcon",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const js=F("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Rs=F("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Us=F("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const we=F("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Vs={class:"border-b border-gray-200 px-4 py-4"},Ks={class:"flex items-center justify-between"},Ws={class:"border-b border-gray-200 px-4 py-4"},Hs=["disabled"],Xs={"data-test":"chat-list",class:"flex-1 overflow-y-auto p-2"},Js={class:"space-y-1"},Ys=["onClick"],Gs={class:"min-w-0 flex-1"},Zs=["onKeydown"],Qs=["onClick"],ea={key:1,class:"group/title"},ta={class:"flex items-center gap-1"},sa=["title"],aa=["onClick"],na={class:"mt-0.5 truncate text-xs text-gray-500"},oa=["onClick"],ra={class:"border-t border-gray-200 p-3 lg:hidden"},la=S({__name:"ChatSidebar",props:{chats:{},activeChat:{},hasUnusedNewChat:{type:Boolean},isOpen:{type:Boolean,default:!1}},emits:["new-chat","select-chat","delete-chat","update-title","close"],setup(t,{emit:a}){const e=t,s=a,o=_(null),r=_(""),f=()=>{e.hasUnusedNewChat||s("new-chat")},v=x=>{o.value!==x&&(s("select-chat",x),s("close"))},i=(x,u)=>{x.stopPropagation(),confirm("Are you sure you want to delete this conversation?")&&s("delete-chat",u)},m=(x,u)=>{x.stopPropagation(),o.value=u.id,r.value=u.title},d=(x,u)=>{x.stopPropagation(),r.value.trim()&&s("update-title",u,r.value.trim()),o.value=null,r.value=""},g=x=>{x.stopPropagation(),o.value=null,r.value=""},h=(x,u)=>{x.key==="Enter"?(x.preventDefault(),d(x,u)):x.key==="Escape"&&g(x)};return(x,u)=>(y(),C(U,null,[t.isOpen?(y(),C("div",{key:0,class:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:u[0]||(u[0]=p=>s("close"))})):I("",!0),n("div",{class:T(["fixed lg:static inset-y-0 left-0 z-50 flex h-screen w-64 flex-col border-r border-gray-200 bg-white transform transition-transform duration-300 lg:translate-x-0",t.isOpen?"translate-x-0":"-translate-x-full"])},[n("div",Vs,[n("div",Ks,[b(l(ie),{href:x.route("language-chat.index")},{default:k(()=>[b($t,{size:"sm"})]),_:1},8,["href"]),n("button",{onClick:u[1]||(u[1]=p=>s("close")),class:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close sidebar"},[b(l(we),{class:"h-5 w-5 text-gray-600"})])])]),n("div",Ws,[n("button",{"data-test":"new-chat-button",onClick:f,disabled:t.hasUnusedNewChat,class:T(["flex w-full items-center justify-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors",t.hasUnusedNewChat?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},[b(l(Ns),{class:"h-4 w-4"}),u[4]||(u[4]=A(" New Chat ",-1))],10,Hs)]),n("div",Xs,[n("div",Js,[(y(!0),C(U,null,te(t.chats,p=>(y(),C("div",{key:p.id,"data-test":"chat-item",onClick:c=>v(p.id),class:T(["group flex w-full items-start gap-3 rounded-lg px-3 py-2.5 text-left transition-colors cursor-pointer",t.activeChat===p.id?"bg-gray-100 hover:bg-gray-200":"hover:bg-gray-100"])},[(y(),C("svg",{class:T(["mt-0.5 h-4 w-4 flex-shrink-0",t.activeChat===p.id?"text-gray-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...u[5]||(u[5]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)])],2)),n("div",Gs,[o.value===p.id?(y(),C("div",{key:0,class:"flex items-center gap-1",onClick:u[3]||(u[3]=mt(()=>{},["stop"]))},[le(n("input",{"onUpdate:modelValue":u[2]||(u[2]=c=>r.value=c),onKeydown:c=>h(c,p.id),type:"text",class:"flex-1 rounded border border-blue-500 px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",autofocus:""},null,40,Zs),[[ht,r.value]]),n("button",{onClick:c=>d(c,p.id),class:"p-1 rounded hover:bg-green-100",title:"Save"},[b(l(Et),{class:"h-4 w-4 text-green-600"})],8,Qs),n("button",{onClick:g,class:"p-1 rounded hover:bg-red-100",title:"Cancel"},[b(l(we),{class:"h-4 w-4 text-red-600"})])])):(y(),C("div",ea,[n("div",ta,[n("p",{class:T(["truncate text-sm font-medium",t.activeChat===p.id?"text-gray-900":"text-gray-700"]),title:p.title},O(p.title),11,sa),n("button",{onClick:c=>m(c,p),class:"flex-shrink-0 opacity-0 group-hover/title:opacity-100 p-0.5 rounded hover:bg-gray-200",title:"Edit title"},[b(l(zs),{class:"h-3 w-3 text-gray-500"})],8,aa)]),n("p",na,O(p.timestamp),1)]))]),n("button",{onClick:c=>i(c,p.id),class:"opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded hover:bg-red-50",title:"Delete conversation"},[b(l(Rs),{class:"h-4 w-4 text-gray-400 hover:text-red-600"})],8,oa)],10,Ys))),128))])]),n("div",ra,[b(l(ie),{href:x.route("profile.edit"),class:"flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-100"},{default:k(()=>[...u[6]||(u[6]=[n("svg",{class:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),n("span",null,"Profile Settings",-1)])]),_:1},8,["href"])])],2)],64))}}),ia={class:"relative"},ua={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},da={key:0,class:"fixed inset-x-4 top-16 sm:absolute sm:inset-x-auto sm:top-auto sm:right-0 mt-2 w-auto sm:w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-[600px] flex flex-col"},ca={class:"px-4 py-3 border-b border-gray-200 flex items-center justify-between"},pa={class:"overflow-y-auto flex-1"},fa={key:0,class:"p-8 text-center text-gray-500"},ga={key:1,class:"p-8 text-center text-gray-500"},va={key:2,class:"divide-y divide-gray-200"},ya={class:"flex items-start gap-3"},ma={class:"text-2xl flex-shrink-0"},ha={class:"flex-1 min-w-0"},xa={class:"flex items-start justify-between gap-2"},ba={class:"font-semibold text-gray-900 text-sm"},_a={class:"flex items-center gap-1 flex-shrink-0"},wa=["onClick"],ka=["onClick"],Ca={class:"text-sm text-gray-600 mt-1"},Da={class:"text-xs text-gray-400 mt-2"},$a=S({__name:"InsightPanel",setup(t){const a=Ne(),e=_([]),s=_(0),o=_(!1),r=_(!1);let f=null;const v=M(()=>!!a.props.auth?.user),i=async(u=!1)=>{if(v.value){u||(o.value=!0);try{const{data:p}=await Q.get("/insights");JSON.stringify(e.value)!==JSON.stringify(p.insights)&&(e.value=p.insights),s.value!==p.unread_count&&(s.value=p.unread_count)}catch(p){Q.isAxiosError(p)&&p.response?.status===401?f!==null&&(clearInterval(f),f=null):console.error("Error fetching insights:",p)}finally{u||(o.value=!1)}}},m=async u=>{try{await Q.patch(`/insights/${u}/read`);const p=e.value.find(c=>c.id===u);p&&(p.is_read=!0,s.value=Math.max(0,s.value-1))}catch(p){console.error("Error marking insight as read:",p)}},d=async()=>{try{await Q.post("/insights/mark-all-read"),e.value.forEach(u=>{u.is_read=!0}),s.value=0}catch(u){console.error("Error marking all as read:",u)}},g=async u=>{try{await Q.delete(`/insights/${u}`);const p=e.value.findIndex(c=>c.id===u);if(p!==-1){const c=!e.value[p].is_read;e.value.splice(p,1),c&&(s.value=Math.max(0,s.value-1))}}catch(p){console.error("Error deleting insight:",p)}},h=u=>{switch(u){case"grammar_pattern":return"ðŸ“";case"vocabulary_strength":return"ðŸ“š";case"proficiency_suggestion":return"ðŸŽ¯";default:return"ðŸ’¡"}},x=()=>{r.value=!r.value,r.value&&i()};return ue(()=>{v.value&&(i(),f=setInterval(()=>i(!0),3e4))}),Fe(()=>{f!==null&&(clearInterval(f),f=null)}),(u,p)=>(y(),C("div",ia,[n("button",{onClick:x,class:T(["relative p-2 text-gray-600 hover:text-gray-900 transition-colors",{"text-blue-600":r.value}])},[p[1]||(p[1]=n("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),s.value>0?(y(),C("span",ua,O(s.value),1)):I("",!0)],2),b(xt,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:k(()=>[r.value?(y(),C("div",da,[n("div",ca,[p[2]||(p[2]=n("h3",{class:"text-lg font-semibold text-gray-900"},"LangGPT Insights",-1)),e.value.length>0&&s.value>0?(y(),C("button",{key:0,onClick:d,class:"text-sm text-blue-600 hover:text-blue-800"}," Mark all read ")):I("",!0)]),n("div",pa,[o.value?(y(),C("div",fa,[b(je,{class:"h-8 w-8 mx-auto mb-2"}),p[3]||(p[3]=A(" Loading insights... ",-1))])):e.value.length===0?(y(),C("div",ga,[...p[4]||(p[4]=[n("div",{class:"text-4xl mb-2"},"ðŸ’¡",-1),n("p",{class:"font-medium"},"No insights yet",-1),n("p",{class:"text-sm mt-1"},"Keep chatting to receive personalized feedback!",-1)])])):(y(),C("div",va,[(y(!0),C(U,null,te(e.value,c=>(y(),C("div",{key:c.id,class:T(["p-4 hover:bg-gray-50 transition-colors",{"bg-blue-50/30":!c.is_read}])},[n("div",ya,[n("div",ma,O(h(c.insight_type)),1),n("div",ha,[n("div",xa,[n("h4",ba,O(c.title),1),n("div",_a,[c.is_read?I("",!0):(y(),C("button",{key:0,onClick:$=>m(c.id),class:"text-blue-600 hover:text-blue-800 p-1",title:"Mark as read"},[...p[5]||(p[5]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,wa)),n("button",{onClick:$=>g(c.id),class:"text-gray-400 hover:text-red-600 p-1",title:"Dismiss"},[...p[6]||(p[6]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ka)])]),n("p",Ca,O(c.message),1),n("p",Da,O(new Date(c.created_at).toLocaleDateString()),1)])])],2))),128))]))])])):I("",!0)]),_:1}),r.value?(y(),C("div",{key:0,onClick:p[0]||(p[0]=c=>r.value=!1),class:"fixed inset-0 z-40 bg-black/20 sm:bg-transparent"})):I("",!0)]))}}),Ea={class:"border-b border-gray-200 bg-white px-4 py-3 sm:px-6 sm:py-4"},Sa={class:"flex items-start justify-between gap-3"},Oa={class:"flex min-w-0 flex-1 items-center gap-3"},La={class:"flex items-center gap-2 sm:gap-3"},Pa={class:"mt-3 flex flex-wrap items-center gap-2 sm:mt-4 sm:gap-3"},Ma={"data-test":"native-language",class:"flex items-center gap-1.5 rounded-lg bg-blue-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},Ta={class:"flex items-center gap-1 text-sm sm:gap-1.5"},Ba={class:"text-gray-900"},Aa={"data-test":"target-language",class:"flex items-center gap-1.5 rounded-lg bg-green-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},Ia={class:"flex items-center gap-1 text-sm sm:gap-1.5"},Fa={class:"text-gray-900"},za={"data-test":"proficiency-level",class:"flex items-center gap-1.5 rounded-lg bg-purple-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},Na={class:"flex items-center gap-1 text-sm sm:gap-1.5"},qa={class:"text-gray-900"},ja=S({__name:"ChatHeader",props:{nativeLanguage:{},targetLanguage:{},proficiencyLevel:{},proficiencyLabel:{},autoUpdateProficiency:{type:Boolean}},emits:["settings","toggleSidebar"],setup(t,{emit:a}){const e=t,s=a,o=()=>{s("settings")},r=()=>{s("toggleSidebar")},f=M(()=>e.proficiencyLevel?e.autoUpdateProficiency?`Dynamic (${e.proficiencyLabel?`${e.proficiencyLevel} - ${e.proficiencyLabel}`:e.proficiencyLevel})`:e.proficiencyLevel+(e.proficiencyLabel?` (${e.proficiencyLabel})`:""):e.autoUpdateProficiency?"Dynamic (Not Set)":"Not Set");return(v,i)=>(y(),C("div",Ea,[n("div",Sa,[n("div",Oa,[n("button",{onClick:r,class:"flex-shrink-0 rounded-lg p-2 text-gray-600 transition-colors hover:bg-gray-100 lg:hidden","aria-label":"Toggle sidebar"},[b(l(Fs),{class:"h-5 w-5"})]),i[0]||(i[0]=n("div",{class:"min-w-0 flex-1"},[n("h1",{class:"text-lg font-semibold text-gray-900 sm:text-xl"},"Language Exchange Chat"),n("p",{class:"hidden text-sm text-gray-500 sm:block"}," Practice your language skills with AI assistance ")],-1))]),n("div",La,[b($a),b(l(ie),{href:v.route("profile.edit"),class:"hidden rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:block"},{default:k(()=>[...i[1]||(i[1]=[A(" Profile ",-1)])]),_:1},8,["href"]),b(l(ie),{href:v.route("logout"),method:"post",as:"button",class:"rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:px-4"},{default:k(()=>[...i[2]||(i[2]=[n("span",{class:"hidden sm:inline"},"Log out",-1),n("span",{class:"sm:hidden"},"Logout",-1)])]),_:1},8,["href"])])]),n("div",Pa,[n("div",Ma,[b(l(Ae),{class:"h-4 w-4 flex-shrink-0 text-blue-600"}),n("div",Ta,[i[3]||(i[3]=n("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Native:",-1)),n("span",Ba,O(t.nativeLanguage),1)])]),b(l(Bs),{class:"h-4 w-4 flex-shrink-0 text-gray-400"}),n("div",Aa,[b(l(Ae),{class:"h-4 w-4 flex-shrink-0 text-green-600"}),n("div",Ia,[i[4]||(i[4]=n("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Target:",-1)),n("span",Fa,O(t.targetLanguage),1)])]),i[7]||(i[7]=n("div",{class:"hidden h-4 w-px bg-gray-300 sm:block"},null,-1)),n("div",za,[b(l(As),{class:"h-4 w-4 flex-shrink-0 text-purple-600"}),n("div",Na,[i[5]||(i[5]=n("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Level:",-1)),n("span",qa,O(f.value),1)])]),n("button",{"data-test":"chat-settings-button",onClick:o,class:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-2.5 py-1.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:ml-2 sm:px-3",title:"Chat Settings"},[b(l(js),{class:"h-4 w-4 flex-shrink-0"}),i[6]||(i[6]=n("span",{class:"hidden sm:inline"},"Chat Settings",-1))])])]))}}),Ra={class:"relative inline-block"},Ua={class:"invisible","aria-hidden":"true","data-test":"typewriter-size"},Va=["dir"],Ka=S({__name:"TypewriterText",props:{text:{},speed:{default:30},disabled:{type:Boolean,default:!1}},emits:["complete"],setup(t,{emit:a}){const e=t,s=a,o=_(""),r=_("auto");let f=null;function v(d){const g=/[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]/,h=/[A-Za-z\u00C0-\u024F\u0400-\u04FF\u0370-\u03FF]/,x=g.test(d),u=h.test(d);return x&&u?"auto":x?"rtl":u?"ltr":"auto"}function i(){if(e.disabled){o.value=e.text,s("complete");return}if(o.value="",r.value=v(e.text),!e.text){s("complete");return}let d=0;function g(){d<e.text.length&&(o.value+=e.text[d],d++,d<e.text.length?f=setTimeout(g,e.speed):s("complete"))}f=setTimeout(g,0)}function m(){f&&(clearTimeout(f),f=null)}return W(()=>e.text,()=>{m(),i()},{immediate:!0}),bt(()=>{m()}),(d,g)=>(y(),C("span",Ra,[n("span",Ua,O(t.text),1),n("span",{class:"absolute inset-0","data-test":"typewriter-text",dir:r.value},O(o.value),9,Va)]))}}),Wa={class:"flex-shrink-0"},Ha={class:"text-sm font-semibold"},Xa={class:"whitespace-pre-wrap break-words text-sm leading-relaxed"},Ja={key:1},Ya={key:0,"data-test":"analyzing-indicator",class:"flex items-center gap-1"},Ga=S({__name:"ChatMessage",props:{content:{},role:{},timestamp:{},translation:{default:null},isAnalyzing:{type:Boolean},disableTypewriter:{type:Boolean,default:!1}},setup(t){return(a,e)=>(y(),C("div",{"data-test":"message-container",class:T(["flex gap-4",t.role==="user"?"flex-row-reverse":"flex-row"])},[n("div",Wa,[n("div",{"data-test":"message-avatar",class:T(["flex h-10 w-10 items-center justify-center rounded-full text-white",t.role==="user"?"bg-blue-600":"bg-gradient-to-br from-purple-600 to-blue-500"])},[n("span",Ha,O(t.role==="user"?"You":"AI"),1)],2)]),n("div",{"data-test":"message-content",class:T(["max-w-[70%] rounded-2xl px-4 py-3",t.role==="user"?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm ring-1 ring-gray-200"])},[n("p",Xa,[t.role==="assistant"&&!t.disableTypewriter?(y(),L(Ka,{key:0,text:t.translation||t.content,speed:30},null,8,["text"])):(y(),C("span",Ja,O(t.translation||t.content),1))]),n("div",{class:T(["mt-2 flex items-center gap-2 text-xs",t.role==="user"?"text-blue-100":"text-gray-500"])},[n("span",null,O(t.timestamp),1),t.isAnalyzing?(y(),C("span",Ya,[b(je,{class:"h-3 w-3"}),e[0]||(e[0]=A(" Analyzing... ",-1))])):I("",!0)],2)],2)],2))}}),Za={class:"flex items-center justify-between mb-3"},Qa={class:"flex items-center gap-2"},en={class:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3"},tn={class:"space-y-1"},sn={class:"p-2 rounded bg-gray-100 dark:bg-gray-900 border-2 border-gray-300 dark:border-gray-600"},an={class:"text-sm line-through text-gray-800 dark:text-gray-100"},nn={class:"space-y-1"},on={class:"text-xs font-semibold text-green-700 dark:text-green-300 uppercase tracking-wide flex items-center gap-1"},rn={class:"p-2 rounded bg-green-50 dark:bg-green-950/30 border-2 border-green-300 dark:border-green-700"},ln={class:"text-sm font-medium text-green-800 dark:text-green-200"},un={class:"mb-3 p-3 rounded bg-white/50 dark:bg-gray-800/50"},dn={class:"text-sm text-gray-900 dark:text-gray-50"},cn={class:"mb-3 p-3 rounded bg-white/50 dark:bg-gray-800/50"},pn={class:"text-sm text-gray-900 dark:text-gray-50"},fn={key:0,class:"mb-2 p-3 rounded bg-white/50 dark:bg-gray-800/50"},gn={class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-2 flex items-center gap-1"},vn={class:"space-y-1"},yn={class:"text-xs text-gray-500 dark:text-gray-500 text-right mt-2"},mn=S({__name:"CorrectionMessage",props:{content:{},correctionData:{},timestamp:{}},setup(t){const a=t,e={offensive:"Offensive Language",meaningless:"Unclear Meaning",unnatural:"Unnatural Phrasing",archaic:"Archaic Expression",dangerous:"Potentially Harmful"},s={offensive:"text-red-700 dark:text-red-300",meaningless:"text-orange-700 dark:text-orange-300",unnatural:"text-yellow-700 dark:text-yellow-300",archaic:"text-blue-700 dark:text-blue-300",dangerous:"text-red-800 dark:text-red-200"},o={critical:"bg-red-200 text-red-900 dark:bg-red-900/40 dark:text-red-200",high:"bg-orange-200 text-orange-900 dark:bg-orange-900/40 dark:text-orange-200",medium:"bg-yellow-200 text-yellow-900 dark:bg-yellow-900/40 dark:text-yellow-200"},r={critical:"border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-950/30",high:"border-orange-300 dark:border-orange-700 bg-orange-50 dark:bg-orange-950/30",medium:"border-yellow-300 dark:border-yellow-700 bg-yellow-50 dark:bg-yellow-950/30"},f=M(()=>{switch(a.correctionData.severity){case"critical":return Qe;case"high":return Us;default:return Ie}});return(v,i)=>(y(),C("div",{class:T(["px-4 py-3 rounded-lg border-2 my-3",r[t.correctionData.severity]])},[n("div",Za,[n("div",Qa,[(y(),L(_t(f.value),{class:T(["w-5 h-5",s[t.correctionData.error_type]])},null,8,["class"])),n("span",{class:T(["font-semibold text-sm",s[t.correctionData.error_type]])},O(e[t.correctionData.error_type]),3)]),n("span",{class:T(["text-xs font-medium px-2 py-1 rounded-full uppercase tracking-wide",o[t.correctionData.severity]])},O(t.correctionData.severity),3)]),n("div",en,[n("div",tn,[i[0]||(i[0]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-200 uppercase tracking-wide"}," Original ",-1)),n("div",sn,[n("span",an,O(t.correctionData.original_text),1)])]),n("div",nn,[n("div",on,[b(l(Is),{class:"w-3 h-3"}),i[1]||(i[1]=A(" Suggested ",-1))]),n("div",rn,[n("span",ln,O(t.correctionData.corrected_text),1)])])]),n("div",un,[i[2]||(i[2]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-1"}," Explanation ",-1)),n("p",dn,O(t.correctionData.explanation),1)]),n("div",cn,[i[3]||(i[3]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-1"}," Context ",-1)),n("p",pn,O(t.correctionData.context),1)]),t.correctionData.recommendations&&t.correctionData.recommendations.length>0?(y(),C("div",fn,[n("div",gn,[b(l(Ie),{class:"w-3 h-3"}),i[4]||(i[4]=A(" Recommendations ",-1))]),n("ul",vn,[(y(!0),C(U,null,te(t.correctionData.recommendations,(m,d)=>(y(),C("li",{key:d,class:"text-sm text-gray-900 dark:text-gray-50 flex items-start gap-2"},[i[5]||(i[5]=n("span",{class:"text-gray-400 dark:text-gray-500"},"â€¢",-1)),n("span",null,O(m),1)]))),128))])])):I("",!0),n("div",yn,O(t.timestamp),1)],2))}}),hn=S({inheritAttrs:!1,__name:"SendIcon",setup(t){return(a,e)=>(y(),L(l(qs),B({class:"h-5 w-5"},a.$attrs),null,16))}}),xn={},bn={"data-test":"ai-disclaimer",class:"mt-2 flex flex-col gap-1 text-xs text-gray-500 sm:flex-row sm:items-center sm:justify-between sm:gap-0"};function _n(t,a){return y(),C("div",bn,[...a[0]||(a[0]=[n("span",{class:"hidden sm:inline"},"Press Enter to send, Shift+Enter for new line",-1),n("span",{class:"sm:text-right"}," AI-generated responses may contain inaccuracies. Always verify important information. ",-1)])])}const wn=Ke(xn,[["render",_n]]),kn={class:"border-t border-gray-200 bg-white px-3 py-2 sm:px-4 sm:py-4"},Cn={class:"mx-auto max-w-3xl"},Dn={class:"relative flex items-end gap-2"},$n=["value","disabled","placeholder"],En=["disabled"],Sn=S({__name:"ChatInput",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue","send"],setup(t,{expose:a,emit:e}){const s=t,o=e,r=_(null),f=M(()=>window.innerWidth<640?"Type your message...":"Type your message here... (Shift+Enter for new line)"),v=h=>{const x=h.target;o("update:modelValue",x.value)},i=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),s.modelValue.trim()&&!s.disabled&&o("send"))},m=()=>{s.modelValue.trim()&&!s.disabled&&o("send")},d=()=>!s.modelValue.trim()||s.disabled;return W(()=>s.disabled,(h,x)=>{x&&!h&&setTimeout(()=>{r.value?.focus()},100)}),ue(()=>{r.value?.focus()}),a({focus:()=>{r.value?.focus()}}),(h,x)=>(y(),C("div",kn,[n("div",Cn,[n("div",Dn,[n("textarea",{ref_key:"textareaRef",ref:r,value:t.modelValue,onInput:v,onKeydown:i,disabled:t.disabled,placeholder:f.value,rows:"1",class:"max-h-32 min-h-[44px] flex-1 resize-none rounded-xl border border-gray-300 px-3 py-2.5 pr-12 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 disabled:cursor-not-allowed disabled:opacity-50 sm:px-4 sm:py-3"},null,40,$n),n("button",{"data-test":"send-button",onClick:m,disabled:d(),class:"absolute bottom-2 right-2 flex h-8 w-8 items-center justify-center rounded-lg bg-blue-600 text-white transition-all hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50"},[b(hn)],8,En)]),b(wn)])]))}}),On={},Ln={class:"flex gap-4"};function Pn(t,a){return y(),C("div",Ln,[...a[0]||(a[0]=[wt('<div class="flex-shrink-0"><div data-test="typing-avatar" class="flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-purple-600 to-blue-500 text-white"><span class="text-sm font-semibold">AI</span></div></div><div data-test="typing-container" class="rounded-2xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-200"><div class="flex gap-1"><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400 [animation-delay:-0.3s]"></div><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400 [animation-delay:-0.15s]"></div><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400"></div></div></div>',2)])])}const Mn=Ke(On,[["render",Pn]]),Tn={key:0,"data-test":"service-down-banner",class:"border-l-4 border-red-200 bg-red-50 p-4"},Bn={class:"flex items-start gap-3"},An=S({__name:"ServiceDownBanner",props:{isServiceDown:{type:Boolean}},setup(t){return(a,e)=>t.isServiceDown?(y(),C("div",Tn,[n("div",Bn,[b(l(Qe),{"data-test":"alert-icon",class:"h-5 w-5 flex-shrink-0 text-red-600"}),e[0]||(e[0]=n("div",{class:"flex-1"},[n("h3",{class:"text-sm font-semibold text-red-800"}," Language processing service is currently unavailable "),n("p",{class:"mt-1 text-sm text-red-700"}," Chat functionality is temporarily disabled. Please try again later. ")],-1))])])):I("",!0)}}),In=S({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(t,{emit:a}){const o=Ue(t,a);return(r,f)=>(y(),L(l(Yt),B({"data-slot":"dialog"},l(o)),{default:k(()=>[P(r.$slots,"default")]),_:3},16))}}),Fn=S({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,e=M(()=>{const{class:s,...o}=a;return o});return(s,o)=>(y(),L(l(Es),B({"data-slot":"dialog-overlay"},e.value,{class:l(G)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",a.class)}),{default:k(()=>[P(s.$slots,"default")]),_:3},16,["class"]))}}),zn=S({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=M(()=>{const{class:f,...v}=e;return v}),r=Ue(o,s);return(f,v)=>(y(),L(l(Ps),null,{default:k(()=>[b(Fn),b(l(_s),B({"data-slot":"dialog-content"},l(r),{class:l(G)("bg-white text-gray-900 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border border-gray-200 p-6 shadow-lg duration-200 sm:max-w-lg",e.class)}),{default:k(()=>[P(f.$slots,"default"),b(l(Zt),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},{default:k(()=>[b(l(we)),v[0]||(v[0]=n("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),Nn=S({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,e=M(()=>{const{class:o,...r}=a;return r}),s=Ve(e);return(o,r)=>(y(),L(l(ks),B({"data-slot":"dialog-description"},l(s),{class:l(G)("text-muted-foreground text-sm",a.class)}),{default:k(()=>[P(o.$slots,"default")]),_:3},16,["class"]))}}),qn=S({__name:"DialogFooter",props:{class:{}},setup(t){const a=t;return(e,s)=>(y(),C("div",{"data-slot":"dialog-footer",class:T(l(G)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a.class))},[P(e.$slots,"default")],2))}}),jn=S({__name:"DialogHeader",props:{class:{}},setup(t){const a=t;return(e,s)=>(y(),C("div",{"data-slot":"dialog-header",class:T(l(G)("flex flex-col gap-2 text-center sm:text-left",a.class))},[P(e.$slots,"default")],2))}}),Rn=S({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,e=M(()=>{const{class:o,...r}=a;return r}),s=Ve(e);return(o,r)=>(y(),L(l(Ts),B({"data-slot":"dialog-title"},l(s),{class:l(G)("text-lg leading-none font-semibold",a.class)}),{default:k(()=>[P(o.$slots,"default")]),_:3},16,["class"]))}}),Un={class:"grid gap-6 py-4"},Vn={class:"grid gap-2"},Kn=["value"],Wn={key:0,class:"text-sm text-red-600"},Hn={class:"space-y-4 rounded-lg border border-gray-200 p-4"},Xn={class:"flex items-center justify-between"},Jn={class:"space-y-0.5"},Yn={class:"flex items-center justify-between"},Gn={class:"space-y-0.5"},Zn=S({__name:"ChatSettingsModal",props:{open:{type:Boolean},chatSessionId:{},nativeLanguage:{},targetLanguage:{},proficiencyLevel:{},localizeCorrections:{type:Boolean,default:!0},localizeInsights:{type:Boolean,default:!0}},emits:["update:open","updated"],setup(t,{emit:a}){const e=t,s=a,o=_(e.nativeLanguage),r=_(e.targetLanguage),f=_(e.proficiencyLevel||"A1"),v=_(e.localizeCorrections),i=_(e.localizeInsights),m=_(!1),d=_({}),{languages:g}=It();W(()=>e.open,p=>{p&&(o.value=e.nativeLanguage,r.value=e.targetLanguage,f.value=e.proficiencyLevel||"A1",v.value=e.localizeCorrections,i.value=e.localizeInsights,d.value={})});const h=[{value:"A1",label:"A1 - Beginner",description:"Can understand and use familiar everyday expressions"},{value:"A2",label:"A2 - Elementary",description:"Can communicate in simple routine tasks"},{value:"B1",label:"B1 - Intermediate",description:"Can deal with most situations while traveling"},{value:"B2",label:"B2 - Upper Intermediate",description:"Can interact with native speakers fluently"},{value:"C1",label:"C1 - Advanced",description:"Can use language flexibly and effectively"},{value:"C2",label:"C2 - Mastery",description:"Can understand virtually everything with ease"}],x=()=>{s("update:open",!1)},u=()=>{d.value={},m.value=!0,qe.patch(route("language-chat.update-parameters",{chatSession:e.chatSessionId}),{native_language:o.value,target_language:r.value,proficiency_level:f.value,localize_corrections:v.value,localize_insights:i.value},{preserveScroll:!0,onSuccess:()=>{s("updated"),x()},onError:p=>{d.value=p},onFinish:()=>{m.value=!1}})};return(p,c)=>(y(),L(l(In),{open:t.open,"onUpdate:open":c[5]||(c[5]=$=>s("update:open",$))},{default:k(()=>[b(l(zn),{class:"sm:max-w-[500px]"},{default:k(()=>[b(l(jn),null,{default:k(()=>[b(l(Rn),null,{default:k(()=>[...c[6]||(c[6]=[A("Chat Session Settings",-1)])]),_:1}),b(l(Nn),null,{default:k(()=>[...c[7]||(c[7]=[A(" Customize the language settings for this chat session. These settings only apply to this conversation. ",-1)])]),_:1})]),_:1}),n("div",Un,[b(Pe,{id:"native-language",label:"Native Language",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=$=>o.value=$),options:l(g),"exclude-value":r.value,placeholder:"Select your native language",error:d.value.native_language},null,8,["modelValue","options","exclude-value","error"]),b(Pe,{id:"target-language",label:"Target Language",modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=$=>r.value=$),options:l(g),"exclude-value":o.value,placeholder:"Select language you're learning",error:d.value.target_language},null,8,["modelValue","options","exclude-value","error"]),n("div",Vn,[b(l(ye),{for:"proficiency-level"},{default:k(()=>[...c[8]||(c[8]=[A("Proficiency Level",-1)])]),_:1}),le(n("select",{id:"proficiency-level","onUpdate:modelValue":c[2]||(c[2]=$=>f.value=$),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2"},[(y(),C(U,null,te(h,$=>n("option",{key:$.value,value:$.value},O($.label)+" - "+O($.description),9,Kn)),64))],512),[[kt,f.value]]),d.value.proficiency_level?(y(),C("p",Wn,O(d.value.proficiency_level),1)):I("",!0)]),n("div",Hn,[c[13]||(c[13]=n("h4",{class:"text-sm font-medium"},"Localization Preferences",-1)),n("div",Xn,[n("div",Jn,[b(l(ye),{for:"localize-corrections",class:"font-normal"},{default:k(()=>[...c[9]||(c[9]=[A(" Localize Corrections ",-1)])]),_:1}),c[10]||(c[10]=n("p",{class:"text-xs text-gray-500"}," Receive error corrections in your native language ",-1))]),le(n("input",{id:"localize-corrections",type:"checkbox","onUpdate:modelValue":c[3]||(c[3]=$=>v.value=$),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,512),[[Ee,v.value]])]),n("div",Yn,[n("div",Gn,[b(l(ye),{for:"localize-insights",class:"font-normal"},{default:k(()=>[...c[11]||(c[11]=[A(" Localize Insights ",-1)])]),_:1}),c[12]||(c[12]=n("p",{class:"text-xs text-gray-500"}," Receive learning insights in your native language ",-1))]),le(n("input",{id:"localize-insights",type:"checkbox","onUpdate:modelValue":c[4]||(c[4]=$=>i.value=$),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,512),[[Ee,i.value]])])])]),b(l(qn),null,{default:k(()=>[b(l(Se),{variant:"outline",onClick:x,disabled:m.value},{default:k(()=>[...c[14]||(c[14]=[A(" Cancel ",-1)])]),_:1},8,["disabled"]),b(l(Se),{onClick:u,disabled:m.value},{default:k(()=>[A(O(m.value?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}}),Qn={"data-test":"main-container",class:"flex h-screen w-full overflow-hidden bg-gray-50"},eo={"data-test":"chat-area",class:"flex min-w-0 flex-1 flex-col"},to={key:0,class:"flex h-full items-center justify-center"},so={class:"text-center"},ao={class:"mb-8 text-gray-600"},no={class:"space-y-4"},oo={class:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-3"},ro={class:"rounded-lg border border-gray-200 bg-white p-4"},lo={class:"text-sm text-gray-600 text-center"},io={key:1,class:"mx-auto max-w-3xl space-y-6"},ko=S({__name:"LanguageChat",props:{chatHistory:{},userSettings:{},isServiceAvailable:{type:Boolean}},setup(t){const a=t,e=_(a.chatHistory),s=_(e.value[0]?.id||null),o=_([]),r=_(""),f=_(!1),v=_(!a.isServiceAvailable),i=_(null),m=_(null),d=_(null),g=_(null),h=_(null),x=_(!0),u=_(!0),p=_(a.userSettings.native_language),c=_(a.userSettings.target_language),$=_(a.userSettings.proficiency_level),ce=_(a.userSettings.auto_update_proficiency),pe=_(!1),se=_(!1);W(()=>a.userSettings.proficiency_level,E=>{$.value=E}),W(()=>a.userSettings.auto_update_proficiency,E=>{ce.value=E});const Ce=E=>E?(Ne().props.languages||[]).find(K=>K.value===E)?.label||E:"",et=M(()=>Ce(d.value)||p.value),tt=M(()=>Ce(g.value)||c.value),st=M(()=>{const E=h.value||$.value||"";return{A1:"Beginner",A2:"Elementary",B1:"Intermediate",B2:"Upper Intermediate",C1:"Advanced",C2:"Proficient"}[E]||E}),at=M(()=>{if(s.value){const E=e.value.find(D=>D.id===s.value);if(E)return E.title}return"Language Chat"}),De=M(()=>e.value.some(E=>E.title==="New Conversation")),nt=M(()=>f.value||v.value),ae=async()=>{await H(),i.value&&(i.value.scrollTop=i.value.scrollHeight)},fe=async E=>{try{const w=await(await fetch(route("language-chat.messages",{chatSession:E}))).json();o.value=w.messages.map(K=>({...K,disableTypewriter:!0})),w.session&&(d.value=w.session.native_language,g.value=w.session.target_language,h.value=w.session.proficiency_level,x.value=w.session.localize_corrections??!0,u.value=w.session.localize_insights??!0),await ae()}catch(D){console.error("Error loading messages:",D)}},ot=async()=>{if(!r.value.trim())return;if(!s.value&&(await ge(),await new Promise(w=>setTimeout(w,100)),!s.value)){console.error("Failed to create chat session");return}const E=r.value,D={id:Date.now(),content:E,sender_type:"user",created_at:new Date().toISOString()};o.value.push(D),r.value="",f.value=!0,await ae(),await H(),m.value?.focus();try{const w=route("language-chat.message",{chatSession:s.value}),j=await(await fetch(w,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({message:E})})).json(),$e=o.value.findIndex(Z=>Z.id===D.id);$e!==-1&&(o.value[$e]={...j.user_message,sender_type:"user"}),j.correction_message&&(o.value.push({...j.correction_message,sender_type:"system",message_type:"correction"}),await ae()),o.value.push({...j.ai_response,sender_type:"assistant"}),f.value=!1,await ae();const ve=e.value.findIndex(Z=>Z.id===s.value);ve!==-1&&(e.value[ve].last_message_at=new Date().toISOString(),j.new_title&&(e.value[ve].title=j.new_title)),o.value.filter(Z=>Z.sender_type==="user").length%10===0&&ce.value&&setTimeout(()=>{qe.reload({only:["userSettings"]})},2e4)}catch(w){console.error("Error sending message:",w),f.value=!1}},ge=async()=>{const E=e.value.find(D=>D.title==="New Conversation");if(E){ne(E.id);return}if(!De.value)try{const w=await(await fetch(route("language-chat.create"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({native_language:p.value,target_language:c.value,proficiency_level:$.value})})).json();e.value.unshift({id:w.id,title:"New Conversation",last_message_at:w.created_at,native_language:w.native_language,target_language:w.target_language}),ne(w.id)}catch(D){console.error("Error creating new chat:",D)}},ne=async E=>{s.value=E,await fe(E)},rt=async E=>{try{(await fetch(route("language-chat.destroy",{chatSession:E}),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).ok&&(e.value=e.value.filter(w=>w.id!==E),s.value===E&&(e.value.length>0?ne(e.value[0].id):(s.value=null,o.value=[])))}catch(D){console.error("Error deleting chat:",D)}},lt=async(E,D)=>{try{if((await fetch(route("language-chat.update-title",{chatSession:E}),{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({title:D})})).ok){const K=e.value.findIndex(j=>j.id===E);K!==-1&&(e.value[K].title=D)}}catch(w){console.error("Error updating chat title:",w)}},it=()=>{pe.value=!0},ut=()=>{se.value=!se.value},dt=()=>{se.value=!1},ct=async()=>{s.value&&await fe(s.value)};return ue(()=>{s.value&&fe(s.value)}),(E,D)=>(y(),C(U,null,[b(l(Ct),{title:at.value},null,8,["title"]),b(Dt,null,{default:k(()=>[n("div",Qn,[b(la,{chats:e.value,"active-chat":s.value,"has-unused-new-chat":De.value,"is-open":se.value,onNewChat:ge,onSelectChat:ne,onDeleteChat:rt,onUpdateTitle:lt,onClose:dt},null,8,["chats","active-chat","has-unused-new-chat","is-open"]),n("div",eo,[b(ja,{"native-language":et.value,"target-language":tt.value,"proficiency-level":h.value||$.value,"proficiency-label":st.value,"auto-update-proficiency":ce.value,onSettings:it,onToggleSidebar:ut},null,8,["native-language","target-language","proficiency-level","proficiency-label","auto-update-proficiency"]),n("div",{ref_key:"chatContainer",ref:i,"data-test":"chat-container",class:"flex-1 overflow-y-auto px-4 py-6"},[!s.value&&e.value.length===0?(y(),C("div",to,[n("div",so,[D[7]||(D[7]=n("div",{class:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-blue-100"},[n("svg",{class:"h-10 w-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),D[8]||(D[8]=n("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Start Your Language Journey",-1)),n("p",ao,"Practice "+O(c.value)+" with AI-powered conversations tailored to your level",1),n("div",no,[n("button",{onClick:ge,class:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-6 py-3 text-base font-medium text-white transition-colors hover:bg-blue-700"},[...D[2]||(D[2]=[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),A(" Start New Conversation ",-1)])]),n("div",oo,[n("div",ro,[D[3]||(D[3]=n("div",{class:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-green-100 mx-auto"},[n("svg",{class:"h-5 w-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),D[4]||(D[4]=n("h3",{class:"mb-1 font-medium text-gray-900 text-center"},"Adaptive Learning",-1)),n("p",lo,"AI adjusts to your "+O($.value)+" level",1)]),D[5]||(D[5]=n("div",{class:"rounded-lg border border-gray-200 bg-white p-4"},[n("div",{class:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-purple-100 mx-auto"},[n("svg",{class:"h-5 w-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})])]),n("h3",{class:"mb-1 font-medium text-gray-900 text-center"},"Natural Conversation"),n("p",{class:"text-sm text-gray-600 text-center"},"Practice real-world dialogue")],-1)),D[6]||(D[6]=n("div",{class:"rounded-lg border border-gray-200 bg-white p-4"},[n("div",{class:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-orange-100 mx-auto"},[n("svg",{class:"h-5 w-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),n("h3",{class:"mb-1 font-medium text-gray-900 text-center"},"Instant Feedback"),n("p",{class:"text-sm text-gray-600 text-center"},"Get corrections and suggestions")],-1))])])])])):(y(),C("div",io,[(y(!0),C(U,null,te(o.value,w=>(y(),C(U,{key:w.id},[w.message_type==="correction"&&w.correction_data?(y(),L(mn,{key:0,content:w.content,"correction-data":w.correction_data,timestamp:new Date(w.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},null,8,["content","correction-data","timestamp"])):(y(),L(Ga,{key:1,content:w.content,translation:w.translation,role:w.sender_type,timestamp:new Date(w.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"is-analyzing":w.isAnalyzing,"disable-typewriter":w.disableTypewriter},null,8,["content","translation","role","timestamp","is-analyzing","disable-typewriter"]))],64))),128)),f.value?(y(),L(Mn,{key:0})):I("",!0)]))],512),b(An,{"is-service-down":v.value},null,8,["is-service-down"]),b(Sn,{modelValue:r.value,"onUpdate:modelValue":D[0]||(D[0]=w=>r.value=w),disabled:nt.value,onSend:ot,ref_key:"chatInputRef",ref:m},null,8,["modelValue","disabled"])])]),s.value?(y(),L(Zn,{key:0,open:pe.value,"onUpdate:open":D[1]||(D[1]=w=>pe.value=w),"chat-session-id":s.value,"native-language":d.value||p.value,"target-language":g.value||c.value,"proficiency-level":h.value||$.value,"localize-corrections":x.value,"localize-insights":u.value,onUpdated:ct},null,8,["open","chat-session-id","native-language","target-language","proficiency-level","localize-corrections","localize-insights"])):I("",!0)]),_:1})],64))}});export{ko as default};
