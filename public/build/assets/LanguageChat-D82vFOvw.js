import{p as B,q as _,B as H,E as J,D as Ie,d as O,Q as ut,r as T,b as l,i as P,w as $,G as F,o as g,y as G,R as ae,S as Fe,U as dt,C as de,a as w,j as z,V as ct,L as pt,M as ft,c as D,F as K,e as n,l as xe,n as A,g as I,m as se,f as gt,k as ue,N as vt,t as L,J as ze,T as yt,W as te,X as mt,I as ht,Y as bt,Z as xt,_ as Ee,K as Ne,h as _t}from"./app-BCtOYXay.js";import{_ as wt}from"./AppShell.vue_vue_type_script_setup_true_lang-D5snpgde.js";import{_ as kt}from"./AppLogo.vue_vue_type_script_setup_true_lang-kcNRNydb.js";import{P as Z,b as N,_ as qe,a as $e}from"./Spinner.vue_vue_type_script_setup_true_lang-CpVccD2C.js";import{g as W,u as Se,b as ke,P as je,C as Ct,a as Re,c as Ue}from"./check-DZjPoGQR.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as Ke}from"./createContext-Dd8pEpuU.js";import{c as Dt,d as Et,i as ce,e as Oe,f as $t,u as St,b as Ot,a as q,o as Lt,g as Pt,h as Tt}from"./useForwardExpose-BeEIkiv6.js";import{c as Q}from"./utils-CDN07tui.js";import{_ as ve}from"./Label.vue_vue_type_script_setup_true_lang-CrAQFTYJ.js";import{_ as Le}from"./LanguageSelect.vue_vue_type_script_setup_true_lang-BA6NuUXg.js";import{u as Bt}from"./useLanguageOptions-BOg2e_7Y.js";function We(t,s,e){const a=e.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:e});s&&a.addEventListener(t,s,{once:!0}),a.dispatchEvent(o)}const[Mt]=Ke("ConfigProvider");function ye(t){if(t===null||typeof t!="object")return!1;const s=Object.getPrototypeOf(t);return s!==null&&s!==Object.prototype&&Object.getPrototypeOf(s)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function _e(t,s,e=".",a){if(!ye(s))return _e(t,{},e,a);const o=Object.assign({},s);for(const r in t){if(r==="__proto__"||r==="constructor")continue;const d=t[r];d!=null&&(a&&a(o,r,d,e)||(Array.isArray(d)&&Array.isArray(o[r])?o[r]=[...d,...o[r]]:ye(d)&&ye(o[r])?o[r]=_e(d,o[r],(e?`${e}.`:"")+r.toString(),a):o[r]=d))}return o}function At(t){return(...s)=>s.reduce((e,a)=>_e(e,a,"",t),{})}const It=At(),Ft=Dt(()=>{const t=_(new Map),s=_(),e=B(()=>{for(const d of t.value.values())if(d)return!0;return!1}),a=Mt({scrollBody:_(!0)});let o=null;const r=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=s.value??"",Oe&&o?.(),s.value=void 0};return H(e,(d,u)=>{if(!ce)return;if(!d){u&&r();return}s.value===void 0&&(s.value=document.body.style.overflow);const c=window.innerWidth-document.documentElement.clientWidth,y={padding:c,margin:0},i=a.scrollBody?.value?typeof a.scrollBody.value=="object"?It({padding:a.scrollBody.value.padding===!0?c:a.scrollBody.value.padding,margin:a.scrollBody.value.margin===!0?c:a.scrollBody.value.margin},y):y:{padding:0,margin:0};c>0&&(document.body.style.paddingRight=typeof i.padding=="number"?`${i.padding}px`:String(i.padding),document.body.style.marginRight=typeof i.margin=="number"?`${i.margin}px`:String(i.margin),document.documentElement.style.setProperty("--scrollbar-width",`${c}px`),document.body.style.overflow="hidden"),Oe&&(o=$t(document,"touchmove",p=>Nt(p),{passive:!1})),J(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function zt(t){const s=Math.random().toString(36).substring(2,7),e=Ft();e.value.set(s,t);const a=B({get:()=>e.value.get(s)??!1,set:o=>e.value.set(s,o)});return Et(()=>{e.value.delete(s)}),a}function He(t){const s=window.getComputedStyle(t);if(s.overflowX==="scroll"||s.overflowY==="scroll"||s.overflowX==="auto"&&t.clientWidth<t.scrollWidth||s.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const e=t.parentNode;return!(e instanceof Element)||e.tagName==="BODY"?!1:He(e)}}function Nt(t){const s=t||window.event,e=s.target;return e instanceof Element&&He(e)?!1:s.touches.length>1?!0:(s.preventDefault&&s.cancelable&&s.preventDefault(),!1)}var qt=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Y=new WeakMap,le=new WeakMap,ie={},me=0,Xe=function(t){return t&&(t.host||Xe(t.parentNode))},jt=function(t,s){return s.map(function(e){if(t.contains(e))return e;var a=Xe(e);return a&&t.contains(a)?a:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e})},Rt=function(t,s,e,a){var o=jt(s,Array.isArray(t)?t:[t]);ie[e]||(ie[e]=new WeakMap);var r=ie[e],d=[],u=new Set,c=new Set(o),y=function(p){!p||u.has(p)||(u.add(p),y(p.parentNode))};o.forEach(y);var i=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(m){if(u.has(m))i(m);else try{var h=m.getAttribute(a),f=h!==null&&h!=="false",x=(Y.get(m)||0)+1,v=(r.get(m)||0)+1;Y.set(m,x),r.set(m,v),d.push(m),x===1&&f&&le.set(m,!0),v===1&&m.setAttribute(e,"true"),f||m.setAttribute(a,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return i(s),u.clear(),me++,function(){d.forEach(function(p){var m=Y.get(p)-1,h=r.get(p)-1;Y.set(p,m),r.set(p,h),m||(le.has(p)||p.removeAttribute(a),le.delete(p)),h||p.removeAttribute(e)}),me--,me||(Y=new WeakMap,Y=new WeakMap,le=new WeakMap,ie={})}},Ut=function(t,s,e){e===void 0&&(e="data-aria-hidden");var a=Array.from(Array.isArray(t)?t:[t]),o=qt(t);return o?(a.push.apply(a,Array.from(o.querySelectorAll("[aria-live], script"))),Rt(a,o,e,"aria-hidden")):function(){return null}};function Vt(t){let s;H(()=>St(t),e=>{e?s=Ut(e):s&&s()}),Ie(()=>{s&&s()})}const[R,Kt]=Ke("DialogRoot");var Wt=O({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:s}){const e=t,o=Ot(e,"open",s,{defaultValue:e.defaultOpen,passive:e.open===void 0}),r=_(),d=_(),{modal:u}=ut(e);return Kt({open:o,modal:u,openModal:()=>{o.value=!0},onOpenChange:c=>{o.value=c},onOpenToggle:()=>{o.value=!o.value},contentId:"",titleId:"",descriptionId:"",triggerElement:r,contentElement:d}),(c,y)=>T(c.$slots,"default",{open:l(o),close:()=>o.value=!1})}}),Ht=Wt,Xt=O({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const s=t;q();const e=R();return(a,o)=>(g(),P(l(Z),F(s,{type:a.as==="button"?"button":void 0,onClick:o[0]||(o[0]=r=>l(e).onOpenChange(!1))}),{default:$(()=>[T(a.$slots,"default")]),_:3},16,["type"]))}}),Jt=Xt;const Yt="dismissableLayer.pointerDownOutside",Gt="dismissableLayer.focusOutside";function Je(t,s){const e=s.closest("[data-dismissable-layer]"),a=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),o=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(e&&(a===e||o.indexOf(a)<o.indexOf(e)))}function Zt(t,s,e=!0){const a=s?.value?.ownerDocument??globalThis?.document,o=_(!1),r=_(()=>{});return G(d=>{if(!ce||!ae(e))return;const u=async y=>{const i=y.target;if(!(!s?.value||!i)){if(Je(s.value,i)){o.value=!1;return}if(y.target&&!o.value){let m=function(){We(Yt,t,p)};const p={originalEvent:y};y.pointerType==="touch"?(a.removeEventListener("click",r.value),r.value=m,a.addEventListener("click",r.value,{once:!0})):m()}else a.removeEventListener("click",r.value);o.value=!1}},c=window.setTimeout(()=>{a.addEventListener("pointerdown",u)},0);d(()=>{window.clearTimeout(c),a.removeEventListener("pointerdown",u),a.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>{ae(e)&&(o.value=!0)}}}function Qt(t,s,e=!0){const a=s?.value?.ownerDocument??globalThis?.document,o=_(!1);return G(r=>{if(!ce||!ae(e))return;const d=async u=>{if(!s?.value)return;await J(),await J();const c=u.target;!s.value||!c||Je(s.value,c)||u.target&&!o.value&&We(Gt,t,{originalEvent:u})};a.addEventListener("focusin",d),r(()=>a.removeEventListener("focusin",d))}),{onFocusCapture:()=>{ae(e)&&(o.value=!0)},onBlurCapture:()=>{ae(e)&&(o.value=!1)}}}const j=Fe({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var ea=O({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:s}){const e=t,a=s,{forwardRef:o,currentElement:r}=q(),d=B(()=>r.value?.ownerDocument??globalThis.document),u=B(()=>j.layersRoot),c=B(()=>r.value?Array.from(u.value).indexOf(r.value):-1),y=B(()=>j.layersWithOutsidePointerEventsDisabled.size>0),i=B(()=>{const f=Array.from(u.value),[x]=[...j.layersWithOutsidePointerEventsDisabled].slice(-1),v=f.indexOf(x);return c.value>=v}),p=Zt(async f=>{const x=[...j.branches].some(v=>v?.contains(f.target));!i.value||x||(a("pointerDownOutside",f),a("interactOutside",f),await J(),f.defaultPrevented||a("dismiss"))},r),m=Qt(f=>{[...j.branches].some(v=>v?.contains(f.target))||(a("focusOutside",f),a("interactOutside",f),f.defaultPrevented||a("dismiss"))},r);Lt("Escape",f=>{c.value===u.value.size-1&&(a("escapeKeyDown",f),f.defaultPrevented||a("dismiss"))});let h;return G(f=>{r.value&&(e.disableOutsidePointerEvents&&(j.layersWithOutsidePointerEventsDisabled.size===0&&(h=d.value.body.style.pointerEvents,d.value.body.style.pointerEvents="none"),j.layersWithOutsidePointerEventsDisabled.add(r.value)),u.value.add(r.value),f(()=>{e.disableOutsidePointerEvents&&j.layersWithOutsidePointerEventsDisabled.size===1&&(d.value.body.style.pointerEvents=h)}))}),G(f=>{f(()=>{r.value&&(u.value.delete(r.value),j.layersWithOutsidePointerEventsDisabled.delete(r.value))})}),(f,x)=>(g(),P(l(Z),{ref:l(o),"as-child":f.asChild,as:f.as,"data-dismissable-layer":"",style:dt({pointerEvents:y.value?i.value?"auto":"none":void 0}),onFocusCapture:l(m).onFocusCapture,onBlurCapture:l(m).onBlurCapture,onPointerdownCapture:l(p).onPointerDownCapture},{default:$(()=>[T(f.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),ta=ea;const aa=Pt(()=>_([]));function sa(){const t=aa();return{add(s){const e=t.value[0];s!==e&&e?.pause(),t.value=Pe(t.value,s),t.value.unshift(s)},remove(s){t.value=Pe(t.value,s),t.value[0]?.resume()}}}function Pe(t,s){const e=[...t],a=e.indexOf(s);return a!==-1&&e.splice(a,1),e}function na(t){return t.filter(s=>s.tagName!=="A")}const he="focusScope.autoFocusOnMount",be="focusScope.autoFocusOnUnmount",Te={bubbles:!1,cancelable:!0};function oa(t,{select:s=!1}={}){const e=W();for(const a of t)if(V(a,{select:s}),W()!==e)return!0}function ra(t){const s=Ye(t),e=Be(s,t),a=Be(s.reverse(),t);return[e,a]}function Ye(t){const s=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const o=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||o?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)s.push(e.currentNode);return s}function Be(t,s){for(const e of t)if(!la(e,{upTo:s}))return e}function la(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function ia(t){return t instanceof HTMLInputElement&&"select"in t}function V(t,{select:s=!1}={}){if(t&&t.focus){const e=W();t.focus({preventScroll:!0}),t!==e&&ia(t)&&s&&t.select()}}var ua=O({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:s}){const e=t,a=s,{currentRef:o,currentElement:r}=q(),d=_(null),u=sa(),c=Fe({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});G(i=>{if(!ce)return;const p=r.value;if(!e.trapped)return;function m(v){if(c.paused||!p)return;const b=v.target;p.contains(b)?d.value=b:V(d.value,{select:!0})}function h(v){if(c.paused||!p)return;const b=v.relatedTarget;b!==null&&(p.contains(b)||V(d.value,{select:!0}))}function f(v){p.contains(d.value)||V(p)}document.addEventListener("focusin",m),document.addEventListener("focusout",h);const x=new MutationObserver(f);p&&x.observe(p,{childList:!0,subtree:!0}),i(()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",h),x.disconnect()})}),G(async i=>{const p=r.value;if(await J(),!p)return;u.add(c);const m=W();if(!p.contains(m)){const f=new CustomEvent(he,Te);p.addEventListener(he,x=>a("mountAutoFocus",x)),p.dispatchEvent(f),f.defaultPrevented||(oa(na(Ye(p)),{select:!0}),W()===m&&V(p))}i(()=>{p.removeEventListener(he,v=>a("mountAutoFocus",v));const f=new CustomEvent(be,Te),x=v=>{a("unmountAutoFocus",v)};p.addEventListener(be,x),p.dispatchEvent(f),setTimeout(()=>{f.defaultPrevented||V(m??document.body,{select:!0}),p.removeEventListener(be,x),u.remove(c)},0)})});function y(i){if(!e.loop&&!e.trapped||c.paused)return;const p=i.key==="Tab"&&!i.altKey&&!i.ctrlKey&&!i.metaKey,m=W();if(p&&m){const h=i.currentTarget,[f,x]=ra(h);f&&x?!i.shiftKey&&m===x?(i.preventDefault(),e.loop&&V(f,{select:!0})):i.shiftKey&&m===f&&(i.preventDefault(),e.loop&&V(x,{select:!0})):m===h&&i.preventDefault()}}return(i,p)=>(g(),P(l(Z),{ref_key:"currentRef",ref:o,tabindex:"-1","as-child":i.asChild,as:i.as,onKeydown:y},{default:$(()=>[T(i.$slots,"default")]),_:3},8,["as-child","as"]))}}),da=ua;function ca(t){return t?"open":"closed"}var pa=O({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:s}){const e=t,a=s,o=R(),{forwardRef:r,currentElement:d}=q();return o.titleId||=Se(void 0,"reka-dialog-title"),o.descriptionId||=Se(void 0,"reka-dialog-description"),de(()=>{o.contentElement=d,W()!==document.body&&(o.triggerElement.value=W())}),(u,c)=>(g(),P(l(da),{"as-child":"",loop:"",trapped:e.trapFocus,onMountAutoFocus:c[5]||(c[5]=y=>a("openAutoFocus",y)),onUnmountAutoFocus:c[6]||(c[6]=y=>a("closeAutoFocus",y))},{default:$(()=>[w(l(ta),F({id:l(o).contentId,ref:l(r),as:u.as,"as-child":u.asChild,"disable-outside-pointer-events":u.disableOutsidePointerEvents,role:"dialog","aria-describedby":l(o).descriptionId,"aria-labelledby":l(o).titleId,"data-state":l(ca)(l(o).open.value)},u.$attrs,{onDismiss:c[0]||(c[0]=y=>l(o).onOpenChange(!1)),onEscapeKeyDown:c[1]||(c[1]=y=>a("escapeKeyDown",y)),onFocusOutside:c[2]||(c[2]=y=>a("focusOutside",y)),onInteractOutside:c[3]||(c[3]=y=>a("interactOutside",y)),onPointerDownOutside:c[4]||(c[4]=y=>a("pointerDownOutside",y))}),{default:$(()=>[T(u.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Ge=pa,fa=O({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:s}){const e=t,a=s,o=R(),r=ke(a),{forwardRef:d,currentElement:u}=q();return Vt(u),(c,y)=>(g(),P(Ge,F({...e,...l(r)},{ref:l(d),"trap-focus":l(o).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:y[0]||(y[0]=i=>{i.defaultPrevented||(i.preventDefault(),l(o).triggerElement.value?.focus())}),onPointerDownOutside:y[1]||(y[1]=i=>{const p=i.detail.originalEvent,m=p.button===0&&p.ctrlKey===!0;(p.button===2||m)&&i.preventDefault()}),onFocusOutside:y[2]||(y[2]=i=>{i.preventDefault()})}),{default:$(()=>[T(c.$slots,"default")]),_:3},16,["trap-focus"]))}}),ga=fa,va=O({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:s}){const e=t,o=ke(s);q();const r=R(),d=_(!1),u=_(!1);return(c,y)=>(g(),P(Ge,F({...e,...l(o)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:y[0]||(y[0]=i=>{i.defaultPrevented||(d.value||l(r).triggerElement.value?.focus(),i.preventDefault()),d.value=!1,u.value=!1}),onInteractOutside:y[1]||(y[1]=i=>{i.defaultPrevented||(d.value=!0,i.detail.originalEvent.type==="pointerdown"&&(u.value=!0));const p=i.target;l(r).triggerElement.value?.contains(p)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&u.value&&i.preventDefault()})}),{default:$(()=>[T(c.$slots,"default")]),_:3},16))}}),ya=va,ma=O({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:s}){const e=t,a=s,o=R(),r=ke(a),{forwardRef:d}=q();return(u,c)=>(g(),P(l(je),{present:u.forceMount||l(o).open.value},{default:$(()=>[l(o).modal.value?(g(),P(ga,F({key:0,ref:l(d)},{...e,...l(r),...u.$attrs}),{default:$(()=>[T(u.$slots,"default")]),_:3},16)):(g(),P(ya,F({key:1,ref:l(d)},{...e,...l(r),...u.$attrs}),{default:$(()=>[T(u.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),ha=ma,ba=O({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(t){const s=t;q();const e=R();return(a,o)=>(g(),P(l(Z),F(s,{id:l(e).descriptionId}),{default:$(()=>[T(a.$slots,"default")]),_:3},16,["id"]))}}),xa=ba,_a=O({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const s=R();return zt(!0),q(),(e,a)=>(g(),P(l(Z),{as:e.as,"as-child":e.asChild,"data-state":l(s).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:$(()=>[T(e.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),wa=_a,ka=O({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const s=R(),{forwardRef:e}=q();return(a,o)=>l(s)?.modal.value?(g(),P(l(je),{key:0,present:a.forceMount||l(s).open.value},{default:$(()=>[w(wa,F(a.$attrs,{ref:l(e),as:a.as,"as-child":a.asChild}),{default:$(()=>[T(a.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):z("v-if",!0)}}),Ca=ka,Da=O({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const s=Tt();return(e,a)=>l(s)||e.forceMount?(g(),P(ct,{key:0,to:e.to,disabled:e.disabled,defer:e.defer},[T(e.$slots,"default")],8,["to","disabled","defer"])):z("v-if",!0)}}),Ea=Da,$a=O({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const s=t;return(e,a)=>(g(),P(l(Ea),pt(ft(s)),{default:$(()=>[T(e.$slots,"default")]),_:3},16))}}),Sa=$a,Oa=O({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const s=t,e=R();return q(),(a,o)=>(g(),P(l(Z),F(s,{id:l(e).titleId}),{default:$(()=>[T(a.$slots,"default")]),_:3},16,["id"]))}}),La=Oa;const Pa=N("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Ta=N("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Ze=N("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Ba=N("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Me=N("LanguagesIcon",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const Ae=N("LightbulbIcon",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const Ma=N("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Aa=N("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Ia=N("SendIcon",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const Fa=N("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const za=N("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Na=N("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const we=N("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),qa={class:"border-b border-gray-200 px-4 py-4"},ja={class:"flex items-center justify-between"},Ra={class:"border-b border-gray-200 px-4 py-4"},Ua=["disabled"],Va={"data-test":"chat-list",class:"flex-1 overflow-y-auto p-2"},Ka={class:"space-y-1"},Wa=["onClick"],Ha={class:"min-w-0 flex-1"},Xa=["onKeydown"],Ja=["onClick"],Ya={key:1,class:"group/title"},Ga={class:"flex items-center gap-1"},Za=["title"],Qa=["onClick"],es={class:"mt-0.5 truncate text-xs text-gray-500"},ts=["onClick"],as=O({__name:"ChatSidebar",props:{chats:{},activeChat:{},hasUnusedNewChat:{type:Boolean},isOpen:{type:Boolean,default:!1}},emits:["new-chat","select-chat","delete-chat","update-title","close"],setup(t,{emit:s}){const e=t,a=s,o=_(null),r=_(""),d=()=>{e.hasUnusedNewChat||a("new-chat")},u=h=>{o.value!==h&&(a("select-chat",h),a("close"))},c=(h,f)=>{h.stopPropagation(),confirm("Are you sure you want to delete this conversation?")&&a("delete-chat",f)},y=(h,f)=>{h.stopPropagation(),o.value=f.id,r.value=f.title},i=(h,f)=>{h.stopPropagation(),r.value.trim()&&a("update-title",f,r.value.trim()),o.value=null,r.value=""},p=h=>{h.stopPropagation(),o.value=null,r.value=""},m=(h,f)=>{h.key==="Enter"?(h.preventDefault(),i(h,f)):h.key==="Escape"&&p(h)};return(h,f)=>(g(),D(K,null,[t.isOpen?(g(),D("div",{key:0,class:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:f[0]||(f[0]=x=>a("close"))})):z("",!0),n("div",{class:A(["fixed lg:static inset-y-0 left-0 z-50 flex h-screen w-64 flex-col border-r border-gray-200 bg-white transform transition-transform duration-300 lg:translate-x-0",t.isOpen?"translate-x-0":"-translate-x-full"])},[n("div",qa,[n("div",ja,[w(l(xe),{href:h.route("language-chat.index")},{default:$(()=>[w(kt,{size:"sm"})]),_:1},8,["href"]),n("button",{onClick:f[1]||(f[1]=x=>a("close")),class:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close sidebar"},[w(l(we),{class:"h-5 w-5 text-gray-600"})])])]),n("div",Ra,[n("button",{"data-test":"new-chat-button",onClick:d,disabled:t.hasUnusedNewChat,class:A(["flex w-full items-center justify-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors",t.hasUnusedNewChat?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},[w(l(Aa),{class:"h-4 w-4"}),f[4]||(f[4]=I(" New Chat ",-1))],10,Ua)]),n("div",Va,[n("div",Ka,[(g(!0),D(K,null,se(t.chats,x=>(g(),D("div",{key:x.id,"data-test":"chat-item",onClick:v=>u(x.id),class:A(["group flex w-full items-start gap-3 rounded-lg px-3 py-2.5 text-left transition-colors cursor-pointer",t.activeChat===x.id?"bg-gray-100 hover:bg-gray-200":"hover:bg-gray-100"])},[(g(),D("svg",{class:A(["mt-0.5 h-4 w-4 flex-shrink-0",t.activeChat===x.id?"text-gray-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...f[5]||(f[5]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)])],2)),n("div",Ha,[o.value===x.id?(g(),D("div",{key:0,class:"flex items-center gap-1",onClick:f[3]||(f[3]=gt(()=>{},["stop"]))},[ue(n("input",{"onUpdate:modelValue":f[2]||(f[2]=v=>r.value=v),onKeydown:v=>m(v,x.id),type:"text",class:"flex-1 rounded border border-blue-500 px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",autofocus:""},null,40,Xa),[[vt,r.value]]),n("button",{onClick:v=>i(v,x.id),class:"p-1 rounded hover:bg-green-100",title:"Save"},[w(l(Ct),{class:"h-4 w-4 text-green-600"})],8,Ja),n("button",{onClick:p,class:"p-1 rounded hover:bg-red-100",title:"Cancel"},[w(l(we),{class:"h-4 w-4 text-red-600"})])])):(g(),D("div",Ya,[n("div",Ga,[n("p",{class:A(["truncate text-sm font-medium",t.activeChat===x.id?"text-gray-900":"text-gray-700"]),title:x.title},L(x.title),11,Za),n("button",{onClick:v=>y(v,x),class:"flex-shrink-0 opacity-0 group-hover/title:opacity-100 p-0.5 rounded hover:bg-gray-200",title:"Edit title"},[w(l(Ma),{class:"h-3 w-3 text-gray-500"})],8,Qa)]),n("p",es,L(x.timestamp),1)]))]),n("button",{onClick:v=>c(v,x.id),class:"opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded hover:bg-red-50",title:"Delete conversation"},[w(l(za),{class:"h-4 w-4 text-gray-400 hover:text-red-600"})],8,ts)],10,Wa))),128))])])],2)],64))}}),ss={class:"relative"},ns={key:0,class:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-[600px] flex flex-col"},os={class:"px-4 py-3 border-b border-gray-200 flex items-center justify-between"},rs={class:"overflow-y-auto flex-1"},ls={key:0,class:"p-8 text-center text-gray-500"},is={key:1,class:"p-8 text-center text-gray-500"},us={key:2,class:"divide-y divide-gray-200"},ds={class:"flex items-start gap-3"},cs={class:"text-2xl flex-shrink-0"},ps={class:"flex-1 min-w-0"},fs={class:"flex items-start justify-between gap-2"},gs={class:"font-semibold text-gray-900 text-sm"},vs={class:"flex items-center gap-1 flex-shrink-0"},ys=["onClick"],ms=["onClick"],hs={class:"text-sm text-gray-600 mt-1"},bs={class:"text-xs text-gray-400 mt-2"},xs=O({__name:"InsightPanel",setup(t){const s=ze(),e=_([]),a=_(0),o=_(!1),r=_(!1);let d=null;const u=B(()=>!!s.props.auth?.user),c=_(!1);let y=null;const i=_(!1);H(a,(b,C)=>{i.value&&b>C&&(c.value=!0,y&&clearTimeout(y),y=setTimeout(()=>{c.value=!1},4e3))});const p=async(b=!1)=>{if(u.value){b||(o.value=!0);try{const{data:C}=await te.get("/insights");JSON.stringify(e.value)!==JSON.stringify(C.insights)&&(e.value=C.insights),a.value!==C.unread_count&&(a.value=C.unread_count)}catch(C){te.isAxiosError(C)&&C.response?.status===401?d!==null&&(clearInterval(d),d=null):console.error("Error fetching insights:",C)}finally{b||(o.value=!1)}}},m=async b=>{try{await te.patch(`/insights/${b}/read`);const C=e.value.find(M=>M.id===b);C&&(C.is_read=!0,a.value=Math.max(0,a.value-1))}catch(C){console.error("Error marking insight as read:",C)}},h=async()=>{try{await te.post("/insights/mark-all-read"),e.value.forEach(b=>{b.is_read=!0}),a.value=0}catch(b){console.error("Error marking all as read:",b)}},f=async b=>{try{await te.delete(`/insights/${b}`);const C=e.value.findIndex(M=>M.id===b);if(C!==-1){const M=!e.value[C].is_read;e.value.splice(C,1),M&&(a.value=Math.max(0,a.value-1))}}catch(C){console.error("Error deleting insight:",C)}},x=b=>{switch(b){case"grammar_pattern":return"ðŸ“";case"vocabulary_strength":return"ðŸ“š";case"proficiency_suggestion":return"ðŸŽ¯";default:return"ðŸ’¡"}},v=()=>{r.value=!r.value,r.value&&p()};return de(()=>{u.value?(p().finally(()=>{i.value=!0}),d=setInterval(()=>p(!0),3e4)):i.value=!0}),Ie(()=>{d!==null&&(clearInterval(d),d=null),y&&clearTimeout(y)}),(b,C)=>(g(),D("div",ss,[n("button",{onClick:v,class:A(["relative p-2 text-gray-600 hover:text-gray-900 transition-colors",{"text-blue-600":r.value}])},[C[1]||(C[1]=n("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),a.value>0?(g(),D("span",{key:0,class:A(["absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/5 -translate-y-1/5 bg-red-600 rounded-full transition-all origin-center",{"animate-pulse-subtle":c.value}])},L(a.value),3)):z("",!0)],2),w(yt,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:$(()=>[r.value?(g(),D("div",ns,[n("div",os,[C[2]||(C[2]=n("h3",{class:"text-lg font-semibold text-gray-900"},"LangGPT Insights",-1)),e.value.length>0&&a.value>0?(g(),D("button",{key:0,onClick:h,class:"text-sm text-blue-600 hover:text-blue-800"}," Mark all read ")):z("",!0)]),n("div",rs,[o.value?(g(),D("div",ls,[w(qe,{class:"h-8 w-8 mx-auto mb-2"}),C[3]||(C[3]=I(" Loading insights... ",-1))])):e.value.length===0?(g(),D("div",is,[...C[4]||(C[4]=[n("div",{class:"text-4xl mb-2"},"ðŸ’¡",-1),n("p",{class:"font-medium"},"No insights yet",-1),n("p",{class:"text-sm mt-1"},"Keep chatting to receive personalized feedback!",-1)])])):(g(),D("div",us,[(g(!0),D(K,null,se(e.value,M=>(g(),D("div",{key:M.id,class:A(["p-4 hover:bg-gray-50 transition-colors",{"bg-blue-50/30":!M.is_read}])},[n("div",ds,[n("div",cs,L(x(M.insight_type)),1),n("div",ps,[n("div",fs,[n("h4",gs,L(M.title),1),n("div",vs,[M.is_read?z("",!0):(g(),D("button",{key:0,onClick:ne=>m(M.id),class:"text-blue-600 hover:text-blue-800 p-1",title:"Mark as read"},[...C[5]||(C[5]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,ys)),n("button",{onClick:ne=>f(M.id),class:"text-gray-400 hover:text-red-600 p-1",title:"Dismiss"},[...C[6]||(C[6]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ms)])]),n("p",hs,L(M.message),1),n("p",bs,L(new Date(M.created_at).toLocaleDateString()),1)])])],2))),128))]))])])):z("",!0)]),_:1}),r.value?(g(),D("div",{key:0,onClick:C[0]||(C[0]=M=>r.value=!1),class:"fixed inset-0 z-40"})):z("",!0)]))}}),_s={class:"border-b border-gray-200 bg-white px-6 py-4"},ws={class:"flex items-center justify-between"},ks={class:"flex items-center gap-3"},Cs={class:"mt-4 flex flex-wrap items-center gap-3"},Ds={"data-test":"native-language",class:"flex items-center gap-2 rounded-lg bg-blue-50 px-3 py-1.5"},Es={class:"flex items-center gap-1.5 text-sm"},$s={class:"text-gray-900"},Ss={"data-test":"target-language",class:"flex items-center gap-2 rounded-lg bg-green-50 px-3 py-1.5"},Os={class:"flex items-center gap-1.5 text-sm"},Ls={class:"text-gray-900"},Ps={"data-test":"proficiency-level",class:"flex items-center gap-2 rounded-lg bg-purple-50 px-3 py-1.5"},Ts={class:"flex items-center gap-1.5 text-sm"},Bs={class:"text-gray-900"},Ms=O({__name:"ChatHeader",props:{nativeLanguage:{},targetLanguage:{},proficiencyLevel:{},proficiencyLabel:{},autoUpdateProficiency:{type:Boolean}},emits:["settings"],setup(t,{emit:s}){const e=t,a=s,o=()=>{a("settings")},r=B(()=>e.proficiencyLevel?e.autoUpdateProficiency?`Dynamic (${e.proficiencyLabel?`${e.proficiencyLevel} - ${e.proficiencyLabel}`:e.proficiencyLevel})`:e.proficiencyLevel+(e.proficiencyLabel?` (${e.proficiencyLabel})`:""):e.autoUpdateProficiency?"Dynamic (Not Set)":"Not Set");return(d,u)=>(g(),D("div",_s,[n("div",ws,[u[2]||(u[2]=n("div",null,[n("h1",{class:"text-xl font-semibold text-gray-900"},"Language Exchange Chat"),n("p",{class:"text-sm text-gray-500"}," Practice your language skills with AI assistance ")],-1)),n("div",ks,[w(xs),w(l(xe),{href:d.route("profile.edit"),class:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50"},{default:$(()=>[...u[0]||(u[0]=[I(" Profile ",-1)])]),_:1},8,["href"]),w(l(xe),{href:d.route("logout"),method:"post",as:"button",class:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50"},{default:$(()=>[...u[1]||(u[1]=[I(" Log out ",-1)])]),_:1},8,["href"])])]),n("div",Cs,[n("div",Ds,[w(l(Me),{class:"h-4 w-4 text-blue-600"}),n("div",Es,[u[3]||(u[3]=n("span",{class:"font-medium text-gray-700"},"Native:",-1)),n("span",$s,L(t.nativeLanguage),1)])]),w(l(Pa),{class:"h-4 w-4 text-gray-400"}),n("div",Ss,[w(l(Me),{class:"h-4 w-4 text-green-600"}),n("div",Os,[u[4]||(u[4]=n("span",{class:"font-medium text-gray-700"},"Target:",-1)),n("span",Ls,L(t.targetLanguage),1)])]),u[7]||(u[7]=n("div",{class:"h-4 w-px bg-gray-300"},null,-1)),n("div",Ps,[w(l(Ta),{class:"h-4 w-4 text-purple-600"}),n("div",Ts,[u[5]||(u[5]=n("span",{class:"font-medium text-gray-700"},"Level:",-1)),n("span",Bs,L(r.value),1)])]),n("button",{"data-test":"chat-settings-button",onClick:o,class:"ml-2 flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50",title:"Chat Settings"},[w(l(Fa),{class:"h-4 w-4"}),u[6]||(u[6]=n("span",null,"Chat Settings",-1))])])]))}}),As={class:"relative inline-block"},Is={class:"invisible","aria-hidden":"true","data-test":"typewriter-size"},Fs=["dir"],zs=O({__name:"TypewriterText",props:{text:{},speed:{default:30},disabled:{type:Boolean,default:!1}},emits:["complete"],setup(t,{emit:s}){const e=t,a=s,o=_(""),r=_("auto");let d=null;function u(i){const p=/[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]/,m=/[A-Za-z\u00C0-\u024F\u0400-\u04FF\u0370-\u03FF]/,h=p.test(i),f=m.test(i);return h&&f?"auto":h?"rtl":f?"ltr":"auto"}function c(){if(e.disabled){o.value=e.text,a("complete");return}if(o.value="",r.value=u(e.text),!e.text){a("complete");return}let i=0;function p(){i<e.text.length&&(o.value+=e.text[i],i++,i<e.text.length?d=setTimeout(p,e.speed):a("complete"))}d=setTimeout(p,0)}function y(){d&&(clearTimeout(d),d=null)}return H(()=>e.text,()=>{y(),c()},{immediate:!0}),mt(()=>{y()}),(i,p)=>(g(),D("span",As,[n("span",Is,L(t.text),1),n("span",{class:"absolute inset-0","data-test":"typewriter-text",dir:r.value},L(o.value),9,Fs)]))}}),Ns={class:"flex-shrink-0"},qs={class:"text-sm font-semibold"},js={class:"whitespace-pre-wrap break-words text-sm leading-relaxed"},Rs={key:1},Us={key:0,"data-test":"analyzing-indicator",class:"flex items-center gap-1"},Vs=O({__name:"ChatMessage",props:{content:{},role:{},timestamp:{},translation:{default:null},isAnalyzing:{type:Boolean},disableTypewriter:{type:Boolean,default:!1}},setup(t){return(s,e)=>(g(),D("div",{"data-test":"message-container",class:A(["flex gap-4",t.role==="user"?"flex-row-reverse":"flex-row"])},[n("div",Ns,[n("div",{"data-test":"message-avatar",class:A(["flex h-10 w-10 items-center justify-center rounded-full text-white",t.role==="user"?"bg-blue-600":"bg-gradient-to-br from-purple-600 to-blue-500"])},[n("span",qs,L(t.role==="user"?"You":"AI"),1)],2)]),n("div",{"data-test":"message-content",class:A(["max-w-[70%] rounded-2xl px-4 py-3",t.role==="user"?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm ring-1 ring-gray-200"])},[n("p",js,[t.role==="assistant"&&!t.disableTypewriter?(g(),P(zs,{key:0,text:t.translation||t.content,speed:30},null,8,["text"])):(g(),D("span",Rs,L(t.translation||t.content),1))]),n("div",{class:A(["mt-2 flex items-center gap-2 text-xs",t.role==="user"?"text-blue-100":"text-gray-500"])},[n("span",null,L(t.timestamp),1),t.isAnalyzing?(g(),D("span",Us,[w(qe,{class:"h-3 w-3"}),e[0]||(e[0]=I(" Analyzing... ",-1))])):z("",!0)],2)],2)],2))}}),Ks={class:"flex items-center justify-between mb-3"},Ws={class:"flex items-center gap-2"},Hs={class:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3"},Xs={class:"space-y-1"},Js={class:"p-2 rounded bg-gray-100 dark:bg-gray-900 border-2 border-gray-300 dark:border-gray-600"},Ys={class:"text-sm line-through text-gray-800 dark:text-gray-100"},Gs={class:"space-y-1"},Zs={class:"text-xs font-semibold text-green-700 dark:text-green-300 uppercase tracking-wide flex items-center gap-1"},Qs={class:"p-2 rounded bg-green-50 dark:bg-green-950/30 border-2 border-green-300 dark:border-green-700"},en={class:"text-sm font-medium text-green-800 dark:text-green-200"},tn={class:"mb-3 p-3 rounded bg-white/50 dark:bg-gray-800/50"},an={class:"text-sm text-gray-900 dark:text-gray-50"},sn={class:"mb-3 p-3 rounded bg-white/50 dark:bg-gray-800/50"},nn={class:"text-sm text-gray-900 dark:text-gray-50"},on={key:0,class:"mb-2 p-3 rounded bg-white/50 dark:bg-gray-800/50"},rn={class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-2 flex items-center gap-1"},ln={class:"space-y-1"},un={class:"text-xs text-gray-500 dark:text-gray-500 text-right mt-2"},dn=O({__name:"CorrectionMessage",props:{content:{},correctionData:{},timestamp:{}},setup(t){const s=t,e={offensive:"Offensive Language",meaningless:"Unclear Meaning",unnatural:"Unnatural Phrasing",archaic:"Archaic Expression",dangerous:"Potentially Harmful"},a={offensive:"text-red-700 dark:text-red-300",meaningless:"text-orange-700 dark:text-orange-300",unnatural:"text-yellow-700 dark:text-yellow-300",archaic:"text-blue-700 dark:text-blue-300",dangerous:"text-red-800 dark:text-red-200"},o={critical:"bg-red-200 text-red-900 dark:bg-red-900/40 dark:text-red-200",high:"bg-orange-200 text-orange-900 dark:bg-orange-900/40 dark:text-orange-200",medium:"bg-yellow-200 text-yellow-900 dark:bg-yellow-900/40 dark:text-yellow-200"},r={critical:"border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-950/30",high:"border-orange-300 dark:border-orange-700 bg-orange-50 dark:bg-orange-950/30",medium:"border-yellow-300 dark:border-yellow-700 bg-yellow-50 dark:bg-yellow-950/30"},d=B(()=>{switch(s.correctionData.severity){case"critical":return Ze;case"high":return Na;default:return Ae}});return(u,c)=>(g(),D("div",{class:A(["px-4 py-3 rounded-lg border-2 my-3",r[t.correctionData.severity]])},[n("div",Ks,[n("div",Ws,[(g(),P(ht(d.value),{class:A(["w-5 h-5",a[t.correctionData.error_type]])},null,8,["class"])),n("span",{class:A(["font-semibold text-sm",a[t.correctionData.error_type]])},L(e[t.correctionData.error_type]),3)]),n("span",{class:A(["text-xs font-medium px-2 py-1 rounded-full uppercase tracking-wide",o[t.correctionData.severity]])},L(t.correctionData.severity),3)]),n("div",Hs,[n("div",Xs,[c[0]||(c[0]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-200 uppercase tracking-wide"}," Original ",-1)),n("div",Js,[n("span",Ys,L(t.correctionData.original_text),1)])]),n("div",Gs,[n("div",Zs,[w(l(Ba),{class:"w-3 h-3"}),c[1]||(c[1]=I(" Suggested ",-1))]),n("div",Qs,[n("span",en,L(t.correctionData.corrected_text),1)])])]),n("div",tn,[c[2]||(c[2]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-1"}," Explanation ",-1)),n("p",an,L(t.correctionData.explanation),1)]),n("div",sn,[c[3]||(c[3]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-1"}," Context ",-1)),n("p",nn,L(t.correctionData.context),1)]),t.correctionData.recommendations&&t.correctionData.recommendations.length>0?(g(),D("div",on,[n("div",rn,[w(l(Ae),{class:"w-3 h-3"}),c[4]||(c[4]=I(" Recommendations ",-1))]),n("ul",ln,[(g(!0),D(K,null,se(t.correctionData.recommendations,(y,i)=>(g(),D("li",{key:i,class:"text-sm text-gray-900 dark:text-gray-50 flex items-start gap-2"},[c[5]||(c[5]=n("span",{class:"text-gray-400 dark:text-gray-500"},"â€¢",-1)),n("span",null,L(y),1)]))),128))])])):z("",!0),n("div",un,L(t.timestamp),1)],2))}}),cn=O({inheritAttrs:!1,__name:"SendIcon",setup(t){return(s,e)=>(g(),P(l(Ia),F({class:"h-5 w-5"},s.$attrs),null,16))}}),pn={},fn={"data-test":"ai-disclaimer",class:"mt-2 flex flex-col gap-1 text-xs text-gray-500 sm:flex-row sm:items-center sm:justify-between sm:gap-0"};function gn(t,s){return g(),D("div",fn,[...s[0]||(s[0]=[n("span",{class:"hidden sm:inline"},"Press Enter to send, Shift+Enter for new line",-1),n("span",{class:"sm:text-right"}," AI-generated responses may contain inaccuracies. Always verify important information. ",-1)])])}const vn=Ve(pn,[["render",gn]]),yn={class:"border-t border-gray-200 bg-white px-3 py-2 sm:px-4 sm:py-4"},mn={class:"mx-auto max-w-3xl"},hn={class:"relative flex items-end gap-2"},bn=["value","disabled","placeholder"],xn=["disabled"],_n=O({__name:"ChatInput",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue","send"],setup(t,{expose:s,emit:e}){const a=t,o=e,r=_(null),d=B(()=>window.innerWidth<640?"Type your message...":"Type your message here... (Shift+Enter for new line)"),u=m=>{const h=m.target;o("update:modelValue",h.value)},c=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),a.modelValue.trim()&&!a.disabled&&o("send"))},y=()=>{a.modelValue.trim()&&!a.disabled&&o("send")},i=()=>!a.modelValue.trim()||a.disabled;return H(()=>a.disabled,(m,h)=>{h&&!m&&setTimeout(()=>{r.value?.focus()},100)}),de(()=>{r.value?.focus()}),s({focus:()=>{r.value?.focus()}}),(m,h)=>(g(),D("div",yn,[n("div",mn,[n("div",hn,[n("textarea",{ref_key:"textareaRef",ref:r,value:t.modelValue,onInput:u,onKeydown:c,disabled:t.disabled,placeholder:d.value,rows:"1",class:"max-h-32 min-h-[44px] flex-1 resize-none rounded-xl border border-gray-300 px-3 py-2.5 pr-12 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 disabled:cursor-not-allowed disabled:opacity-50 sm:px-4 sm:py-3"},null,40,bn),n("button",{"data-test":"send-button",onClick:y,disabled:i(),class:"absolute bottom-2 right-2 flex h-8 w-8 items-center justify-center rounded-lg bg-blue-600 text-white transition-all hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50"},[w(cn)],8,xn)]),w(vn)])]))}}),wn={},kn={class:"flex gap-4"};function Cn(t,s){return g(),D("div",kn,[...s[0]||(s[0]=[bt('<div class="flex-shrink-0"><div data-test="typing-avatar" class="flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-purple-600 to-blue-500 text-white"><span class="text-sm font-semibold">AI</span></div></div><div data-test="typing-container" class="rounded-2xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-200"><div class="flex gap-1"><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400 [animation-delay:-0.3s]"></div><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400 [animation-delay:-0.15s]"></div><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400"></div></div></div>',2)])])}const Dn=Ve(wn,[["render",Cn]]),En={key:0,"data-test":"service-down-banner",class:"border-l-4 border-red-200 bg-red-50 p-4"},$n={class:"flex items-start gap-3"},Sn=O({__name:"ServiceDownBanner",props:{isServiceDown:{type:Boolean}},setup(t){return(s,e)=>t.isServiceDown?(g(),D("div",En,[n("div",$n,[w(l(Ze),{"data-test":"alert-icon",class:"h-5 w-5 flex-shrink-0 text-red-600"}),e[0]||(e[0]=n("div",{class:"flex-1"},[n("h3",{class:"text-sm font-semibold text-red-800"}," Language processing service is currently unavailable "),n("p",{class:"mt-1 text-sm text-red-700"}," Chat functionality is temporarily disabled. Please try again later. ")],-1))])])):z("",!0)}}),On=O({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(t,{emit:s}){const o=Re(t,s);return(r,d)=>(g(),P(l(Ht),F({"data-slot":"dialog"},l(o)),{default:$(()=>[T(r.$slots,"default")]),_:3},16))}}),Ln=O({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(t){const s=t,e=B(()=>{const{class:a,...o}=s;return o});return(a,o)=>(g(),P(l(Ca),F({"data-slot":"dialog-overlay"},e.value,{class:l(Q)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",s.class)}),{default:$(()=>[T(a.$slots,"default")]),_:3},16,["class"]))}}),Pn=O({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:s}){const e=t,a=s,o=B(()=>{const{class:d,...u}=e;return u}),r=Re(o,a);return(d,u)=>(g(),P(l(Sa),null,{default:$(()=>[w(Ln),w(l(ha),F({"data-slot":"dialog-content"},l(r),{class:l(Q)("bg-white text-gray-900 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border border-gray-200 p-6 shadow-lg duration-200 sm:max-w-lg",e.class)}),{default:$(()=>[T(d.$slots,"default"),w(l(Jt),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},{default:$(()=>[w(l(we)),u[0]||(u[0]=n("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),Tn=O({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const s=t,e=B(()=>{const{class:o,...r}=s;return r}),a=Ue(e);return(o,r)=>(g(),P(l(xa),F({"data-slot":"dialog-description"},l(a),{class:l(Q)("text-muted-foreground text-sm",s.class)}),{default:$(()=>[T(o.$slots,"default")]),_:3},16,["class"]))}}),Bn=O({__name:"DialogFooter",props:{class:{}},setup(t){const s=t;return(e,a)=>(g(),D("div",{"data-slot":"dialog-footer",class:A(l(Q)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s.class))},[T(e.$slots,"default")],2))}}),Mn=O({__name:"DialogHeader",props:{class:{}},setup(t){const s=t;return(e,a)=>(g(),D("div",{"data-slot":"dialog-header",class:A(l(Q)("flex flex-col gap-2 text-center sm:text-left",s.class))},[T(e.$slots,"default")],2))}}),An=O({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const s=t,e=B(()=>{const{class:o,...r}=s;return r}),a=Ue(e);return(o,r)=>(g(),P(l(La),F({"data-slot":"dialog-title"},l(a),{class:l(Q)("text-lg leading-none font-semibold",s.class)}),{default:$(()=>[T(o.$slots,"default")]),_:3},16,["class"]))}}),In={class:"grid gap-6 py-4"},Fn={class:"grid gap-2"},zn=["value"],Nn={key:0,class:"text-sm text-red-600"},qn={class:"space-y-4 rounded-lg border border-gray-200 p-4"},jn={class:"flex items-center justify-between"},Rn={class:"space-y-0.5"},Un={class:"flex items-center justify-between"},Vn={class:"space-y-0.5"},Kn=O({__name:"ChatSettingsModal",props:{open:{type:Boolean},chatSessionId:{},nativeLanguage:{},targetLanguage:{},proficiencyLevel:{},localizeCorrections:{type:Boolean,default:!0},localizeInsights:{type:Boolean,default:!0}},emits:["update:open","updated"],setup(t,{emit:s}){const e=t,a=s,o=_(e.nativeLanguage),r=_(e.targetLanguage),d=_(e.proficiencyLevel||"A1"),u=_(e.localizeCorrections),c=_(e.localizeInsights),y=_(!1),i=_({}),{languages:p}=Bt();H(()=>e.open,x=>{x&&(o.value=e.nativeLanguage,r.value=e.targetLanguage,d.value=e.proficiencyLevel||"A1",u.value=e.localizeCorrections,c.value=e.localizeInsights,i.value={})});const m=[{value:"A1",label:"A1 - Beginner",description:"Can understand and use familiar everyday expressions"},{value:"A2",label:"A2 - Elementary",description:"Can communicate in simple routine tasks"},{value:"B1",label:"B1 - Intermediate",description:"Can deal with most situations while traveling"},{value:"B2",label:"B2 - Upper Intermediate",description:"Can interact with native speakers fluently"},{value:"C1",label:"C1 - Advanced",description:"Can use language flexibly and effectively"},{value:"C2",label:"C2 - Mastery",description:"Can understand virtually everything with ease"}],h=()=>{a("update:open",!1)},f=()=>{i.value={},y.value=!0,Ne.patch(route("language-chat.update-parameters",{chatSession:e.chatSessionId}),{native_language:o.value,target_language:r.value,proficiency_level:d.value,localize_corrections:u.value,localize_insights:c.value},{preserveScroll:!0,onSuccess:()=>{a("updated"),h()},onError:x=>{i.value=x},onFinish:()=>{y.value=!1}})};return(x,v)=>(g(),P(l(On),{open:t.open,"onUpdate:open":v[5]||(v[5]=b=>a("update:open",b))},{default:$(()=>[w(l(Pn),{class:"sm:max-w-[500px]"},{default:$(()=>[w(l(Mn),null,{default:$(()=>[w(l(An),null,{default:$(()=>[...v[6]||(v[6]=[I("Chat Session Settings",-1)])]),_:1}),w(l(Tn),null,{default:$(()=>[...v[7]||(v[7]=[I(" Customize the language settings for this chat session. These settings only apply to this conversation. ",-1)])]),_:1})]),_:1}),n("div",In,[w(Le,{id:"native-language",label:"Native Language",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=b=>o.value=b),options:l(p),"exclude-value":r.value,placeholder:"Select your native language",error:i.value.native_language},null,8,["modelValue","options","exclude-value","error"]),w(Le,{id:"target-language",label:"Target Language",modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=b=>r.value=b),options:l(p),"exclude-value":o.value,placeholder:"Select language you're learning",error:i.value.target_language},null,8,["modelValue","options","exclude-value","error"]),n("div",Fn,[w(l(ve),{for:"proficiency-level"},{default:$(()=>[...v[8]||(v[8]=[I("Proficiency Level",-1)])]),_:1}),ue(n("select",{id:"proficiency-level","onUpdate:modelValue":v[2]||(v[2]=b=>d.value=b),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2"},[(g(),D(K,null,se(m,b=>n("option",{key:b.value,value:b.value},L(b.label)+" - "+L(b.description),9,zn)),64))],512),[[xt,d.value]]),i.value.proficiency_level?(g(),D("p",Nn,L(i.value.proficiency_level),1)):z("",!0)]),n("div",qn,[v[13]||(v[13]=n("h4",{class:"text-sm font-medium"},"Localization Preferences",-1)),n("div",jn,[n("div",Rn,[w(l(ve),{for:"localize-corrections",class:"font-normal"},{default:$(()=>[...v[9]||(v[9]=[I(" Localize Corrections ",-1)])]),_:1}),v[10]||(v[10]=n("p",{class:"text-xs text-gray-500"}," Receive error corrections in your native language ",-1))]),ue(n("input",{id:"localize-corrections",type:"checkbox","onUpdate:modelValue":v[3]||(v[3]=b=>u.value=b),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,512),[[Ee,u.value]])]),n("div",Un,[n("div",Vn,[w(l(ve),{for:"localize-insights",class:"font-normal"},{default:$(()=>[...v[11]||(v[11]=[I(" Localize Insights ",-1)])]),_:1}),v[12]||(v[12]=n("p",{class:"text-xs text-gray-500"}," Receive learning insights in your native language ",-1))]),ue(n("input",{id:"localize-insights",type:"checkbox","onUpdate:modelValue":v[4]||(v[4]=b=>c.value=b),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,512),[[Ee,c.value]])])])]),w(l(Bn),null,{default:$(()=>[w(l($e),{variant:"outline",onClick:h,disabled:y.value},{default:$(()=>[...v[14]||(v[14]=[I(" Cancel ",-1)])]),_:1},8,["disabled"]),w(l($e),{onClick:f,disabled:y.value},{default:$(()=>[I(L(y.value?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}}),Wn={"data-test":"main-container",class:"flex h-screen w-full overflow-hidden bg-gray-50"},Hn={"data-test":"chat-area",class:"flex min-w-0 flex-1 flex-col"},Xn={key:0,class:"flex h-full items-center justify-center"},Jn={class:"text-center"},Yn={class:"mb-8 text-gray-600"},Gn={class:"space-y-4"},Zn={class:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-3"},Qn={class:"rounded-lg border border-gray-200 bg-white p-4"},eo={class:"text-sm text-gray-600 text-center"},to={key:1,class:"mx-auto max-w-3xl space-y-6"},yo=O({__name:"LanguageChat",props:{chatHistory:{},userSettings:{},isServiceAvailable:{type:Boolean}},setup(t){const s=t,e=_(s.chatHistory),a=_(e.value[0]?.id||null),o=_([]),r=_(""),d=_(!1),u=_(!s.isServiceAvailable),c=_(null),y=_(null),i=_(null),p=_(null),m=_(null),h=_(!0),f=_(!0),x=_(s.userSettings.native_language),v=_(s.userSettings.target_language),b=_(s.userSettings.proficiency_level),C=_(s.userSettings.auto_update_proficiency),M=_(!1);H(()=>s.userSettings.proficiency_level,S=>{b.value=S}),H(()=>s.userSettings.auto_update_proficiency,S=>{C.value=S});const ne=S=>S?(ze().props.languages||[]).find(X=>X.value===S)?.label||S:"",Qe=B(()=>ne(i.value)||x.value),et=B(()=>ne(p.value)||v.value),tt=B(()=>{const S=m.value||b.value||"";return{A1:"Beginner",A2:"Elementary",B1:"Intermediate",B2:"Upper Intermediate",C1:"Advanced",C2:"Proficient"}[S]||S}),at=B(()=>{if(a.value){const S=e.value.find(E=>E.id===a.value);if(S)return S.title}return"Language Chat"}),Ce=B(()=>e.value.some(S=>S.title==="New Conversation")),st=B(()=>d.value||u.value),oe=async()=>{await J(),c.value&&(c.value.scrollTop=c.value.scrollHeight)},pe=async S=>{try{const k=await(await fetch(route("language-chat.messages",{chatSession:S}))).json();o.value=k.messages.map(X=>({...X,disableTypewriter:!0})),k.session&&(i.value=k.session.native_language,p.value=k.session.target_language,m.value=k.session.proficiency_level,h.value=k.session.localize_corrections??!0,f.value=k.session.localize_insights??!0),await oe()}catch(E){console.error("Error loading messages:",E)}},nt=async()=>{if(!r.value.trim())return;if(!a.value&&(await fe(),await new Promise(k=>setTimeout(k,100)),!a.value)){console.error("Failed to create chat session");return}const S=r.value,E={id:Date.now(),content:S,sender_type:"user",created_at:new Date().toISOString()};o.value.push(E),r.value="",d.value=!0,await oe(),await J(),y.value?.focus();try{const k=route("language-chat.message",{chatSession:a.value}),U=await(await fetch(k,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({message:S})})).json(),De=o.value.findIndex(ee=>ee.id===E.id);De!==-1&&(o.value[De]={...U.user_message,sender_type:"user"}),U.correction_message&&(o.value.push({...U.correction_message,sender_type:"system",message_type:"correction"}),await oe()),o.value.push({...U.ai_response,sender_type:"assistant"}),d.value=!1,await oe();const ge=e.value.findIndex(ee=>ee.id===a.value);ge!==-1&&(e.value[ge].last_message_at=new Date().toISOString(),U.new_title&&(e.value[ge].title=U.new_title)),o.value.filter(ee=>ee.sender_type==="user").length%10===0&&C.value&&setTimeout(()=>{Ne.reload({only:["userSettings"]})},2e4)}catch(k){console.error("Error sending message:",k),d.value=!1}},fe=async()=>{const S=e.value.find(E=>E.title==="New Conversation");if(S){re(S.id);return}if(!Ce.value)try{const k=await(await fetch(route("language-chat.create"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({native_language:x.value,target_language:v.value,proficiency_level:b.value})})).json();e.value.unshift({id:k.id,title:"New Conversation",last_message_at:k.created_at,native_language:k.native_language,target_language:k.target_language}),re(k.id)}catch(E){console.error("Error creating new chat:",E)}},re=async S=>{a.value=S,await pe(S)},ot=async S=>{try{(await fetch(route("language-chat.destroy",{chatSession:S}),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).ok&&(e.value=e.value.filter(k=>k.id!==S),a.value===S&&(e.value.length>0?re(e.value[0].id):(a.value=null,o.value=[])))}catch(E){console.error("Error deleting chat:",E)}},rt=async(S,E)=>{try{if((await fetch(route("language-chat.update-title",{chatSession:S}),{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({title:E})})).ok){const X=e.value.findIndex(U=>U.id===S);X!==-1&&(e.value[X].title=E)}}catch(k){console.error("Error updating chat title:",k)}},lt=()=>{M.value=!0},it=async()=>{a.value&&await pe(a.value)};return de(()=>{a.value&&pe(a.value)}),(S,E)=>(g(),D(K,null,[w(l(_t),{title:at.value},null,8,["title"]),w(wt,null,{default:$(()=>[n("div",Wn,[w(as,{chats:e.value,"active-chat":a.value,"has-unused-new-chat":Ce.value,onNewChat:fe,onSelectChat:re,onDeleteChat:ot,onUpdateTitle:rt},null,8,["chats","active-chat","has-unused-new-chat"]),n("div",Hn,[w(Ms,{"native-language":Qe.value,"target-language":et.value,"proficiency-level":m.value||b.value,"proficiency-label":tt.value,"auto-update-proficiency":C.value,onSettings:lt},null,8,["native-language","target-language","proficiency-level","proficiency-label","auto-update-proficiency"]),n("div",{ref_key:"chatContainer",ref:c,"data-test":"chat-container",class:"flex-1 overflow-y-auto px-4 py-6"},[!a.value&&e.value.length===0?(g(),D("div",Xn,[n("div",Jn,[E[7]||(E[7]=n("div",{class:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-blue-100"},[n("svg",{class:"h-10 w-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),E[8]||(E[8]=n("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Start Your Language Journey",-1)),n("p",Yn,"Practice "+L(v.value)+" with AI-powered conversations tailored to your level",1),n("div",Gn,[n("button",{onClick:fe,class:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-6 py-3 text-base font-medium text-white transition-colors hover:bg-blue-700"},[...E[2]||(E[2]=[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),I(" Start New Conversation ",-1)])]),n("div",Zn,[n("div",Qn,[E[3]||(E[3]=n("div",{class:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-green-100 mx-auto"},[n("svg",{class:"h-5 w-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),E[4]||(E[4]=n("h3",{class:"mb-1 font-medium text-gray-900 text-center"},"Adaptive Learning",-1)),n("p",eo,"AI adjusts to your "+L(b.value)+" level",1)]),E[5]||(E[5]=n("div",{class:"rounded-lg border border-gray-200 bg-white p-4"},[n("div",{class:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-purple-100 mx-auto"},[n("svg",{class:"h-5 w-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})])]),n("h3",{class:"mb-1 font-medium text-gray-900 text-center"},"Natural Conversation"),n("p",{class:"text-sm text-gray-600 text-center"},"Practice real-world dialogue")],-1)),E[6]||(E[6]=n("div",{class:"rounded-lg border border-gray-200 bg-white p-4"},[n("div",{class:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-orange-100 mx-auto"},[n("svg",{class:"h-5 w-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),n("h3",{class:"mb-1 font-medium text-gray-900 text-center"},"Instant Feedback"),n("p",{class:"text-sm text-gray-600 text-center"},"Get corrections and suggestions")],-1))])])])])):(g(),D("div",to,[(g(!0),D(K,null,se(o.value,k=>(g(),D(K,{key:k.id},[k.message_type==="correction"&&k.correction_data?(g(),P(dn,{key:0,content:k.content,"correction-data":k.correction_data,timestamp:new Date(k.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},null,8,["content","correction-data","timestamp"])):(g(),P(Vs,{key:1,content:k.content,translation:k.translation,role:k.sender_type,timestamp:new Date(k.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"is-analyzing":k.isAnalyzing,"disable-typewriter":k.disableTypewriter},null,8,["content","translation","role","timestamp","is-analyzing","disable-typewriter"]))],64))),128)),d.value?(g(),P(Dn,{key:0})):z("",!0)]))],512),w(Sn,{"is-service-down":u.value},null,8,["is-service-down"]),w(_n,{modelValue:r.value,"onUpdate:modelValue":E[0]||(E[0]=k=>r.value=k),disabled:st.value,onSend:nt,ref_key:"chatInputRef",ref:y},null,8,["modelValue","disabled"])])]),a.value?(g(),P(Kn,{key:0,open:M.value,"onUpdate:open":E[1]||(E[1]=k=>M.value=k),"chat-session-id":a.value,"native-language":i.value||x.value,"target-language":p.value||v.value,"proficiency-level":m.value||b.value,"localize-corrections":h.value,"localize-insights":f.value,onUpdated:it},null,8,["open","chat-session-id","native-language","target-language","proficiency-level","localize-corrections","localize-insights"])):z("",!0)]),_:1})],64))}});export{yo as default};
