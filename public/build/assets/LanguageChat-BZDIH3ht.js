import{p as I,q as x,B as Y,E as G,D as Ee,d as O,Q as gt,r as T,b as i,i as M,w as E,G as N,o as g,y as te,R as oe,S as Ne,U as vt,C as re,a as w,j as z,V as mt,L as yt,M as ht,c as D,F as X,e as n,l as fe,n as B,g as q,m as le,f as xt,k as pe,N as bt,t as L,J as qe,T as _t,W as Q,X as wt,I as kt,Y as Ct,Z as Dt,_ as Oe,K as Et,h as $t}from"./app-arPaOSl2.js";import{_ as St}from"./AppShell.vue_vue_type_script_setup_true_lang-BZMDIWzC.js";import{_ as Ot}from"./AppLogo.vue_vue_type_script_setup_true_lang-2L4LGg5w.js";import{P as se,b as j,_ as je,a as Le}from"./Spinner.vue_vue_type_script_setup_true_lang-C9TACp_5.js";import{g as J,u as Me,b as $e,P as Re,C as Lt,a as Ue,c as Ve}from"./check-CAmc525u.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as We}from"./createContext-BPrE3Ejm.js";import{c as Mt,d as Tt,i as ge,e as Te,f as Pt,u as It,b as At,a as U,o as Bt,g as Ft,h as zt}from"./useForwardExpose-BOnUA9ky.js";import{c as ae}from"./utils-CDN07tui.js";import{_ as xe}from"./Label.vue_vue_type_script_setup_true_lang-DS7ZMMAQ.js";import{_ as Pe}from"./LanguageSelect.vue_vue_type_script_setup_true_lang-Dpc5GU-Z.js";import{u as Nt}from"./useLanguageOptions-BFXbLvqc.js";function He(t,a,e){const s=e.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:e});a&&s.addEventListener(t,a,{once:!0}),s.dispatchEvent(o)}const[qt]=We("ConfigProvider");function be(t){if(t===null||typeof t!="object")return!1;const a=Object.getPrototypeOf(t);return a!==null&&a!==Object.prototype&&Object.getPrototypeOf(a)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Ce(t,a,e=".",s){if(!be(a))return Ce(t,{},e,s);const o=Object.assign({},a);for(const r in t){if(r==="__proto__"||r==="constructor")continue;const c=t[r];c!=null&&(s&&s(o,r,c,e)||(Array.isArray(c)&&Array.isArray(o[r])?o[r]=[...c,...o[r]]:be(c)&&be(o[r])?o[r]=Ce(c,o[r],(e?`${e}.`:"")+r.toString(),s):o[r]=c))}return o}function jt(t){return(...a)=>a.reduce((e,s)=>Ce(e,s,"",t),{})}const Rt=jt(),Ut=Mt(()=>{const t=x(new Map),a=x(),e=I(()=>{for(const c of t.value.values())if(c)return!0;return!1}),s=qt({scrollBody:x(!0)});let o=null;const r=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=a.value??"",Te&&o?.(),a.value=void 0};return Y(e,(c,f)=>{if(!ge)return;if(!c){f&&r();return}a.value===void 0&&(a.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,v={padding:l,margin:0},u=s.scrollBody?.value?typeof s.scrollBody.value=="object"?Rt({padding:s.scrollBody.value.padding===!0?l:s.scrollBody.value.padding,margin:s.scrollBody.value.margin===!0?l:s.scrollBody.value.margin},v):v:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),Te&&(o=Pt(document,"touchmove",p=>Kt(p),{passive:!1})),G(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function Vt(t){const a=Math.random().toString(36).substring(2,7),e=Ut();e.value.set(a,t);const s=I({get:()=>e.value.get(a)??!1,set:o=>e.value.set(a,o)});return Tt(()=>{e.value.delete(a)}),s}function Xe(t){const a=window.getComputedStyle(t);if(a.overflowX==="scroll"||a.overflowY==="scroll"||a.overflowX==="auto"&&t.clientWidth<t.scrollWidth||a.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const e=t.parentNode;return!(e instanceof Element)||e.tagName==="BODY"?!1:Xe(e)}}function Kt(t){const a=t||window.event,e=a.target;return e instanceof Element&&Xe(e)?!1:a.touches.length>1?!0:(a.preventDefault&&a.cancelable&&a.preventDefault(),!1)}var Wt=function(t){if(typeof document>"u")return null;var a=Array.isArray(t)?t[0]:t;return a.ownerDocument.body},ee=new WeakMap,de=new WeakMap,ce={},_e=0,Je=function(t){return t&&(t.host||Je(t.parentNode))},Ht=function(t,a){return a.map(function(e){if(t.contains(e))return e;var s=Je(e);return s&&t.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e})},Xt=function(t,a,e,s){var o=Ht(a,Array.isArray(t)?t:[t]);ce[e]||(ce[e]=new WeakMap);var r=ce[e],c=[],f=new Set,l=new Set(o),v=function(p){!p||f.has(p)||(f.add(p),v(p.parentNode))};o.forEach(v);var u=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(h){if(f.has(h))u(h);else try{var C=h.getAttribute(s),m=C!==null&&C!=="false",b=(ee.get(h)||0)+1,d=(r.get(h)||0)+1;ee.set(h,b),r.set(h,d),c.push(h),b===1&&m&&de.set(h,!0),d===1&&h.setAttribute(e,"true"),m||h.setAttribute(s,"true")}catch(k){console.error("aria-hidden: cannot operate on ",h,k)}})};return u(a),f.clear(),_e++,function(){c.forEach(function(p){var h=ee.get(p)-1,C=r.get(p)-1;ee.set(p,h),r.set(p,C),h||(de.has(p)||p.removeAttribute(s),de.delete(p)),C||p.removeAttribute(e)}),_e--,_e||(ee=new WeakMap,ee=new WeakMap,de=new WeakMap,ce={})}},Jt=function(t,a,e){e===void 0&&(e="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),o=Wt(t);return o?(s.push.apply(s,Array.from(o.querySelectorAll("[aria-live], script"))),Xt(s,o,e,"aria-hidden")):function(){return null}};function Yt(t){let a;Y(()=>It(t),e=>{e?a=Jt(e):a&&a()}),Ee(()=>{a&&a()})}const[W,Gt]=We("DialogRoot");var Zt=O({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:a}){const e=t,o=At(e,"open",a,{defaultValue:e.defaultOpen,passive:e.open===void 0}),r=x(),c=x(),{modal:f}=gt(e);return Gt({open:o,modal:f,openModal:()=>{o.value=!0},onOpenChange:l=>{o.value=l},onOpenToggle:()=>{o.value=!o.value},contentId:"",titleId:"",descriptionId:"",triggerElement:r,contentElement:c}),(l,v)=>T(l.$slots,"default",{open:i(o),close:()=>o.value=!1})}}),Qt=Zt,es=O({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const a=t;U();const e=W();return(s,o)=>(g(),M(i(se),N(a,{type:s.as==="button"?"button":void 0,onClick:o[0]||(o[0]=r=>i(e).onOpenChange(!1))}),{default:E(()=>[T(s.$slots,"default")]),_:3},16,["type"]))}}),ts=es;const ss="dismissableLayer.pointerDownOutside",as="dismissableLayer.focusOutside";function Ye(t,a){const e=a.closest("[data-dismissable-layer]"),s=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),o=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(e&&(s===e||o.indexOf(s)<o.indexOf(e)))}function ns(t,a,e=!0){const s=a?.value?.ownerDocument??globalThis?.document,o=x(!1),r=x(()=>{});return te(c=>{if(!ge||!oe(e))return;const f=async v=>{const u=v.target;if(!(!a?.value||!u)){if(Ye(a.value,u)){o.value=!1;return}if(v.target&&!o.value){let h=function(){He(ss,t,p)};const p={originalEvent:v};v.pointerType==="touch"?(s.removeEventListener("click",r.value),r.value=h,s.addEventListener("click",r.value,{once:!0})):h()}else s.removeEventListener("click",r.value);o.value=!1}},l=window.setTimeout(()=>{s.addEventListener("pointerdown",f)},0);c(()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",f),s.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>{oe(e)&&(o.value=!0)}}}function os(t,a,e=!0){const s=a?.value?.ownerDocument??globalThis?.document,o=x(!1);return te(r=>{if(!ge||!oe(e))return;const c=async f=>{if(!a?.value)return;await G(),await G();const l=f.target;!a.value||!l||Ye(a.value,l)||f.target&&!o.value&&He(as,t,{originalEvent:f})};s.addEventListener("focusin",c),r(()=>s.removeEventListener("focusin",c))}),{onFocusCapture:()=>{oe(e)&&(o.value=!0)},onBlurCapture:()=>{oe(e)&&(o.value=!1)}}}const K=Ne({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var rs=O({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:a}){const e=t,s=a,{forwardRef:o,currentElement:r}=U(),c=I(()=>r.value?.ownerDocument??globalThis.document),f=I(()=>K.layersRoot),l=I(()=>r.value?Array.from(f.value).indexOf(r.value):-1),v=I(()=>K.layersWithOutsidePointerEventsDisabled.size>0),u=I(()=>{const m=Array.from(f.value),[b]=[...K.layersWithOutsidePointerEventsDisabled].slice(-1),d=m.indexOf(b);return l.value>=d}),p=ns(async m=>{const b=[...K.branches].some(d=>d?.contains(m.target));!u.value||b||(s("pointerDownOutside",m),s("interactOutside",m),await G(),m.defaultPrevented||s("dismiss"))},r),h=os(m=>{[...K.branches].some(d=>d?.contains(m.target))||(s("focusOutside",m),s("interactOutside",m),m.defaultPrevented||s("dismiss"))},r);Bt("Escape",m=>{l.value===f.value.size-1&&(s("escapeKeyDown",m),m.defaultPrevented||s("dismiss"))});let C;return te(m=>{r.value&&(e.disableOutsidePointerEvents&&(K.layersWithOutsidePointerEventsDisabled.size===0&&(C=c.value.body.style.pointerEvents,c.value.body.style.pointerEvents="none"),K.layersWithOutsidePointerEventsDisabled.add(r.value)),f.value.add(r.value),m(()=>{e.disableOutsidePointerEvents&&K.layersWithOutsidePointerEventsDisabled.size===1&&(c.value.body.style.pointerEvents=C)}))}),te(m=>{m(()=>{r.value&&(f.value.delete(r.value),K.layersWithOutsidePointerEventsDisabled.delete(r.value))})}),(m,b)=>(g(),M(i(se),{ref:i(o),"as-child":m.asChild,as:m.as,"data-dismissable-layer":"",style:vt({pointerEvents:v.value?u.value?"auto":"none":void 0}),onFocusCapture:i(h).onFocusCapture,onBlurCapture:i(h).onBlurCapture,onPointerdownCapture:i(p).onPointerDownCapture},{default:E(()=>[T(m.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),ls=rs;const is=Ft(()=>x([]));function us(){const t=is();return{add(a){const e=t.value[0];a!==e&&e?.pause(),t.value=Ie(t.value,a),t.value.unshift(a)},remove(a){t.value=Ie(t.value,a),t.value[0]?.resume()}}}function Ie(t,a){const e=[...t],s=e.indexOf(a);return s!==-1&&e.splice(s,1),e}function ds(t){return t.filter(a=>a.tagName!=="A")}const we="focusScope.autoFocusOnMount",ke="focusScope.autoFocusOnUnmount",Ae={bubbles:!1,cancelable:!0};function cs(t,{select:a=!1}={}){const e=J();for(const s of t)if(H(s,{select:a}),J()!==e)return!0}function ps(t){const a=Ge(t),e=Be(a,t),s=Be(a.reverse(),t);return[e,s]}function Ge(t){const a=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)a.push(e.currentNode);return a}function Be(t,a){for(const e of t)if(!fs(e,{upTo:a}))return e}function fs(t,{upTo:a}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(a!==void 0&&t===a)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function gs(t){return t instanceof HTMLInputElement&&"select"in t}function H(t,{select:a=!1}={}){if(t&&t.focus){const e=J();t.focus({preventScroll:!0}),t!==e&&gs(t)&&a&&t.select()}}var vs=O({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:a}){const e=t,s=a,{currentRef:o,currentElement:r}=U(),c=x(null),f=us(),l=Ne({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});te(u=>{if(!ge)return;const p=r.value;if(!e.trapped)return;function h(d){if(l.paused||!p)return;const k=d.target;p.contains(k)?c.value=k:H(c.value,{select:!0})}function C(d){if(l.paused||!p)return;const k=d.relatedTarget;k!==null&&(p.contains(k)||H(c.value,{select:!0}))}function m(d){p.contains(c.value)||H(p)}document.addEventListener("focusin",h),document.addEventListener("focusout",C);const b=new MutationObserver(m);p&&b.observe(p,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",C),b.disconnect()})}),te(async u=>{const p=r.value;if(await G(),!p)return;f.add(l);const h=J();if(!p.contains(h)){const m=new CustomEvent(we,Ae);p.addEventListener(we,b=>s("mountAutoFocus",b)),p.dispatchEvent(m),m.defaultPrevented||(cs(ds(Ge(p)),{select:!0}),J()===h&&H(p))}u(()=>{p.removeEventListener(we,d=>s("mountAutoFocus",d));const m=new CustomEvent(ke,Ae),b=d=>{s("unmountAutoFocus",d)};p.addEventListener(ke,b),p.dispatchEvent(m),setTimeout(()=>{m.defaultPrevented||H(h??document.body,{select:!0}),p.removeEventListener(ke,b),f.remove(l)},0)})});function v(u){if(!e.loop&&!e.trapped||l.paused)return;const p=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,h=J();if(p&&h){const C=u.currentTarget,[m,b]=ps(C);m&&b?!u.shiftKey&&h===b?(u.preventDefault(),e.loop&&H(m,{select:!0})):u.shiftKey&&h===m&&(u.preventDefault(),e.loop&&H(b,{select:!0})):h===C&&u.preventDefault()}}return(u,p)=>(g(),M(i(se),{ref_key:"currentRef",ref:o,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:v},{default:E(()=>[T(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),ms=vs;function ys(t){return t?"open":"closed"}var hs=O({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=W(),{forwardRef:r,currentElement:c}=U();return o.titleId||=Me(void 0,"reka-dialog-title"),o.descriptionId||=Me(void 0,"reka-dialog-description"),re(()=>{o.contentElement=c,J()!==document.body&&(o.triggerElement.value=J())}),(f,l)=>(g(),M(i(ms),{"as-child":"",loop:"",trapped:e.trapFocus,onMountAutoFocus:l[5]||(l[5]=v=>s("openAutoFocus",v)),onUnmountAutoFocus:l[6]||(l[6]=v=>s("closeAutoFocus",v))},{default:E(()=>[w(i(ls),N({id:i(o).contentId,ref:i(r),as:f.as,"as-child":f.asChild,"disable-outside-pointer-events":f.disableOutsidePointerEvents,role:"dialog","aria-describedby":i(o).descriptionId,"aria-labelledby":i(o).titleId,"data-state":i(ys)(i(o).open.value)},f.$attrs,{onDismiss:l[0]||(l[0]=v=>i(o).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=v=>s("escapeKeyDown",v)),onFocusOutside:l[2]||(l[2]=v=>s("focusOutside",v)),onInteractOutside:l[3]||(l[3]=v=>s("interactOutside",v)),onPointerDownOutside:l[4]||(l[4]=v=>s("pointerDownOutside",v))}),{default:E(()=>[T(f.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Ze=hs,xs=O({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=W(),r=$e(s),{forwardRef:c,currentElement:f}=U();return Yt(f),(l,v)=>(g(),M(Ze,N({...e,...i(r)},{ref:i(c),"trap-focus":i(o).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:v[0]||(v[0]=u=>{u.defaultPrevented||(u.preventDefault(),i(o).triggerElement.value?.focus())}),onPointerDownOutside:v[1]||(v[1]=u=>{const p=u.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0;(p.button===2||h)&&u.preventDefault()}),onFocusOutside:v[2]||(v[2]=u=>{u.preventDefault()})}),{default:E(()=>[T(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),bs=xs,_s=O({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,o=$e(a);U();const r=W(),c=x(!1),f=x(!1);return(l,v)=>(g(),M(Ze,N({...e,...i(o)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:v[0]||(v[0]=u=>{u.defaultPrevented||(c.value||i(r).triggerElement.value?.focus(),u.preventDefault()),c.value=!1,f.value=!1}),onInteractOutside:v[1]||(v[1]=u=>{u.defaultPrevented||(c.value=!0,u.detail.originalEvent.type==="pointerdown"&&(f.value=!0));const p=u.target;i(r).triggerElement.value?.contains(p)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&f.value&&u.preventDefault()})}),{default:E(()=>[T(l.$slots,"default")]),_:3},16))}}),ws=_s,ks=O({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=W(),r=$e(s),{forwardRef:c}=U();return(f,l)=>(g(),M(i(Re),{present:f.forceMount||i(o).open.value},{default:E(()=>[i(o).modal.value?(g(),M(bs,N({key:0,ref:i(c)},{...e,...i(r),...f.$attrs}),{default:E(()=>[T(f.$slots,"default")]),_:3},16)):(g(),M(ws,N({key:1,ref:i(c)},{...e,...i(r),...f.$attrs}),{default:E(()=>[T(f.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Cs=ks,Ds=O({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(t){const a=t;U();const e=W();return(s,o)=>(g(),M(i(se),N(a,{id:i(e).descriptionId}),{default:E(()=>[T(s.$slots,"default")]),_:3},16,["id"]))}}),Es=Ds,$s=O({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const a=W();return Vt(!0),U(),(e,s)=>(g(),M(i(se),{as:e.as,"as-child":e.asChild,"data-state":i(a).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:E(()=>[T(e.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Ss=$s,Os=O({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const a=W(),{forwardRef:e}=U();return(s,o)=>i(a)?.modal.value?(g(),M(i(Re),{key:0,present:s.forceMount||i(a).open.value},{default:E(()=>[w(Ss,N(s.$attrs,{ref:i(e),as:s.as,"as-child":s.asChild}),{default:E(()=>[T(s.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):z("v-if",!0)}}),Ls=Os,Ms=O({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const a=zt();return(e,s)=>i(a)||e.forceMount?(g(),M(mt,{key:0,to:e.to,disabled:e.disabled,defer:e.defer},[T(e.$slots,"default")],8,["to","disabled","defer"])):z("v-if",!0)}}),Ts=Ms,Ps=O({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const a=t;return(e,s)=>(g(),M(i(Ts),yt(ht(a)),{default:E(()=>[T(e.$slots,"default")]),_:3},16))}}),Is=Ps,As=O({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const a=t,e=W();return U(),(s,o)=>(g(),M(i(se),N(a,{id:i(e).titleId}),{default:E(()=>[T(s.$slots,"default")]),_:3},16,["id"]))}}),Bs=As;const Fs=j("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const zs=j("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Qe=j("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Ns=j("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Fe=j("LanguagesIcon",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const ze=j("LightbulbIcon",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const qs=j("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const js=j("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Rs=j("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Us=j("SendIcon",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const Vs=j("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Ks=j("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Ws=j("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const De=j("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function et(t=1024){const a=x(!1),e=()=>{a.value=window.innerWidth<t};return re(()=>{e(),window.addEventListener("resize",e)}),Ee(()=>{window.removeEventListener("resize",e)}),{isMobile:a}}const Hs={class:"flex-shrink-0 border-b border-gray-200 px-4 py-3"},Xs={class:"flex items-center justify-between"},Js={class:"flex-shrink-0 border-b border-gray-200 px-4 py-3"},Ys=["disabled"],Gs={"data-test":"chat-list",class:"min-h-0 flex-1 overflow-y-auto p-2"},Zs={class:"space-y-1"},Qs=["onClick"],ea={class:"min-w-0 flex-1"},ta=["onKeydown"],sa=["onClick"],aa={key:1,class:"group/title"},na={class:"flex items-center gap-1"},oa=["title"],ra=["onClick"],la={class:"mt-0.5 truncate text-xs text-gray-500"},ia=["onClick"],ua={class:"flex-shrink-0 border-t border-gray-200 p-3 lg:hidden"},da=O({__name:"ChatSidebar",props:{chats:{},activeChat:{},hasUnusedNewChat:{type:Boolean},isOpen:{type:Boolean,default:!1}},emits:["new-chat","select-chat","delete-chat","update-title","close"],setup(t,{emit:a}){const e=t,s=a,o=x(null),r=x(""),c=x(null),{isMobile:f}=et(),l=()=>{e.hasUnusedNewChat||s("new-chat")},v=b=>{o.value!==b&&(s("select-chat",b),s("close"))},u=(b,d)=>{b.stopPropagation(),confirm("Are you sure you want to delete this conversation?")&&s("delete-chat",d)},p=async(b,d)=>{b.stopPropagation(),o.value=d.id,r.value=d.title,f.value||(await G(),c.value?.focus())},h=(b,d)=>{b.stopPropagation(),r.value.trim()&&s("update-title",d,r.value.trim()),o.value=null,r.value=""},C=b=>{b.stopPropagation(),o.value=null,r.value=""},m=(b,d)=>{b.key==="Enter"?(b.preventDefault(),h(b,d)):b.key==="Escape"&&C(b)};return(b,d)=>(g(),D(X,null,[t.isOpen?(g(),D("div",{key:0,class:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:d[0]||(d[0]=k=>s("close"))})):z("",!0),n("div",{class:B(["fixed lg:static inset-y-0 left-0 z-50 flex h-dvh lg:h-screen w-64 flex-col border-r border-gray-200 bg-white transform transition-transform duration-300 lg:translate-x-0",t.isOpen?"translate-x-0":"-translate-x-full"])},[n("div",Hs,[n("div",Xs,[w(i(fe),{href:b.route("language-chat.index")},{default:E(()=>[w(Ot,{size:"sm"})]),_:1},8,["href"]),n("button",{onClick:d[1]||(d[1]=k=>s("close")),class:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close sidebar"},[w(i(De),{class:"h-5 w-5 text-gray-600"})])])]),n("div",Js,[n("button",{"data-test":"new-chat-button",onClick:l,disabled:t.hasUnusedNewChat,class:B(["flex w-full items-center justify-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors",t.hasUnusedNewChat?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},[w(i(Rs),{class:"h-4 w-4"}),d[4]||(d[4]=q(" New Chat ",-1))],10,Ys)]),n("div",Gs,[n("div",Zs,[(g(!0),D(X,null,le(t.chats,k=>(g(),D("div",{key:k.id,"data-test":"chat-item",onClick:F=>v(k.id),class:B(["group flex w-full items-start gap-3 rounded-lg px-3 py-2.5 text-left transition-colors cursor-pointer",t.activeChat===k.id?"bg-gray-100 hover:bg-gray-200":"hover:bg-gray-100"])},[(g(),D("svg",{class:B(["mt-0.5 h-4 w-4 flex-shrink-0",t.activeChat===k.id?"text-gray-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...d[5]||(d[5]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)])],2)),n("div",ea,[o.value===k.id?(g(),D("div",{key:0,class:"flex items-center gap-1",onClick:d[3]||(d[3]=xt(()=>{},["stop"]))},[pe(n("input",{ref_for:!0,ref_key:"editInputRef",ref:c,"onUpdate:modelValue":d[2]||(d[2]=F=>r.value=F),onKeydown:F=>m(F,k.id),type:"text",class:"flex-1 rounded border border-blue-500 px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"},null,40,ta),[[bt,r.value]]),n("button",{onClick:F=>h(F,k.id),class:"p-1 rounded hover:bg-green-100",title:"Save"},[w(i(Lt),{class:"h-4 w-4 text-green-600"})],8,sa),n("button",{onClick:C,class:"p-1 rounded hover:bg-red-100",title:"Cancel"},[w(i(De),{class:"h-4 w-4 text-red-600"})])])):(g(),D("div",aa,[n("div",na,[n("p",{class:B(["truncate text-sm font-medium",t.activeChat===k.id?"text-gray-900":"text-gray-700"]),title:k.title},L(k.title),11,oa),n("button",{onClick:F=>p(F,k),class:"flex-shrink-0 opacity-0 group-hover/title:opacity-100 p-0.5 rounded hover:bg-gray-200",title:"Edit title"},[w(i(js),{class:"h-3 w-3 text-gray-500"})],8,ra)]),n("p",la,L(k.timestamp),1)]))]),n("button",{onClick:F=>u(F,k.id),class:"opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded hover:bg-red-50",title:"Delete conversation"},[w(i(Ks),{class:"h-4 w-4 text-gray-400 hover:text-red-600"})],8,ia)],10,Qs))),128))])]),n("div",ua,[w(i(fe),{href:b.route("profile.edit"),class:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-100"},{default:E(()=>[...d[6]||(d[6]=[n("svg",{class:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),n("span",null,"Profile Settings",-1)])]),_:1},8,["href"])])],2)],64))}}),ca={class:"relative"},pa={key:0,class:"fixed inset-x-4 top-16 sm:absolute sm:inset-x-auto sm:top-auto sm:right-0 mt-2 w-auto sm:w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-[600px] flex flex-col"},fa={class:"px-4 py-3 border-b border-gray-200 flex items-center justify-between"},ga={class:"overflow-y-auto flex-1"},va={key:0,class:"p-8 text-center text-gray-500"},ma={key:1,class:"p-8 text-center"},ya={class:"text-sm text-gray-600 mb-4"},ha={key:2,class:"p-8 text-center text-gray-500"},xa={key:3,class:"divide-y divide-gray-200"},ba={class:"flex items-start gap-3"},_a={class:"text-2xl flex-shrink-0"},wa={class:"flex-1 min-w-0"},ka={class:"flex items-start justify-between gap-2"},Ca={class:"font-semibold text-gray-900 text-sm"},Da={class:"flex items-center gap-1 flex-shrink-0"},Ea=["onClick"],$a=["onClick"],Sa={class:"text-sm text-gray-600 mt-1"},Oa={class:"text-xs text-gray-400 mt-2"},La=O({__name:"InsightPanel",setup(t){const a=qe(),e=x([]),s=x(0),o=x(!1),r=x(!1),c=x(!1),f=x("");let l=null;const v=I(()=>!!a.props.auth?.user),u=x(!1);let p=null;const h=x(!1);Y(s,(P,_)=>{h.value&&P>_&&(u.value=!0,p&&clearTimeout(p),p=setTimeout(()=>{u.value=!1},4e3))});const C=async(P=!1)=>{if(v.value){P||(o.value=!0);try{const{data:_}=await Q.get("/insights");c.value=!1,f.value="",JSON.stringify(e.value)!==JSON.stringify(_.insights)&&(e.value=_.insights),s.value!==_.unread_count&&(s.value=_.unread_count)}catch(_){Q.isAxiosError(_)&&_.response?.status===401?l!==null&&(clearInterval(l),l=null):Q.isAxiosError(_)&&_.response?.status===503?(c.value=!0,f.value=_.response?.data?.message||"Insights service is temporarily unavailable"):Q.isAxiosError(_)&&!_.response?(c.value=!0,f.value="Unable to connect to insights service. Please check if the backend is running."):console.error("Error fetching insights:",_)}finally{P||(o.value=!1)}}},m=async P=>{try{await Q.patch(`/insights/${P}/read`);const _=e.value.find(A=>A.id===P);_&&(_.is_read=!0,s.value=Math.max(0,s.value-1))}catch(_){console.error("Error marking insight as read:",_)}},b=async()=>{try{await Q.post("/insights/mark-all-read"),e.value.forEach(P=>{P.is_read=!0}),s.value=0}catch(P){console.error("Error marking all as read:",P)}},d=async P=>{try{await Q.delete(`/insights/${P}`);const _=e.value.findIndex(A=>A.id===P);if(_!==-1){const A=!e.value[_].is_read;e.value.splice(_,1),A&&(s.value=Math.max(0,s.value-1))}}catch(_){console.error("Error deleting insight:",_)}},k=P=>{switch(P){case"grammar_pattern":return"ðŸ“";case"vocabulary_strength":return"ðŸ“š";case"proficiency_suggestion":return"ðŸŽ¯";case"system_error":return"âš ï¸";default:return"ðŸ’¡"}},F=()=>{r.value=!r.value,r.value&&C()};return re(()=>{v.value&&(C().finally(()=>{h.value=!0}),l=setInterval(()=>C(!0),3e4))}),Ee(()=>{l!==null&&(clearInterval(l),l=null),p&&clearTimeout(p)}),(P,_)=>(g(),D("div",ca,[n("button",{onClick:F,class:B(["relative p-2 text-gray-600 hover:text-gray-900 transition-colors",{"text-blue-600":r.value}])},[_[1]||(_[1]=n("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),s.value>0?(g(),D("span",{key:0,class:B(["absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/5 -translate-y-1/5 bg-red-600 rounded-full transition-all origin-center",{"animate-pulse-subtle":u.value}])},L(s.value),3)):z("",!0)],2),w(_t,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:E(()=>[r.value?(g(),D("div",pa,[n("div",fa,[_[2]||(_[2]=n("h3",{class:"text-lg font-semibold text-gray-900"},"LangGPT Insights",-1)),e.value.length>0&&s.value>0?(g(),D("button",{key:0,onClick:b,class:"text-sm text-blue-600 hover:text-blue-800"}," Mark all read ")):z("",!0)]),n("div",ga,[o.value?(g(),D("div",va,[w(je,{class:"h-8 w-8 mx-auto mb-2"}),_[3]||(_[3]=q(" Loading insights... ",-1))])):c.value?(g(),D("div",ma,[_[4]||(_[4]=n("div",{class:"text-4xl mb-3"},"âš ï¸",-1)),_[5]||(_[5]=n("p",{class:"font-medium text-gray-900 mb-2"},"Insights Service Issue",-1)),n("p",ya,L(f.value),1),_[6]||(_[6]=n("p",{class:"text-xs text-gray-500"},"The system administrator has been notified. Your conversations are still being saved.",-1))])):e.value.length===0?(g(),D("div",ha,[..._[7]||(_[7]=[n("div",{class:"text-4xl mb-2"},"ðŸ’¡",-1),n("p",{class:"font-medium"},"No insights yet",-1),n("p",{class:"text-sm mt-1"},"Keep chatting to receive personalized feedback!",-1)])])):(g(),D("div",xa,[(g(!0),D(X,null,le(e.value,A=>(g(),D("div",{key:A.id,class:B(["p-4 hover:bg-gray-50 transition-colors",{"bg-blue-50/30":!A.is_read}])},[n("div",ba,[n("div",_a,L(k(A.insight_type)),1),n("div",wa,[n("div",ka,[n("h4",Ca,L(A.title),1),n("div",Da,[A.is_read?z("",!0):(g(),D("button",{key:0,onClick:ve=>m(A.id),class:"text-blue-600 hover:text-blue-800 p-1",title:"Mark as read"},[..._[8]||(_[8]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,Ea)),n("button",{onClick:ve=>d(A.id),class:"text-gray-400 hover:text-red-600 p-1",title:"Dismiss"},[..._[9]||(_[9]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,$a)])]),n("p",Sa,L(A.message),1),n("p",Oa,L(new Date(A.created_at).toLocaleDateString()),1)])])],2))),128))]))])])):z("",!0)]),_:1}),r.value?(g(),D("div",{key:0,onClick:_[0]||(_[0]=A=>r.value=!1),class:"fixed inset-0 z-40 bg-black/20 sm:bg-transparent"})):z("",!0)]))}}),Ma={class:"border-b border-gray-200 bg-white px-4 py-3 sm:px-6 sm:py-4"},Ta={class:"flex items-start justify-between gap-3"},Pa={class:"flex min-w-0 flex-1 items-center gap-3"},Ia={class:"flex items-center gap-2 sm:gap-3"},Aa={class:"mt-3 flex flex-wrap items-center gap-2 sm:mt-4 sm:gap-3"},Ba={"data-test":"native-language",class:"flex items-center gap-1.5 rounded-lg bg-blue-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},Fa={class:"flex items-center gap-1 text-sm sm:gap-1.5"},za={class:"text-gray-900"},Na={"data-test":"target-language",class:"flex items-center gap-1.5 rounded-lg bg-green-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},qa={class:"flex items-center gap-1 text-sm sm:gap-1.5"},ja={class:"text-gray-900"},Ra={"data-test":"proficiency-level",class:"flex items-center gap-1.5 rounded-lg bg-purple-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},Ua={class:"flex items-center gap-1 text-sm sm:gap-1.5"},Va={class:"text-gray-900"},Ka=O({__name:"ChatHeader",props:{nativeLanguage:{},targetLanguage:{},proficiencyLevel:{},proficiencyLabel:{},autoUpdateProficiency:{type:Boolean}},emits:["settings","toggleSidebar"],setup(t,{emit:a}){const e=t,s=a,o=()=>{s("settings")},r=()=>{s("toggleSidebar")},c=I(()=>e.proficiencyLevel?e.autoUpdateProficiency?`Dynamic (${e.proficiencyLabel?`${e.proficiencyLevel} - ${e.proficiencyLabel}`:e.proficiencyLevel})`:e.proficiencyLevel+(e.proficiencyLabel?` (${e.proficiencyLabel})`:""):e.autoUpdateProficiency?"Dynamic (Not Set)":"Not Set");return(f,l)=>(g(),D("div",Ma,[n("div",Ta,[n("div",Pa,[n("button",{onClick:r,class:"flex-shrink-0 rounded-lg p-2 text-gray-600 transition-colors hover:bg-gray-100 lg:hidden","aria-label":"Toggle sidebar"},[w(i(qs),{class:"h-5 w-5"})]),l[0]||(l[0]=n("div",{class:"min-w-0 flex-1"},[n("h1",{class:"text-lg font-semibold text-gray-900 sm:text-xl"},"Language Exchange Chat"),n("p",{class:"hidden text-sm text-gray-500 sm:block"}," Practice your language skills with AI assistance ")],-1))]),n("div",Ia,[w(La),w(i(fe),{href:f.route("profile.edit"),class:"hidden rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:block"},{default:E(()=>[...l[1]||(l[1]=[q(" Profile ",-1)])]),_:1},8,["href"]),w(i(fe),{href:f.route("logout"),method:"post",as:"button",class:"rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:px-4"},{default:E(()=>[...l[2]||(l[2]=[n("span",{class:"hidden sm:inline"},"Log out",-1),n("span",{class:"sm:hidden"},"Logout",-1)])]),_:1},8,["href"])])]),n("div",Aa,[n("div",Ba,[w(i(Fe),{class:"h-4 w-4 flex-shrink-0 text-blue-600"}),n("div",Fa,[l[3]||(l[3]=n("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Native:",-1)),n("span",za,L(t.nativeLanguage),1)])]),w(i(Fs),{class:"h-4 w-4 flex-shrink-0 text-gray-400"}),n("div",Na,[w(i(Fe),{class:"h-4 w-4 flex-shrink-0 text-green-600"}),n("div",qa,[l[4]||(l[4]=n("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Target:",-1)),n("span",ja,L(t.targetLanguage),1)])]),l[7]||(l[7]=n("div",{class:"hidden h-4 w-px bg-gray-300 sm:block"},null,-1)),n("div",Ra,[w(i(zs),{class:"h-4 w-4 flex-shrink-0 text-purple-600"}),n("div",Ua,[l[5]||(l[5]=n("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Level:",-1)),n("span",Va,L(c.value),1)])]),n("button",{"data-test":"chat-settings-button",onClick:o,class:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-2.5 py-1.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:ml-2 sm:px-3",title:"Chat Settings"},[w(i(Vs),{class:"h-4 w-4 flex-shrink-0"}),l[6]||(l[6]=n("span",{class:"hidden sm:inline"},"Chat Settings",-1))])])]))}}),Wa={class:"relative inline-block"},Ha={class:"invisible","aria-hidden":"true","data-test":"typewriter-size"},Xa=["dir"],Ja=O({__name:"TypewriterText",props:{text:{},speed:{default:30},disabled:{type:Boolean,default:!1}},emits:["complete"],setup(t,{emit:a}){const e=t,s=a,o=x(""),r=x("auto");let c=null;function f(u){const p=/[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]/,h=/[A-Za-z\u00C0-\u024F\u0400-\u04FF\u0370-\u03FF]/,C=p.test(u),m=h.test(u);return C&&m?"auto":C?"rtl":m?"ltr":"auto"}function l(){if(e.disabled){o.value=e.text,s("complete");return}if(o.value="",r.value=f(e.text),!e.text){s("complete");return}let u=0;function p(){u<e.text.length&&(o.value+=e.text[u],u++,u<e.text.length?c=setTimeout(p,e.speed):s("complete"))}c=setTimeout(p,0)}function v(){c&&(clearTimeout(c),c=null)}return Y(()=>e.text,()=>{v(),l()},{immediate:!0}),wt(()=>{v()}),(u,p)=>(g(),D("span",Wa,[n("span",Ha,L(t.text),1),n("span",{class:"absolute inset-0","data-test":"typewriter-text",dir:r.value},L(o.value),9,Xa)]))}}),Ya={class:"flex-shrink-0"},Ga={class:"text-sm font-semibold"},Za={class:"whitespace-pre-wrap break-words text-sm leading-relaxed"},Qa={key:1},en={key:0,"data-test":"analyzing-indicator",class:"flex items-center gap-1"},tn=O({__name:"ChatMessage",props:{content:{},role:{},timestamp:{},translation:{default:null},isAnalyzing:{type:Boolean},disableTypewriter:{type:Boolean,default:!1}},setup(t){return(a,e)=>(g(),D("div",{"data-test":"message-container",class:B(["flex gap-4",t.role==="user"?"flex-row-reverse":"flex-row"])},[n("div",Ya,[n("div",{"data-test":"message-avatar",class:B(["flex h-10 w-10 items-center justify-center rounded-full text-white",t.role==="user"?"bg-blue-600":"bg-gradient-to-br from-purple-600 to-blue-500"])},[n("span",Ga,L(t.role==="user"?"You":"AI"),1)],2)]),n("div",{"data-test":"message-content",class:B(["max-w-[70%] rounded-2xl px-4 py-3",t.role==="user"?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm ring-1 ring-gray-200"])},[n("p",Za,[t.role==="assistant"&&!t.disableTypewriter?(g(),M(Ja,{key:0,text:t.translation||t.content,speed:30},null,8,["text"])):(g(),D("span",Qa,L(t.translation||t.content),1))]),n("div",{class:B(["mt-2 flex items-center gap-2 text-xs",t.role==="user"?"text-blue-100":"text-gray-500"])},[n("span",null,L(t.timestamp),1),t.isAnalyzing?(g(),D("span",en,[w(je,{class:"h-3 w-3"}),e[0]||(e[0]=q(" Analyzing... ",-1))])):z("",!0)],2)],2)],2))}}),sn={class:"flex items-center justify-between mb-3"},an={class:"flex items-center gap-2"},nn={class:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3"},on={class:"space-y-1"},rn={class:"p-2 rounded bg-gray-100 dark:bg-gray-900 border-2 border-gray-300 dark:border-gray-600"},ln={class:"text-sm line-through text-gray-800 dark:text-gray-100"},un={class:"space-y-1"},dn={class:"text-xs font-semibold text-green-700 dark:text-green-300 uppercase tracking-wide flex items-center gap-1"},cn={class:"p-2 rounded bg-green-50 dark:bg-green-950/30 border-2 border-green-300 dark:border-green-700"},pn={class:"text-sm font-medium text-green-800 dark:text-green-200"},fn={class:"mb-3 p-3 rounded bg-white/50 dark:bg-gray-800/50"},gn={class:"text-sm text-gray-900 dark:text-gray-50"},vn={class:"mb-3 p-3 rounded bg-white/50 dark:bg-gray-800/50"},mn={class:"text-sm text-gray-900 dark:text-gray-50"},yn={key:0,class:"mb-2 p-3 rounded bg-white/50 dark:bg-gray-800/50"},hn={class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-2 flex items-center gap-1"},xn={class:"space-y-1"},bn={class:"text-xs text-gray-500 dark:text-gray-500 text-right mt-2"},_n=O({__name:"CorrectionMessage",props:{content:{},correctionData:{},timestamp:{}},setup(t){const a=t,e={offensive:"Offensive Language",meaningless:"Unclear Meaning",unnatural:"Unnatural Phrasing",archaic:"Archaic Expression",dangerous:"Potentially Harmful"},s={offensive:"text-red-700 dark:text-red-300",meaningless:"text-orange-700 dark:text-orange-300",unnatural:"text-yellow-700 dark:text-yellow-300",archaic:"text-blue-700 dark:text-blue-300",dangerous:"text-red-800 dark:text-red-200"},o={critical:"bg-red-200 text-red-900 dark:bg-red-900/40 dark:text-red-200",high:"bg-orange-200 text-orange-900 dark:bg-orange-900/40 dark:text-orange-200",medium:"bg-yellow-200 text-yellow-900 dark:bg-yellow-900/40 dark:text-yellow-200"},r={critical:"border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-950/30",high:"border-orange-300 dark:border-orange-700 bg-orange-50 dark:bg-orange-950/30",medium:"border-yellow-300 dark:border-yellow-700 bg-yellow-50 dark:bg-yellow-950/30"},c=I(()=>{switch(a.correctionData.severity){case"critical":return Qe;case"high":return Ws;default:return ze}});return(f,l)=>(g(),D("div",{class:B(["px-4 py-3 rounded-lg border-2 my-3",r[t.correctionData.severity]])},[n("div",sn,[n("div",an,[(g(),M(kt(c.value),{class:B(["w-5 h-5",s[t.correctionData.error_type]])},null,8,["class"])),n("span",{class:B(["font-semibold text-sm",s[t.correctionData.error_type]])},L(e[t.correctionData.error_type]),3)]),n("span",{class:B(["text-xs font-medium px-2 py-1 rounded-full uppercase tracking-wide",o[t.correctionData.severity]])},L(t.correctionData.severity),3)]),n("div",nn,[n("div",on,[l[0]||(l[0]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-200 uppercase tracking-wide"}," Original ",-1)),n("div",rn,[n("span",ln,L(t.correctionData.original_text),1)])]),n("div",un,[n("div",dn,[w(i(Ns),{class:"w-3 h-3"}),l[1]||(l[1]=q(" Suggested ",-1))]),n("div",cn,[n("span",pn,L(t.correctionData.corrected_text),1)])])]),n("div",fn,[l[2]||(l[2]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-1"}," Explanation ",-1)),n("p",gn,L(t.correctionData.explanation),1)]),n("div",vn,[l[3]||(l[3]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-1"}," Context ",-1)),n("p",mn,L(t.correctionData.context),1)]),t.correctionData.recommendations&&t.correctionData.recommendations.length>0?(g(),D("div",yn,[n("div",hn,[w(i(ze),{class:"w-3 h-3"}),l[4]||(l[4]=q(" Recommendations ",-1))]),n("ul",xn,[(g(!0),D(X,null,le(t.correctionData.recommendations,(v,u)=>(g(),D("li",{key:u,class:"text-sm text-gray-900 dark:text-gray-50 flex items-start gap-2"},[l[5]||(l[5]=n("span",{class:"text-gray-400 dark:text-gray-500"},"â€¢",-1)),n("span",null,L(v),1)]))),128))])])):z("",!0),n("div",bn,L(t.timestamp),1)],2))}}),wn=O({inheritAttrs:!1,__name:"SendIcon",setup(t){return(a,e)=>(g(),M(i(Us),N({class:"h-5 w-5"},a.$attrs),null,16))}}),kn={},Cn={"data-test":"ai-disclaimer",class:"mt-2 flex flex-col gap-1 text-xs text-gray-500 sm:flex-row sm:items-center sm:justify-between sm:gap-0"};function Dn(t,a){return g(),D("div",Cn,[...a[0]||(a[0]=[n("span",{class:"hidden sm:inline"},"Press Enter to send, Shift+Enter for new line",-1),n("span",{class:"sm:text-right"}," AI-generated responses may contain inaccuracies. Always verify important information. ",-1)])])}const En=Ke(kn,[["render",Dn]]),$n={class:"border-t border-gray-200 bg-white px-3 py-2 sm:px-4 sm:py-4"},Sn={class:"mx-auto max-w-3xl"},On={class:"relative flex items-end gap-2"},Ln=["value","disabled","placeholder"],Mn=["disabled"],Tn=O({__name:"ChatInput",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue","send"],setup(t,{expose:a,emit:e}){const s=t,o=e,r=x(null),{isMobile:c}=et(),f=I(()=>window.innerWidth<640?"Type your message...":"Type your message here... (Shift+Enter for new line)"),l=C=>{const m=C.target;o("update:modelValue",m.value)},v=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),s.modelValue.trim()&&!s.disabled&&o("send"))},u=()=>{s.modelValue.trim()&&!s.disabled&&o("send")},p=()=>!s.modelValue.trim()||s.disabled;return Y(()=>s.disabled,(C,m)=>{m&&!C&&!c.value&&setTimeout(()=>{r.value?.focus()},100)}),re(()=>{c.value||r.value?.focus()}),a({focus:()=>{c.value||r.value?.focus()}}),(C,m)=>(g(),D("div",$n,[n("div",Sn,[n("div",On,[n("textarea",{ref_key:"textareaRef",ref:r,value:t.modelValue,onInput:l,onKeydown:v,disabled:t.disabled,placeholder:f.value,rows:"1",class:"max-h-32 min-h-[44px] flex-1 resize-none rounded-xl border border-gray-300 px-3 py-2.5 pr-12 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 disabled:cursor-not-allowed disabled:opacity-50 sm:px-4 sm:py-3"},null,40,Ln),n("button",{"data-test":"send-button",onClick:u,disabled:p(),class:"absolute bottom-2 right-2 flex h-8 w-8 items-center justify-center rounded-lg bg-blue-600 text-white transition-all hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50"},[w(wn)],8,Mn)]),w(En)])]))}}),Pn={},In={class:"flex gap-4"};function An(t,a){return g(),D("div",In,[...a[0]||(a[0]=[Ct('<div class="flex-shrink-0"><div data-test="typing-avatar" class="flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-purple-600 to-blue-500 text-white"><span class="text-sm font-semibold">AI</span></div></div><div data-test="typing-container" class="rounded-2xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-200"><div class="flex gap-1"><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400 [animation-delay:-0.3s]"></div><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400 [animation-delay:-0.15s]"></div><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400"></div></div></div>',2)])])}const Bn=Ke(Pn,[["render",An]]),Fn={key:0,"data-test":"service-down-banner",class:"border-l-4 border-red-200 bg-red-50 p-4"},zn={class:"flex items-start gap-3"},Nn=O({__name:"ServiceDownBanner",props:{isServiceDown:{type:Boolean}},setup(t){return(a,e)=>t.isServiceDown?(g(),D("div",Fn,[n("div",zn,[w(i(Qe),{"data-test":"alert-icon",class:"h-5 w-5 flex-shrink-0 text-red-600"}),e[0]||(e[0]=n("div",{class:"flex-1"},[n("h3",{class:"text-sm font-semibold text-red-800"}," Language processing service is currently unavailable "),n("p",{class:"mt-1 text-sm text-red-700"}," Chat functionality is temporarily disabled. Please try again later. ")],-1))])])):z("",!0)}}),qn=O({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(t,{emit:a}){const o=Ue(t,a);return(r,c)=>(g(),M(i(Qt),N({"data-slot":"dialog"},i(o)),{default:E(()=>[T(r.$slots,"default")]),_:3},16))}}),jn=O({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,e=I(()=>{const{class:s,...o}=a;return o});return(s,o)=>(g(),M(i(Ls),N({"data-slot":"dialog-overlay"},e.value,{class:i(ae)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",a.class)}),{default:E(()=>[T(s.$slots,"default")]),_:3},16,["class"]))}}),Rn=O({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=I(()=>{const{class:c,...f}=e;return f}),r=Ue(o,s);return(c,f)=>(g(),M(i(Is),null,{default:E(()=>[w(jn),w(i(Cs),N({"data-slot":"dialog-content"},i(r),{class:i(ae)("bg-white text-gray-900 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border border-gray-200 p-6 shadow-lg duration-200 sm:max-w-lg",e.class)}),{default:E(()=>[T(c.$slots,"default"),w(i(ts),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},{default:E(()=>[w(i(De)),f[0]||(f[0]=n("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),Un=O({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,e=I(()=>{const{class:o,...r}=a;return r}),s=Ve(e);return(o,r)=>(g(),M(i(Es),N({"data-slot":"dialog-description"},i(s),{class:i(ae)("text-muted-foreground text-sm",a.class)}),{default:E(()=>[T(o.$slots,"default")]),_:3},16,["class"]))}}),Vn=O({__name:"DialogFooter",props:{class:{}},setup(t){const a=t;return(e,s)=>(g(),D("div",{"data-slot":"dialog-footer",class:B(i(ae)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a.class))},[T(e.$slots,"default")],2))}}),Kn=O({__name:"DialogHeader",props:{class:{}},setup(t){const a=t;return(e,s)=>(g(),D("div",{"data-slot":"dialog-header",class:B(i(ae)("flex flex-col gap-2 text-center sm:text-left",a.class))},[T(e.$slots,"default")],2))}}),Wn=O({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,e=I(()=>{const{class:o,...r}=a;return r}),s=Ve(e);return(o,r)=>(g(),M(i(Bs),N({"data-slot":"dialog-title"},i(s),{class:i(ae)("text-lg leading-none font-semibold",a.class)}),{default:E(()=>[T(o.$slots,"default")]),_:3},16,["class"]))}}),Hn={class:"grid gap-6 py-4"},Xn={class:"grid gap-2"},Jn=["value"],Yn={key:0,class:"text-sm text-red-600"},Gn={class:"space-y-4 rounded-lg border border-gray-200 p-4"},Zn={class:"flex items-center justify-between"},Qn={class:"space-y-0.5"},eo={class:"flex items-center justify-between"},to={class:"space-y-0.5"},so=O({__name:"ChatSettingsModal",props:{open:{type:Boolean},chatSessionId:{},nativeLanguage:{},targetLanguage:{},proficiencyLevel:{},localizeCorrections:{type:Boolean,default:!1},localizeInsights:{type:Boolean,default:!1}},emits:["update:open","updated"],setup(t,{emit:a}){const e=t,s=a,o=x(e.nativeLanguage),r=x(e.targetLanguage),c=x(e.proficiencyLevel||"auto"),f=x(e.localizeCorrections),l=x(e.localizeInsights),v=x(!1),u=x({}),{languages:p}=Nt();Y(()=>e.open,b=>{b&&(o.value=e.nativeLanguage,r.value=e.targetLanguage,c.value=e.proficiencyLevel||"auto",f.value=e.localizeCorrections,l.value=e.localizeInsights,u.value={})});const h=[{value:"auto",label:"Auto",description:"Automatically adjust based on your performance"},{value:"A1",label:"A1 - Beginner",description:"Can understand and use familiar everyday expressions"},{value:"A2",label:"A2 - Elementary",description:"Can communicate in simple routine tasks"},{value:"B1",label:"B1 - Intermediate",description:"Can deal with most situations while traveling"},{value:"B2",label:"B2 - Upper Intermediate",description:"Can interact with native speakers fluently"},{value:"C1",label:"C1 - Advanced",description:"Can use language flexibly and effectively"},{value:"C2",label:"C2 - Mastery",description:"Can understand virtually everything with ease"}],C=()=>{s("update:open",!1)},m=()=>{u.value={},v.value=!0,Et.patch(route("language-chat.update-parameters",{chatSession:e.chatSessionId}),{native_language:o.value,target_language:r.value,proficiency_level:c.value,localize_corrections:f.value,localize_insights:l.value},{preserveScroll:!0,onSuccess:()=>{s("updated"),C()},onError:b=>{u.value=b},onFinish:()=>{v.value=!1}})};return(b,d)=>(g(),M(i(qn),{open:t.open,"onUpdate:open":d[5]||(d[5]=k=>s("update:open",k))},{default:E(()=>[w(i(Rn),{class:"sm:max-w-[500px]"},{default:E(()=>[w(i(Kn),null,{default:E(()=>[w(i(Wn),null,{default:E(()=>[...d[6]||(d[6]=[q("Chat Session Settings",-1)])]),_:1}),w(i(Un),null,{default:E(()=>[...d[7]||(d[7]=[q(" Customize the language settings for this chat session. These settings only apply to this conversation. ",-1)])]),_:1})]),_:1}),n("div",Hn,[w(Pe,{id:"native-language",label:"Native Language",modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=k=>o.value=k),options:i(p),"exclude-value":r.value,placeholder:"Select your native language",error:u.value.native_language},null,8,["modelValue","options","exclude-value","error"]),w(Pe,{id:"target-language",label:"Target Language",modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=k=>r.value=k),options:i(p),"exclude-value":o.value,placeholder:"Select language you're learning",error:u.value.target_language},null,8,["modelValue","options","exclude-value","error"]),n("div",Xn,[w(i(xe),{for:"proficiency-level"},{default:E(()=>[...d[8]||(d[8]=[q("Proficiency Level",-1)])]),_:1}),pe(n("select",{id:"proficiency-level","onUpdate:modelValue":d[2]||(d[2]=k=>c.value=k),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2"},[(g(),D(X,null,le(h,k=>n("option",{key:k.value,value:k.value},L(k.label)+" - "+L(k.description),9,Jn)),64))],512),[[Dt,c.value]]),u.value.proficiency_level?(g(),D("p",Yn,L(u.value.proficiency_level),1)):z("",!0)]),n("div",Gn,[d[13]||(d[13]=n("h4",{class:"text-sm font-medium"},"Localization Preferences",-1)),n("div",Zn,[n("div",Qn,[w(i(xe),{for:"localize-corrections",class:"font-normal"},{default:E(()=>[...d[9]||(d[9]=[q(" Localize Corrections ",-1)])]),_:1}),d[10]||(d[10]=n("p",{class:"text-xs text-gray-500"}," Receive error corrections in your native language ",-1))]),pe(n("input",{id:"localize-corrections",type:"checkbox","onUpdate:modelValue":d[3]||(d[3]=k=>f.value=k),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,512),[[Oe,f.value]])]),n("div",eo,[n("div",to,[w(i(xe),{for:"localize-insights",class:"font-normal"},{default:E(()=>[...d[11]||(d[11]=[q(" Localize Insights ",-1)])]),_:1}),d[12]||(d[12]=n("p",{class:"text-xs text-gray-500"}," Receive learning insights in your native language ",-1))]),pe(n("input",{id:"localize-insights",type:"checkbox","onUpdate:modelValue":d[4]||(d[4]=k=>l.value=k),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,512),[[Oe,l.value]])])])]),w(i(Vn),null,{default:E(()=>[w(i(Le),{variant:"outline",onClick:C,disabled:v.value},{default:E(()=>[...d[14]||(d[14]=[q(" Cancel ",-1)])]),_:1},8,["disabled"]),w(i(Le),{onClick:m,disabled:v.value},{default:E(()=>[q(L(v.value?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}}),ao={"data-test":"main-container",class:"flex h-dvh w-full overflow-hidden bg-gray-50"},no={"data-test":"chat-area",class:"flex min-w-0 flex-1 flex-col"},oo={key:0,class:"flex h-full items-center justify-center"},ro={class:"w-full max-w-2xl text-center px-4"},lo={class:"mb-4 text-xs text-gray-600 sm:mb-8 sm:text-base"},io={key:1,class:"mx-auto max-w-3xl space-y-6"},ko=O({__name:"LanguageChat",props:{chatHistory:{},userSettings:{},isServiceAvailable:{type:Boolean}},setup(t){const a=t,e=x(a.chatHistory),s=x(e.value[0]?.id||null),o=x([]),r=x(""),c=x(!1),f=x(!a.isServiceAvailable),l=x(null),v=x(null),u=x(null),p=x(null),h=x(null),C=x(!1),m=x(!1),b=x(a.userSettings.native_language),d=x(a.userSettings.target_language),k=x(a.userSettings.proficiency_level),F=x(a.userSettings.auto_update_proficiency),P=x(!1),_=x(!1);Y(()=>a.userSettings.proficiency_level,$=>{k.value=$}),Y(()=>a.userSettings.auto_update_proficiency,$=>{F.value=$});const A=$=>$?(qe().props.languages||[]).find(V=>V.value===$)?.label||$:"",ve=I(()=>A(u.value)||b.value),tt=I(()=>A(p.value)||d.value),st=I(()=>{const $=h.value||k.value||"";return $?{A1:"Beginner",A2:"Elementary",B1:"Intermediate",B2:"Upper Intermediate",C1:"Advanced",C2:"Proficient"}[$]||$:"Auto"}),at=I(()=>{if(s.value){const $=e.value.find(S=>S.id===s.value);if($)return $.title}return"Language Chat"}),Se=I(()=>e.value.some($=>$.title==="New Conversation")),nt=I(()=>c.value||f.value),ie=async()=>{await G(),l.value&&(l.value.scrollTop=l.value.scrollHeight)},me=async $=>{try{const y=await(await fetch(route("language-chat.messages",{chatSession:$}))).json();o.value=y.messages.map(V=>({...V,disableTypewriter:!0})),y.session&&(u.value=y.session.native_language,p.value=y.session.target_language,h.value=y.session.proficiency_level,C.value=y.session.localize_corrections??!1,m.value=y.session.localize_insights??!1),await ie()}catch(S){console.error("Error loading messages:",S)}},ot=async $=>{try{const y=await(await fetch(route("language-chat.messages",{chatSession:$}))).json();return y.session&&(u.value=y.session.native_language,p.value=y.session.target_language,h.value=y.session.proficiency_level,C.value=y.session.localize_corrections??!1,m.value=y.session.localize_insights??!1),y.session?.proficiency_level}catch(S){return console.error("Error refreshing session data:",S),null}},rt=async($,S)=>{let y=0;const V=12,R=async()=>{y++;const ne=await ot($);ne&&ne!==S||y<V&&setTimeout(R,5e3)};setTimeout(R,5e3)},lt=async()=>{if(!r.value.trim())return;if(!s.value&&(await ye(),await new Promise(y=>setTimeout(y,100)),!s.value)){console.error("Failed to create chat session");return}const $=r.value,S={id:Date.now(),content:$,sender_type:"user",created_at:new Date().toISOString()};o.value.push(S),r.value="",c.value=!0,await ie(),await G(),v.value?.focus();try{const y=route("language-chat.message",{chatSession:s.value}),R=await(await fetch(y,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({message:$})})).json(),ne=o.value.findIndex(Z=>Z.id===S.id);ne!==-1&&(o.value[ne]={...R.user_message,sender_type:"user"}),R.correction_message&&(o.value.push({...R.correction_message,sender_type:"system",message_type:"correction"}),await ie()),o.value.push({...R.ai_response,sender_type:"assistant"}),c.value=!1,await ie();const he=e.value.findIndex(Z=>Z.id===s.value);if(he!==-1&&(e.value[he].last_message_at=new Date().toISOString(),R.new_title&&(e.value[he].title=R.new_title)),o.value.filter(Z=>Z.sender_type==="user").length%10===0&&F.value&&s.value){const Z=h.value;rt(s.value,Z)}}catch(y){console.error("Error sending message:",y),c.value=!1}},ye=async()=>{const $=e.value.find(S=>S.title==="New Conversation");if($){ue($.id);return}if(!Se.value)try{const y=await(await fetch(route("language-chat.create"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({native_language:b.value,target_language:d.value,proficiency_level:k.value})})).json();e.value.unshift({id:y.id,title:"New Conversation",last_message_at:y.created_at,timestamp:y.created_at,isActive:!0,native_language:y.native_language,target_language:y.target_language}),ue(y.id)}catch(S){console.error("Error creating new chat:",S)}},ue=async $=>{s.value=$,await me($)},it=async $=>{try{(await fetch(route("language-chat.destroy",{chatSession:$}),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).ok&&(e.value=e.value.filter(y=>y.id!==$),s.value===$&&(e.value.length>0?ue(e.value[0].id):(s.value=null,o.value=[])))}catch(S){console.error("Error deleting chat:",S)}},ut=async($,S)=>{try{if((await fetch(route("language-chat.update-title",{chatSession:$}),{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({title:S})})).ok){const V=e.value.findIndex(R=>R.id===$);V!==-1&&(e.value[V].title=S)}}catch(y){console.error("Error updating chat title:",y)}},dt=()=>{P.value=!0},ct=()=>{_.value=!_.value},pt=()=>{_.value=!1},ft=async()=>{s.value&&await me(s.value)};return re(()=>{s.value&&me(s.value)}),($,S)=>(g(),D(X,null,[w(i($t),{title:at.value},null,8,["title"]),w(St,null,{default:E(()=>[n("div",ao,[w(da,{chats:e.value,"active-chat":s.value,"has-unused-new-chat":Se.value,"is-open":_.value,onNewChat:ye,onSelectChat:ue,onDeleteChat:it,onUpdateTitle:ut,onClose:pt},null,8,["chats","active-chat","has-unused-new-chat","is-open"]),n("div",no,[w(Ka,{"native-language":ve.value,"target-language":tt.value,"proficiency-level":h.value||k.value,"proficiency-label":st.value,"auto-update-proficiency":F.value,onSettings:dt,onToggleSidebar:ct},null,8,["native-language","target-language","proficiency-level","proficiency-label","auto-update-proficiency"]),n("div",{ref_key:"chatContainer",ref:l,"data-test":"chat-container",class:"flex-1 overflow-y-auto px-4 py-4 sm:py-6"},[!s.value&&e.value.length===0?(g(),D("div",oo,[n("div",ro,[S[3]||(S[3]=n("div",{class:"mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 sm:mb-6 sm:h-20 sm:w-20"},[n("svg",{class:"h-6 w-6 text-blue-600 sm:h-10 sm:w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),S[4]||(S[4]=n("h2",{class:"mb-1.5 text-lg font-semibold text-gray-900 sm:mb-2 sm:text-2xl"},"Start Your Language Journey ",-1)),n("p",lo,"Practice "+L(d.value)+" with AI-powered conversations tailored to your level",1),n("button",{onClick:ye,class:"mb-3 inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-xs font-medium text-white transition-colors hover:bg-blue-700 sm:mb-6 sm:px-6 sm:py-3 sm:text-base"},[...S[2]||(S[2]=[n("svg",{class:"h-3.5 w-3.5 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),q(" Start New Conversation ",-1)])]),S[5]||(S[5]=n("div",{class:"grid grid-cols-1 gap-2 sm:grid-cols-3 sm:gap-4"},[n("div",{class:"rounded-lg border border-gray-200 bg-white p-2.5 sm:p-4"},[n("div",{class:"mb-1.5 flex h-7 w-7 items-center justify-center rounded-full bg-green-100 mx-auto sm:mb-2 sm:h-10 sm:w-10"},[n("svg",{class:"h-3.5 w-3.5 text-green-600 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),n("h3",{class:"mb-0.5 text-xs font-medium text-gray-900 text-center sm:mb-1 sm:text-base"},"Adaptive Learning"),n("p",{class:"text-[10px] text-gray-600 text-center leading-tight sm:text-sm"},"AI adjusts to your level")]),n("div",{class:"rounded-lg border border-gray-200 bg-white p-2.5 sm:p-4"},[n("div",{class:"mb-1.5 flex h-7 w-7 items-center justify-center rounded-full bg-purple-100 mx-auto sm:mb-2 sm:h-10 sm:w-10"},[n("svg",{class:"h-3.5 w-3.5 text-purple-600 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})])]),n("h3",{class:"mb-0.5 text-xs font-medium text-gray-900 text-center sm:mb-1 sm:text-base"},"Natural Conversation"),n("p",{class:"text-[10px] text-gray-600 text-center leading-tight sm:text-sm"},"Practice real-world dialogue ")]),n("div",{class:"rounded-lg border border-gray-200 bg-white p-2.5 sm:p-4"},[n("div",{class:"mb-1.5 flex h-7 w-7 items-center justify-center rounded-full bg-orange-100 mx-auto sm:mb-2 sm:h-10 sm:w-10"},[n("svg",{class:"h-3.5 w-3.5 text-orange-600 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),n("h3",{class:"mb-0.5 text-xs font-medium text-gray-900 text-center sm:mb-1 sm:text-base"},"Instant Feedback"),n("p",{class:"text-[10px] text-gray-600 text-center leading-tight sm:text-sm"},"Get corrections and suggestions")])],-1))])])):(g(),D("div",io,[(g(!0),D(X,null,le(o.value,y=>(g(),D(X,{key:y.id},[y.message_type==="correction"&&y.correction_data?(g(),M(_n,{key:0,content:y.content,"correction-data":y.correction_data,timestamp:new Date(y.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},null,8,["content","correction-data","timestamp"])):y.sender_type!=="system"?(g(),M(tn,{key:1,content:y.content,translation:y.translation,role:y.sender_type,timestamp:new Date(y.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"is-analyzing":y.isAnalyzing,"disable-typewriter":y.disableTypewriter},null,8,["content","translation","role","timestamp","is-analyzing","disable-typewriter"])):z("",!0)],64))),128)),c.value?(g(),M(Bn,{key:0})):z("",!0)]))],512),w(Nn,{"is-service-down":f.value},null,8,["is-service-down"]),w(Tn,{modelValue:r.value,"onUpdate:modelValue":S[0]||(S[0]=y=>r.value=y),disabled:nt.value,onSend:lt,ref_key:"chatInputRef",ref:v},null,8,["modelValue","disabled"])])]),s.value?(g(),M(so,{key:0,open:P.value,"onUpdate:open":S[1]||(S[1]=y=>P.value=y),"chat-session-id":s.value,"native-language":u.value||b.value,"target-language":p.value||d.value,"proficiency-level":h.value||k.value,"localize-corrections":C.value,"localize-insights":m.value,onUpdated:ft},null,8,["open","chat-session-id","native-language","target-language","proficiency-level","localize-corrections","localize-insights"])):z("",!0)]),_:1})],64))}});export{ko as default};
