import{p as M,q as w,B as X,E as Y,D as Fe,d as O,Q as ft,r as P,b as l,i as T,w as E,G as F,o as g,y as Q,R as ne,S as ze,U as gt,C as pe,a as _,j as I,V as vt,L as mt,M as yt,c as $,F as W,e as n,l as ce,n as A,g as z,m as oe,f as ht,k as de,N as xt,t as L,J as Ne,T as bt,W as ae,X as _t,I as wt,Y as kt,Z as Ct,_ as $e,K as Dt,h as Et}from"./app-cJkuVrXf.js";import{_ as $t}from"./AppShell.vue_vue_type_script_setup_true_lang-DvhhDlDW.js";import{_ as St}from"./AppLogo.vue_vue_type_script_setup_true_lang-DU132w-A.js";import{P as ee,b as N,_ as qe,a as Se}from"./Spinner.vue_vue_type_script_setup_true_lang-CdaDwUe5.js";import{g as H,u as Oe,b as Ce,P as je,C as Ot,a as Re,c as Ue}from"./check-DimjFL9X.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as Ke}from"./createContext-BGQlKNhx.js";import{c as Lt,d as Tt,i as fe,e as Le,f as Pt,u as Mt,b as Bt,a as j,o as At,g as It,h as Ft}from"./useForwardExpose-BVeNFKWM.js";import{c as te}from"./utils-CDN07tui.js";import{_ as ye}from"./Label.vue_vue_type_script_setup_true_lang-DFpFUj7h.js";import{_ as Te}from"./LanguageSelect.vue_vue_type_script_setup_true_lang-OUTMMJmF.js";import{u as zt}from"./useLanguageOptions-CUPag7wh.js";function We(t,a,e){const s=e.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:e});a&&s.addEventListener(t,a,{once:!0}),s.dispatchEvent(o)}const[Nt]=Ke("ConfigProvider");function he(t){if(t===null||typeof t!="object")return!1;const a=Object.getPrototypeOf(t);return a!==null&&a!==Object.prototype&&Object.getPrototypeOf(a)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function we(t,a,e=".",s){if(!he(a))return we(t,{},e,s);const o=Object.assign({},a);for(const r in t){if(r==="__proto__"||r==="constructor")continue;const d=t[r];d!=null&&(s&&s(o,r,d,e)||(Array.isArray(d)&&Array.isArray(o[r])?o[r]=[...d,...o[r]]:he(d)&&he(o[r])?o[r]=we(d,o[r],(e?`${e}.`:"")+r.toString(),s):o[r]=d))}return o}function qt(t){return(...a)=>a.reduce((e,s)=>we(e,s,"",t),{})}const jt=qt(),Rt=Lt(()=>{const t=w(new Map),a=w(),e=M(()=>{for(const d of t.value.values())if(d)return!0;return!1}),s=Nt({scrollBody:w(!0)});let o=null;const r=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=a.value??"",Le&&o?.(),a.value=void 0};return X(e,(d,f)=>{if(!fe)return;if(!d){f&&r();return}a.value===void 0&&(a.value=document.body.style.overflow);const i=window.innerWidth-document.documentElement.clientWidth,m={padding:i,margin:0},u=s.scrollBody?.value?typeof s.scrollBody.value=="object"?jt({padding:s.scrollBody.value.padding===!0?i:s.scrollBody.value.padding,margin:s.scrollBody.value.margin===!0?i:s.scrollBody.value.margin},m):m:{padding:0,margin:0};i>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${i}px`),document.body.style.overflow="hidden"),Le&&(o=Pt(document,"touchmove",c=>Vt(c),{passive:!1})),Y(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function Ut(t){const a=Math.random().toString(36).substring(2,7),e=Rt();e.value.set(a,t);const s=M({get:()=>e.value.get(a)??!1,set:o=>e.value.set(a,o)});return Tt(()=>{e.value.delete(a)}),s}function He(t){const a=window.getComputedStyle(t);if(a.overflowX==="scroll"||a.overflowY==="scroll"||a.overflowX==="auto"&&t.clientWidth<t.scrollWidth||a.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const e=t.parentNode;return!(e instanceof Element)||e.tagName==="BODY"?!1:He(e)}}function Vt(t){const a=t||window.event,e=a.target;return e instanceof Element&&He(e)?!1:a.touches.length>1?!0:(a.preventDefault&&a.cancelable&&a.preventDefault(),!1)}var Kt=function(t){if(typeof document>"u")return null;var a=Array.isArray(t)?t[0]:t;return a.ownerDocument.body},Z=new WeakMap,ie=new WeakMap,ue={},xe=0,Xe=function(t){return t&&(t.host||Xe(t.parentNode))},Wt=function(t,a){return a.map(function(e){if(t.contains(e))return e;var s=Xe(e);return s&&t.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e})},Ht=function(t,a,e,s){var o=Wt(a,Array.isArray(t)?t:[t]);ue[e]||(ue[e]=new WeakMap);var r=ue[e],d=[],f=new Set,i=new Set(o),m=function(c){!c||f.has(c)||(f.add(c),m(c.parentNode))};o.forEach(m);var u=function(c){!c||i.has(c)||Array.prototype.forEach.call(c.children,function(y){if(f.has(y))u(y);else try{var x=y.getAttribute(s),p=x!==null&&x!=="false",k=(Z.get(y)||0)+1,v=(r.get(y)||0)+1;Z.set(y,k),r.set(y,v),d.push(y),k===1&&p&&ie.set(y,!0),v===1&&y.setAttribute(e,"true"),p||y.setAttribute(s,"true")}catch(b){console.error("aria-hidden: cannot operate on ",y,b)}})};return u(a),f.clear(),xe++,function(){d.forEach(function(c){var y=Z.get(c)-1,x=r.get(c)-1;Z.set(c,y),r.set(c,x),y||(ie.has(c)||c.removeAttribute(s),ie.delete(c)),x||c.removeAttribute(e)}),xe--,xe||(Z=new WeakMap,Z=new WeakMap,ie=new WeakMap,ue={})}},Xt=function(t,a,e){e===void 0&&(e="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),o=Kt(t);return o?(s.push.apply(s,Array.from(o.querySelectorAll("[aria-live], script"))),Ht(s,o,e,"aria-hidden")):function(){return null}};function Jt(t){let a;X(()=>Mt(t),e=>{e?a=Xt(e):a&&a()}),Fe(()=>{a&&a()})}const[V,Yt]=Ke("DialogRoot");var Gt=O({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:a}){const e=t,o=Bt(e,"open",a,{defaultValue:e.defaultOpen,passive:e.open===void 0}),r=w(),d=w(),{modal:f}=ft(e);return Yt({open:o,modal:f,openModal:()=>{o.value=!0},onOpenChange:i=>{o.value=i},onOpenToggle:()=>{o.value=!o.value},contentId:"",titleId:"",descriptionId:"",triggerElement:r,contentElement:d}),(i,m)=>P(i.$slots,"default",{open:l(o),close:()=>o.value=!1})}}),Zt=Gt,Qt=O({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const a=t;j();const e=V();return(s,o)=>(g(),T(l(ee),F(a,{type:s.as==="button"?"button":void 0,onClick:o[0]||(o[0]=r=>l(e).onOpenChange(!1))}),{default:E(()=>[P(s.$slots,"default")]),_:3},16,["type"]))}}),es=Qt;const ts="dismissableLayer.pointerDownOutside",ss="dismissableLayer.focusOutside";function Je(t,a){const e=a.closest("[data-dismissable-layer]"),s=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),o=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(e&&(s===e||o.indexOf(s)<o.indexOf(e)))}function as(t,a,e=!0){const s=a?.value?.ownerDocument??globalThis?.document,o=w(!1),r=w(()=>{});return Q(d=>{if(!fe||!ne(e))return;const f=async m=>{const u=m.target;if(!(!a?.value||!u)){if(Je(a.value,u)){o.value=!1;return}if(m.target&&!o.value){let y=function(){We(ts,t,c)};const c={originalEvent:m};m.pointerType==="touch"?(s.removeEventListener("click",r.value),r.value=y,s.addEventListener("click",r.value,{once:!0})):y()}else s.removeEventListener("click",r.value);o.value=!1}},i=window.setTimeout(()=>{s.addEventListener("pointerdown",f)},0);d(()=>{window.clearTimeout(i),s.removeEventListener("pointerdown",f),s.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>{ne(e)&&(o.value=!0)}}}function ns(t,a,e=!0){const s=a?.value?.ownerDocument??globalThis?.document,o=w(!1);return Q(r=>{if(!fe||!ne(e))return;const d=async f=>{if(!a?.value)return;await Y(),await Y();const i=f.target;!a.value||!i||Je(a.value,i)||f.target&&!o.value&&We(ss,t,{originalEvent:f})};s.addEventListener("focusin",d),r(()=>s.removeEventListener("focusin",d))}),{onFocusCapture:()=>{ne(e)&&(o.value=!0)},onBlurCapture:()=>{ne(e)&&(o.value=!1)}}}const U=ze({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var os=O({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:a}){const e=t,s=a,{forwardRef:o,currentElement:r}=j(),d=M(()=>r.value?.ownerDocument??globalThis.document),f=M(()=>U.layersRoot),i=M(()=>r.value?Array.from(f.value).indexOf(r.value):-1),m=M(()=>U.layersWithOutsidePointerEventsDisabled.size>0),u=M(()=>{const p=Array.from(f.value),[k]=[...U.layersWithOutsidePointerEventsDisabled].slice(-1),v=p.indexOf(k);return i.value>=v}),c=as(async p=>{const k=[...U.branches].some(v=>v?.contains(p.target));!u.value||k||(s("pointerDownOutside",p),s("interactOutside",p),await Y(),p.defaultPrevented||s("dismiss"))},r),y=ns(p=>{[...U.branches].some(v=>v?.contains(p.target))||(s("focusOutside",p),s("interactOutside",p),p.defaultPrevented||s("dismiss"))},r);At("Escape",p=>{i.value===f.value.size-1&&(s("escapeKeyDown",p),p.defaultPrevented||s("dismiss"))});let x;return Q(p=>{r.value&&(e.disableOutsidePointerEvents&&(U.layersWithOutsidePointerEventsDisabled.size===0&&(x=d.value.body.style.pointerEvents,d.value.body.style.pointerEvents="none"),U.layersWithOutsidePointerEventsDisabled.add(r.value)),f.value.add(r.value),p(()=>{e.disableOutsidePointerEvents&&U.layersWithOutsidePointerEventsDisabled.size===1&&(d.value.body.style.pointerEvents=x)}))}),Q(p=>{p(()=>{r.value&&(f.value.delete(r.value),U.layersWithOutsidePointerEventsDisabled.delete(r.value))})}),(p,k)=>(g(),T(l(ee),{ref:l(o),"as-child":p.asChild,as:p.as,"data-dismissable-layer":"",style:gt({pointerEvents:m.value?u.value?"auto":"none":void 0}),onFocusCapture:l(y).onFocusCapture,onBlurCapture:l(y).onBlurCapture,onPointerdownCapture:l(c).onPointerDownCapture},{default:E(()=>[P(p.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),rs=os;const ls=It(()=>w([]));function is(){const t=ls();return{add(a){const e=t.value[0];a!==e&&e?.pause(),t.value=Pe(t.value,a),t.value.unshift(a)},remove(a){t.value=Pe(t.value,a),t.value[0]?.resume()}}}function Pe(t,a){const e=[...t],s=e.indexOf(a);return s!==-1&&e.splice(s,1),e}function us(t){return t.filter(a=>a.tagName!=="A")}const be="focusScope.autoFocusOnMount",_e="focusScope.autoFocusOnUnmount",Me={bubbles:!1,cancelable:!0};function ds(t,{select:a=!1}={}){const e=H();for(const s of t)if(K(s,{select:a}),H()!==e)return!0}function cs(t){const a=Ye(t),e=Be(a,t),s=Be(a.reverse(),t);return[e,s]}function Ye(t){const a=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)a.push(e.currentNode);return a}function Be(t,a){for(const e of t)if(!ps(e,{upTo:a}))return e}function ps(t,{upTo:a}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(a!==void 0&&t===a)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function fs(t){return t instanceof HTMLInputElement&&"select"in t}function K(t,{select:a=!1}={}){if(t&&t.focus){const e=H();t.focus({preventScroll:!0}),t!==e&&fs(t)&&a&&t.select()}}var gs=O({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:a}){const e=t,s=a,{currentRef:o,currentElement:r}=j(),d=w(null),f=is(),i=ze({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Q(u=>{if(!fe)return;const c=r.value;if(!e.trapped)return;function y(v){if(i.paused||!c)return;const b=v.target;c.contains(b)?d.value=b:K(d.value,{select:!0})}function x(v){if(i.paused||!c)return;const b=v.relatedTarget;b!==null&&(c.contains(b)||K(d.value,{select:!0}))}function p(v){c.contains(d.value)||K(c)}document.addEventListener("focusin",y),document.addEventListener("focusout",x);const k=new MutationObserver(p);c&&k.observe(c,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),k.disconnect()})}),Q(async u=>{const c=r.value;if(await Y(),!c)return;f.add(i);const y=H();if(!c.contains(y)){const p=new CustomEvent(be,Me);c.addEventListener(be,k=>s("mountAutoFocus",k)),c.dispatchEvent(p),p.defaultPrevented||(ds(us(Ye(c)),{select:!0}),H()===y&&K(c))}u(()=>{c.removeEventListener(be,v=>s("mountAutoFocus",v));const p=new CustomEvent(_e,Me),k=v=>{s("unmountAutoFocus",v)};c.addEventListener(_e,k),c.dispatchEvent(p),setTimeout(()=>{p.defaultPrevented||K(y??document.body,{select:!0}),c.removeEventListener(_e,k),f.remove(i)},0)})});function m(u){if(!e.loop&&!e.trapped||i.paused)return;const c=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,y=H();if(c&&y){const x=u.currentTarget,[p,k]=cs(x);p&&k?!u.shiftKey&&y===k?(u.preventDefault(),e.loop&&K(p,{select:!0})):u.shiftKey&&y===p&&(u.preventDefault(),e.loop&&K(k,{select:!0})):y===x&&u.preventDefault()}}return(u,c)=>(g(),T(l(ee),{ref_key:"currentRef",ref:o,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:m},{default:E(()=>[P(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),vs=gs;function ms(t){return t?"open":"closed"}var ys=O({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=V(),{forwardRef:r,currentElement:d}=j();return o.titleId||=Oe(void 0,"reka-dialog-title"),o.descriptionId||=Oe(void 0,"reka-dialog-description"),pe(()=>{o.contentElement=d,H()!==document.body&&(o.triggerElement.value=H())}),(f,i)=>(g(),T(l(vs),{"as-child":"",loop:"",trapped:e.trapFocus,onMountAutoFocus:i[5]||(i[5]=m=>s("openAutoFocus",m)),onUnmountAutoFocus:i[6]||(i[6]=m=>s("closeAutoFocus",m))},{default:E(()=>[_(l(rs),F({id:l(o).contentId,ref:l(r),as:f.as,"as-child":f.asChild,"disable-outside-pointer-events":f.disableOutsidePointerEvents,role:"dialog","aria-describedby":l(o).descriptionId,"aria-labelledby":l(o).titleId,"data-state":l(ms)(l(o).open.value)},f.$attrs,{onDismiss:i[0]||(i[0]=m=>l(o).onOpenChange(!1)),onEscapeKeyDown:i[1]||(i[1]=m=>s("escapeKeyDown",m)),onFocusOutside:i[2]||(i[2]=m=>s("focusOutside",m)),onInteractOutside:i[3]||(i[3]=m=>s("interactOutside",m)),onPointerDownOutside:i[4]||(i[4]=m=>s("pointerDownOutside",m))}),{default:E(()=>[P(f.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Ge=ys,hs=O({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=V(),r=Ce(s),{forwardRef:d,currentElement:f}=j();return Jt(f),(i,m)=>(g(),T(Ge,F({...e,...l(r)},{ref:l(d),"trap-focus":l(o).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:m[0]||(m[0]=u=>{u.defaultPrevented||(u.preventDefault(),l(o).triggerElement.value?.focus())}),onPointerDownOutside:m[1]||(m[1]=u=>{const c=u.detail.originalEvent,y=c.button===0&&c.ctrlKey===!0;(c.button===2||y)&&u.preventDefault()}),onFocusOutside:m[2]||(m[2]=u=>{u.preventDefault()})}),{default:E(()=>[P(i.$slots,"default")]),_:3},16,["trap-focus"]))}}),xs=hs,bs=O({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,o=Ce(a);j();const r=V(),d=w(!1),f=w(!1);return(i,m)=>(g(),T(Ge,F({...e,...l(o)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:m[0]||(m[0]=u=>{u.defaultPrevented||(d.value||l(r).triggerElement.value?.focus(),u.preventDefault()),d.value=!1,f.value=!1}),onInteractOutside:m[1]||(m[1]=u=>{u.defaultPrevented||(d.value=!0,u.detail.originalEvent.type==="pointerdown"&&(f.value=!0));const c=u.target;l(r).triggerElement.value?.contains(c)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&f.value&&u.preventDefault()})}),{default:E(()=>[P(i.$slots,"default")]),_:3},16))}}),_s=bs,ws=O({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=V(),r=Ce(s),{forwardRef:d}=j();return(f,i)=>(g(),T(l(je),{present:f.forceMount||l(o).open.value},{default:E(()=>[l(o).modal.value?(g(),T(xs,F({key:0,ref:l(d)},{...e,...l(r),...f.$attrs}),{default:E(()=>[P(f.$slots,"default")]),_:3},16)):(g(),T(_s,F({key:1,ref:l(d)},{...e,...l(r),...f.$attrs}),{default:E(()=>[P(f.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),ks=ws,Cs=O({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(t){const a=t;j();const e=V();return(s,o)=>(g(),T(l(ee),F(a,{id:l(e).descriptionId}),{default:E(()=>[P(s.$slots,"default")]),_:3},16,["id"]))}}),Ds=Cs,Es=O({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const a=V();return Ut(!0),j(),(e,s)=>(g(),T(l(ee),{as:e.as,"as-child":e.asChild,"data-state":l(a).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:E(()=>[P(e.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),$s=Es,Ss=O({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const a=V(),{forwardRef:e}=j();return(s,o)=>l(a)?.modal.value?(g(),T(l(je),{key:0,present:s.forceMount||l(a).open.value},{default:E(()=>[_($s,F(s.$attrs,{ref:l(e),as:s.as,"as-child":s.asChild}),{default:E(()=>[P(s.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):I("v-if",!0)}}),Os=Ss,Ls=O({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const a=Ft();return(e,s)=>l(a)||e.forceMount?(g(),T(vt,{key:0,to:e.to,disabled:e.disabled,defer:e.defer},[P(e.$slots,"default")],8,["to","disabled","defer"])):I("v-if",!0)}}),Ts=Ls,Ps=O({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const a=t;return(e,s)=>(g(),T(l(Ts),mt(yt(a)),{default:E(()=>[P(e.$slots,"default")]),_:3},16))}}),Ms=Ps,Bs=O({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const a=t,e=V();return j(),(s,o)=>(g(),T(l(ee),F(a,{id:l(e).titleId}),{default:E(()=>[P(s.$slots,"default")]),_:3},16,["id"]))}}),As=Bs;const Is=N("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Fs=N("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Ze=N("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const zs=N("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Ae=N("LanguagesIcon",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const Ie=N("LightbulbIcon",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const Ns=N("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const qs=N("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const js=N("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Rs=N("SendIcon",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const Us=N("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Vs=N("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Ks=N("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const ke=N("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ws={class:"border-b border-gray-200 px-4 py-4"},Hs={class:"flex items-center justify-between"},Xs={class:"border-b border-gray-200 px-4 py-4"},Js=["disabled"],Ys={"data-test":"chat-list",class:"flex-1 overflow-y-auto p-2"},Gs={class:"space-y-1"},Zs=["onClick"],Qs={class:"min-w-0 flex-1"},ea=["onKeydown"],ta=["onClick"],sa={key:1,class:"group/title"},aa={class:"flex items-center gap-1"},na=["title"],oa=["onClick"],ra={class:"mt-0.5 truncate text-xs text-gray-500"},la=["onClick"],ia={class:"border-t border-gray-200 p-3 lg:hidden"},ua=O({__name:"ChatSidebar",props:{chats:{},activeChat:{},hasUnusedNewChat:{type:Boolean},isOpen:{type:Boolean,default:!1}},emits:["new-chat","select-chat","delete-chat","update-title","close"],setup(t,{emit:a}){const e=t,s=a,o=w(null),r=w(""),d=()=>{e.hasUnusedNewChat||s("new-chat")},f=x=>{o.value!==x&&(s("select-chat",x),s("close"))},i=(x,p)=>{x.stopPropagation(),confirm("Are you sure you want to delete this conversation?")&&s("delete-chat",p)},m=(x,p)=>{x.stopPropagation(),o.value=p.id,r.value=p.title},u=(x,p)=>{x.stopPropagation(),r.value.trim()&&s("update-title",p,r.value.trim()),o.value=null,r.value=""},c=x=>{x.stopPropagation(),o.value=null,r.value=""},y=(x,p)=>{x.key==="Enter"?(x.preventDefault(),u(x,p)):x.key==="Escape"&&c(x)};return(x,p)=>(g(),$(W,null,[t.isOpen?(g(),$("div",{key:0,class:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:p[0]||(p[0]=k=>s("close"))})):I("",!0),n("div",{class:A(["fixed lg:static inset-y-0 left-0 z-50 flex h-screen w-64 flex-col border-r border-gray-200 bg-white transform transition-transform duration-300 lg:translate-x-0",t.isOpen?"translate-x-0":"-translate-x-full"])},[n("div",Ws,[n("div",Hs,[_(l(ce),{href:x.route("language-chat.index")},{default:E(()=>[_(St,{size:"sm"})]),_:1},8,["href"]),n("button",{onClick:p[1]||(p[1]=k=>s("close")),class:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close sidebar"},[_(l(ke),{class:"h-5 w-5 text-gray-600"})])])]),n("div",Xs,[n("button",{"data-test":"new-chat-button",onClick:d,disabled:t.hasUnusedNewChat,class:A(["flex w-full items-center justify-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors",t.hasUnusedNewChat?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},[_(l(js),{class:"h-4 w-4"}),p[4]||(p[4]=z(" New Chat ",-1))],10,Js)]),n("div",Ys,[n("div",Gs,[(g(!0),$(W,null,oe(t.chats,k=>(g(),$("div",{key:k.id,"data-test":"chat-item",onClick:v=>f(k.id),class:A(["group flex w-full items-start gap-3 rounded-lg px-3 py-2.5 text-left transition-colors cursor-pointer",t.activeChat===k.id?"bg-gray-100 hover:bg-gray-200":"hover:bg-gray-100"])},[(g(),$("svg",{class:A(["mt-0.5 h-4 w-4 flex-shrink-0",t.activeChat===k.id?"text-gray-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...p[5]||(p[5]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)])],2)),n("div",Qs,[o.value===k.id?(g(),$("div",{key:0,class:"flex items-center gap-1",onClick:p[3]||(p[3]=ht(()=>{},["stop"]))},[de(n("input",{"onUpdate:modelValue":p[2]||(p[2]=v=>r.value=v),onKeydown:v=>y(v,k.id),type:"text",class:"flex-1 rounded border border-blue-500 px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",autofocus:""},null,40,ea),[[xt,r.value]]),n("button",{onClick:v=>u(v,k.id),class:"p-1 rounded hover:bg-green-100",title:"Save"},[_(l(Ot),{class:"h-4 w-4 text-green-600"})],8,ta),n("button",{onClick:c,class:"p-1 rounded hover:bg-red-100",title:"Cancel"},[_(l(ke),{class:"h-4 w-4 text-red-600"})])])):(g(),$("div",sa,[n("div",aa,[n("p",{class:A(["truncate text-sm font-medium",t.activeChat===k.id?"text-gray-900":"text-gray-700"]),title:k.title},L(k.title),11,na),n("button",{onClick:v=>m(v,k),class:"flex-shrink-0 opacity-0 group-hover/title:opacity-100 p-0.5 rounded hover:bg-gray-200",title:"Edit title"},[_(l(qs),{class:"h-3 w-3 text-gray-500"})],8,oa)]),n("p",ra,L(k.timestamp),1)]))]),n("button",{onClick:v=>i(v,k.id),class:"opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded hover:bg-red-50",title:"Delete conversation"},[_(l(Vs),{class:"h-4 w-4 text-gray-400 hover:text-red-600"})],8,la)],10,Zs))),128))])]),n("div",ia,[_(l(ce),{href:x.route("profile.edit"),class:"flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-100"},{default:E(()=>[...p[6]||(p[6]=[n("svg",{class:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),n("span",null,"Profile Settings",-1)])]),_:1},8,["href"])])],2)],64))}}),da={class:"relative"},ca={key:0,class:"fixed inset-x-4 top-16 sm:absolute sm:inset-x-auto sm:top-auto sm:right-0 mt-2 w-auto sm:w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-[600px] flex flex-col"},pa={class:"px-4 py-3 border-b border-gray-200 flex items-center justify-between"},fa={class:"overflow-y-auto flex-1"},ga={key:0,class:"p-8 text-center text-gray-500"},va={key:1,class:"p-8 text-center text-gray-500"},ma={key:2,class:"divide-y divide-gray-200"},ya={class:"flex items-start gap-3"},ha={class:"text-2xl flex-shrink-0"},xa={class:"flex-1 min-w-0"},ba={class:"flex items-start justify-between gap-2"},_a={class:"font-semibold text-gray-900 text-sm"},wa={class:"flex items-center gap-1 flex-shrink-0"},ka=["onClick"],Ca=["onClick"],Da={class:"text-sm text-gray-600 mt-1"},Ea={class:"text-xs text-gray-400 mt-2"},$a=O({__name:"InsightPanel",setup(t){const a=Ne(),e=w([]),s=w(0),o=w(!1),r=w(!1);let d=null;const f=M(()=>!!a.props.auth?.user),i=w(!1);let m=null;const u=w(!1);X(s,(b,D)=>{u.value&&b>D&&(i.value=!0,m&&clearTimeout(m),m=setTimeout(()=>{i.value=!1},4e3))});const c=async(b=!1)=>{if(f.value){b||(o.value=!0);try{const{data:D}=await ae.get("/insights");JSON.stringify(e.value)!==JSON.stringify(D.insights)&&(e.value=D.insights),s.value!==D.unread_count&&(s.value=D.unread_count)}catch(D){ae.isAxiosError(D)&&D.response?.status===401?d!==null&&(clearInterval(d),d=null):console.error("Error fetching insights:",D)}finally{b||(o.value=!1)}}},y=async b=>{try{await ae.patch(`/insights/${b}/read`);const D=e.value.find(B=>B.id===b);D&&(D.is_read=!0,s.value=Math.max(0,s.value-1))}catch(D){console.error("Error marking insight as read:",D)}},x=async()=>{try{await ae.post("/insights/mark-all-read"),e.value.forEach(b=>{b.is_read=!0}),s.value=0}catch(b){console.error("Error marking all as read:",b)}},p=async b=>{try{await ae.delete(`/insights/${b}`);const D=e.value.findIndex(B=>B.id===b);if(D!==-1){const B=!e.value[D].is_read;e.value.splice(D,1),B&&(s.value=Math.max(0,s.value-1))}}catch(D){console.error("Error deleting insight:",D)}},k=b=>{switch(b){case"grammar_pattern":return"ðŸ“";case"vocabulary_strength":return"ðŸ“š";case"proficiency_suggestion":return"ðŸŽ¯";default:return"ðŸ’¡"}},v=()=>{r.value=!r.value,r.value&&c()};return pe(()=>{f.value&&(c().finally(()=>{u.value=!0}),d=setInterval(()=>c(!0),3e4))}),Fe(()=>{d!==null&&(clearInterval(d),d=null),m&&clearTimeout(m)}),(b,D)=>(g(),$("div",da,[n("button",{onClick:v,class:A(["relative p-2 text-gray-600 hover:text-gray-900 transition-colors",{"text-blue-600":r.value}])},[D[1]||(D[1]=n("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),s.value>0?(g(),$("span",{key:0,class:A(["absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/5 -translate-y-1/5 bg-red-600 rounded-full transition-all origin-center",{"animate-pulse-subtle":i.value}])},L(s.value),3)):I("",!0)],2),_(bt,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:E(()=>[r.value?(g(),$("div",ca,[n("div",pa,[D[2]||(D[2]=n("h3",{class:"text-lg font-semibold text-gray-900"},"LangGPT Insights",-1)),e.value.length>0&&s.value>0?(g(),$("button",{key:0,onClick:x,class:"text-sm text-blue-600 hover:text-blue-800"}," Mark all read ")):I("",!0)]),n("div",fa,[o.value?(g(),$("div",ga,[_(qe,{class:"h-8 w-8 mx-auto mb-2"}),D[3]||(D[3]=z(" Loading insights... ",-1))])):e.value.length===0?(g(),$("div",va,[...D[4]||(D[4]=[n("div",{class:"text-4xl mb-2"},"ðŸ’¡",-1),n("p",{class:"font-medium"},"No insights yet",-1),n("p",{class:"text-sm mt-1"},"Keep chatting to receive personalized feedback!",-1)])])):(g(),$("div",ma,[(g(!0),$(W,null,oe(e.value,B=>(g(),$("div",{key:B.id,class:A(["p-4 hover:bg-gray-50 transition-colors",{"bg-blue-50/30":!B.is_read}])},[n("div",ya,[n("div",ha,L(k(B.insight_type)),1),n("div",xa,[n("div",ba,[n("h4",_a,L(B.title),1),n("div",wa,[B.is_read?I("",!0):(g(),$("button",{key:0,onClick:G=>y(B.id),class:"text-blue-600 hover:text-blue-800 p-1",title:"Mark as read"},[...D[5]||(D[5]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,ka)),n("button",{onClick:G=>p(B.id),class:"text-gray-400 hover:text-red-600 p-1",title:"Dismiss"},[...D[6]||(D[6]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ca)])]),n("p",Da,L(B.message),1),n("p",Ea,L(new Date(B.created_at).toLocaleDateString()),1)])])],2))),128))]))])])):I("",!0)]),_:1}),r.value?(g(),$("div",{key:0,onClick:D[0]||(D[0]=B=>r.value=!1),class:"fixed inset-0 z-40 bg-black/20 sm:bg-transparent"})):I("",!0)]))}}),Sa={class:"border-b border-gray-200 bg-white px-4 py-3 sm:px-6 sm:py-4"},Oa={class:"flex items-start justify-between gap-3"},La={class:"flex min-w-0 flex-1 items-center gap-3"},Ta={class:"flex items-center gap-2 sm:gap-3"},Pa={class:"mt-3 flex flex-wrap items-center gap-2 sm:mt-4 sm:gap-3"},Ma={"data-test":"native-language",class:"flex items-center gap-1.5 rounded-lg bg-blue-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},Ba={class:"flex items-center gap-1 text-sm sm:gap-1.5"},Aa={class:"text-gray-900"},Ia={"data-test":"target-language",class:"flex items-center gap-1.5 rounded-lg bg-green-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},Fa={class:"flex items-center gap-1 text-sm sm:gap-1.5"},za={class:"text-gray-900"},Na={"data-test":"proficiency-level",class:"flex items-center gap-1.5 rounded-lg bg-purple-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},qa={class:"flex items-center gap-1 text-sm sm:gap-1.5"},ja={class:"text-gray-900"},Ra=O({__name:"ChatHeader",props:{nativeLanguage:{},targetLanguage:{},proficiencyLevel:{},proficiencyLabel:{},autoUpdateProficiency:{type:Boolean}},emits:["settings","toggleSidebar"],setup(t,{emit:a}){const e=t,s=a,o=()=>{s("settings")},r=()=>{s("toggleSidebar")},d=M(()=>e.proficiencyLevel?e.autoUpdateProficiency?`Dynamic (${e.proficiencyLabel?`${e.proficiencyLevel} - ${e.proficiencyLabel}`:e.proficiencyLevel})`:e.proficiencyLevel+(e.proficiencyLabel?` (${e.proficiencyLabel})`:""):e.autoUpdateProficiency?"Dynamic (Not Set)":"Not Set");return(f,i)=>(g(),$("div",Sa,[n("div",Oa,[n("div",La,[n("button",{onClick:r,class:"flex-shrink-0 rounded-lg p-2 text-gray-600 transition-colors hover:bg-gray-100 lg:hidden","aria-label":"Toggle sidebar"},[_(l(Ns),{class:"h-5 w-5"})]),i[0]||(i[0]=n("div",{class:"min-w-0 flex-1"},[n("h1",{class:"text-lg font-semibold text-gray-900 sm:text-xl"},"Language Exchange Chat"),n("p",{class:"hidden text-sm text-gray-500 sm:block"}," Practice your language skills with AI assistance ")],-1))]),n("div",Ta,[_($a),_(l(ce),{href:f.route("profile.edit"),class:"hidden rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:block"},{default:E(()=>[...i[1]||(i[1]=[z(" Profile ",-1)])]),_:1},8,["href"]),_(l(ce),{href:f.route("logout"),method:"post",as:"button",class:"rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:px-4"},{default:E(()=>[...i[2]||(i[2]=[n("span",{class:"hidden sm:inline"},"Log out",-1),n("span",{class:"sm:hidden"},"Logout",-1)])]),_:1},8,["href"])])]),n("div",Pa,[n("div",Ma,[_(l(Ae),{class:"h-4 w-4 flex-shrink-0 text-blue-600"}),n("div",Ba,[i[3]||(i[3]=n("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Native:",-1)),n("span",Aa,L(t.nativeLanguage),1)])]),_(l(Is),{class:"h-4 w-4 flex-shrink-0 text-gray-400"}),n("div",Ia,[_(l(Ae),{class:"h-4 w-4 flex-shrink-0 text-green-600"}),n("div",Fa,[i[4]||(i[4]=n("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Target:",-1)),n("span",za,L(t.targetLanguage),1)])]),i[7]||(i[7]=n("div",{class:"hidden h-4 w-px bg-gray-300 sm:block"},null,-1)),n("div",Na,[_(l(Fs),{class:"h-4 w-4 flex-shrink-0 text-purple-600"}),n("div",qa,[i[5]||(i[5]=n("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Level:",-1)),n("span",ja,L(d.value),1)])]),n("button",{"data-test":"chat-settings-button",onClick:o,class:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-2.5 py-1.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:ml-2 sm:px-3",title:"Chat Settings"},[_(l(Us),{class:"h-4 w-4 flex-shrink-0"}),i[6]||(i[6]=n("span",{class:"hidden sm:inline"},"Chat Settings",-1))])])]))}}),Ua={class:"relative inline-block"},Va={class:"invisible","aria-hidden":"true","data-test":"typewriter-size"},Ka=["dir"],Wa=O({__name:"TypewriterText",props:{text:{},speed:{default:30},disabled:{type:Boolean,default:!1}},emits:["complete"],setup(t,{emit:a}){const e=t,s=a,o=w(""),r=w("auto");let d=null;function f(u){const c=/[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]/,y=/[A-Za-z\u00C0-\u024F\u0400-\u04FF\u0370-\u03FF]/,x=c.test(u),p=y.test(u);return x&&p?"auto":x?"rtl":p?"ltr":"auto"}function i(){if(e.disabled){o.value=e.text,s("complete");return}if(o.value="",r.value=f(e.text),!e.text){s("complete");return}let u=0;function c(){u<e.text.length&&(o.value+=e.text[u],u++,u<e.text.length?d=setTimeout(c,e.speed):s("complete"))}d=setTimeout(c,0)}function m(){d&&(clearTimeout(d),d=null)}return X(()=>e.text,()=>{m(),i()},{immediate:!0}),_t(()=>{m()}),(u,c)=>(g(),$("span",Ua,[n("span",Va,L(t.text),1),n("span",{class:"absolute inset-0","data-test":"typewriter-text",dir:r.value},L(o.value),9,Ka)]))}}),Ha={class:"flex-shrink-0"},Xa={class:"text-sm font-semibold"},Ja={class:"whitespace-pre-wrap break-words text-sm leading-relaxed"},Ya={key:1},Ga={key:0,"data-test":"analyzing-indicator",class:"flex items-center gap-1"},Za=O({__name:"ChatMessage",props:{content:{},role:{},timestamp:{},translation:{default:null},isAnalyzing:{type:Boolean},disableTypewriter:{type:Boolean,default:!1}},setup(t){return(a,e)=>(g(),$("div",{"data-test":"message-container",class:A(["flex gap-4",t.role==="user"?"flex-row-reverse":"flex-row"])},[n("div",Ha,[n("div",{"data-test":"message-avatar",class:A(["flex h-10 w-10 items-center justify-center rounded-full text-white",t.role==="user"?"bg-blue-600":"bg-gradient-to-br from-purple-600 to-blue-500"])},[n("span",Xa,L(t.role==="user"?"You":"AI"),1)],2)]),n("div",{"data-test":"message-content",class:A(["max-w-[70%] rounded-2xl px-4 py-3",t.role==="user"?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm ring-1 ring-gray-200"])},[n("p",Ja,[t.role==="assistant"&&!t.disableTypewriter?(g(),T(Wa,{key:0,text:t.translation||t.content,speed:30},null,8,["text"])):(g(),$("span",Ya,L(t.translation||t.content),1))]),n("div",{class:A(["mt-2 flex items-center gap-2 text-xs",t.role==="user"?"text-blue-100":"text-gray-500"])},[n("span",null,L(t.timestamp),1),t.isAnalyzing?(g(),$("span",Ga,[_(qe,{class:"h-3 w-3"}),e[0]||(e[0]=z(" Analyzing... ",-1))])):I("",!0)],2)],2)],2))}}),Qa={class:"flex items-center justify-between mb-3"},en={class:"flex items-center gap-2"},tn={class:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3"},sn={class:"space-y-1"},an={class:"p-2 rounded bg-gray-100 dark:bg-gray-900 border-2 border-gray-300 dark:border-gray-600"},nn={class:"text-sm line-through text-gray-800 dark:text-gray-100"},on={class:"space-y-1"},rn={class:"text-xs font-semibold text-green-700 dark:text-green-300 uppercase tracking-wide flex items-center gap-1"},ln={class:"p-2 rounded bg-green-50 dark:bg-green-950/30 border-2 border-green-300 dark:border-green-700"},un={class:"text-sm font-medium text-green-800 dark:text-green-200"},dn={class:"mb-3 p-3 rounded bg-white/50 dark:bg-gray-800/50"},cn={class:"text-sm text-gray-900 dark:text-gray-50"},pn={class:"mb-3 p-3 rounded bg-white/50 dark:bg-gray-800/50"},fn={class:"text-sm text-gray-900 dark:text-gray-50"},gn={key:0,class:"mb-2 p-3 rounded bg-white/50 dark:bg-gray-800/50"},vn={class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-2 flex items-center gap-1"},mn={class:"space-y-1"},yn={class:"text-xs text-gray-500 dark:text-gray-500 text-right mt-2"},hn=O({__name:"CorrectionMessage",props:{content:{},correctionData:{},timestamp:{}},setup(t){const a=t,e={offensive:"Offensive Language",meaningless:"Unclear Meaning",unnatural:"Unnatural Phrasing",archaic:"Archaic Expression",dangerous:"Potentially Harmful"},s={offensive:"text-red-700 dark:text-red-300",meaningless:"text-orange-700 dark:text-orange-300",unnatural:"text-yellow-700 dark:text-yellow-300",archaic:"text-blue-700 dark:text-blue-300",dangerous:"text-red-800 dark:text-red-200"},o={critical:"bg-red-200 text-red-900 dark:bg-red-900/40 dark:text-red-200",high:"bg-orange-200 text-orange-900 dark:bg-orange-900/40 dark:text-orange-200",medium:"bg-yellow-200 text-yellow-900 dark:bg-yellow-900/40 dark:text-yellow-200"},r={critical:"border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-950/30",high:"border-orange-300 dark:border-orange-700 bg-orange-50 dark:bg-orange-950/30",medium:"border-yellow-300 dark:border-yellow-700 bg-yellow-50 dark:bg-yellow-950/30"},d=M(()=>{switch(a.correctionData.severity){case"critical":return Ze;case"high":return Ks;default:return Ie}});return(f,i)=>(g(),$("div",{class:A(["px-4 py-3 rounded-lg border-2 my-3",r[t.correctionData.severity]])},[n("div",Qa,[n("div",en,[(g(),T(wt(d.value),{class:A(["w-5 h-5",s[t.correctionData.error_type]])},null,8,["class"])),n("span",{class:A(["font-semibold text-sm",s[t.correctionData.error_type]])},L(e[t.correctionData.error_type]),3)]),n("span",{class:A(["text-xs font-medium px-2 py-1 rounded-full uppercase tracking-wide",o[t.correctionData.severity]])},L(t.correctionData.severity),3)]),n("div",tn,[n("div",sn,[i[0]||(i[0]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-200 uppercase tracking-wide"}," Original ",-1)),n("div",an,[n("span",nn,L(t.correctionData.original_text),1)])]),n("div",on,[n("div",rn,[_(l(zs),{class:"w-3 h-3"}),i[1]||(i[1]=z(" Suggested ",-1))]),n("div",ln,[n("span",un,L(t.correctionData.corrected_text),1)])])]),n("div",dn,[i[2]||(i[2]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-1"}," Explanation ",-1)),n("p",cn,L(t.correctionData.explanation),1)]),n("div",pn,[i[3]||(i[3]=n("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-1"}," Context ",-1)),n("p",fn,L(t.correctionData.context),1)]),t.correctionData.recommendations&&t.correctionData.recommendations.length>0?(g(),$("div",gn,[n("div",vn,[_(l(Ie),{class:"w-3 h-3"}),i[4]||(i[4]=z(" Recommendations ",-1))]),n("ul",mn,[(g(!0),$(W,null,oe(t.correctionData.recommendations,(m,u)=>(g(),$("li",{key:u,class:"text-sm text-gray-900 dark:text-gray-50 flex items-start gap-2"},[i[5]||(i[5]=n("span",{class:"text-gray-400 dark:text-gray-500"},"â€¢",-1)),n("span",null,L(m),1)]))),128))])])):I("",!0),n("div",yn,L(t.timestamp),1)],2))}}),xn=O({inheritAttrs:!1,__name:"SendIcon",setup(t){return(a,e)=>(g(),T(l(Rs),F({class:"h-5 w-5"},a.$attrs),null,16))}}),bn={},_n={"data-test":"ai-disclaimer",class:"mt-2 flex flex-col gap-1 text-xs text-gray-500 sm:flex-row sm:items-center sm:justify-between sm:gap-0"};function wn(t,a){return g(),$("div",_n,[...a[0]||(a[0]=[n("span",{class:"hidden sm:inline"},"Press Enter to send, Shift+Enter for new line",-1),n("span",{class:"sm:text-right"}," AI-generated responses may contain inaccuracies. Always verify important information. ",-1)])])}const kn=Ve(bn,[["render",wn]]),Cn={class:"border-t border-gray-200 bg-white px-3 py-2 sm:px-4 sm:py-4"},Dn={class:"mx-auto max-w-3xl"},En={class:"relative flex items-end gap-2"},$n=["value","disabled","placeholder"],Sn=["disabled"],On=O({__name:"ChatInput",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue","send"],setup(t,{expose:a,emit:e}){const s=t,o=e,r=w(null),d=M(()=>window.innerWidth<640?"Type your message...":"Type your message here... (Shift+Enter for new line)"),f=y=>{const x=y.target;o("update:modelValue",x.value)},i=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),s.modelValue.trim()&&!s.disabled&&o("send"))},m=()=>{s.modelValue.trim()&&!s.disabled&&o("send")},u=()=>!s.modelValue.trim()||s.disabled;return X(()=>s.disabled,(y,x)=>{x&&!y&&setTimeout(()=>{r.value?.focus()},100)}),pe(()=>{r.value?.focus()}),a({focus:()=>{r.value?.focus()}}),(y,x)=>(g(),$("div",Cn,[n("div",Dn,[n("div",En,[n("textarea",{ref_key:"textareaRef",ref:r,value:t.modelValue,onInput:f,onKeydown:i,disabled:t.disabled,placeholder:d.value,rows:"1",class:"max-h-32 min-h-[44px] flex-1 resize-none rounded-xl border border-gray-300 px-3 py-2.5 pr-12 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 disabled:cursor-not-allowed disabled:opacity-50 sm:px-4 sm:py-3"},null,40,$n),n("button",{"data-test":"send-button",onClick:m,disabled:u(),class:"absolute bottom-2 right-2 flex h-8 w-8 items-center justify-center rounded-lg bg-blue-600 text-white transition-all hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50"},[_(xn)],8,Sn)]),_(kn)])]))}}),Ln={},Tn={class:"flex gap-4"};function Pn(t,a){return g(),$("div",Tn,[...a[0]||(a[0]=[kt('<div class="flex-shrink-0"><div data-test="typing-avatar" class="flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-purple-600 to-blue-500 text-white"><span class="text-sm font-semibold">AI</span></div></div><div data-test="typing-container" class="rounded-2xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-200"><div class="flex gap-1"><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400 [animation-delay:-0.3s]"></div><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400 [animation-delay:-0.15s]"></div><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400"></div></div></div>',2)])])}const Mn=Ve(Ln,[["render",Pn]]),Bn={key:0,"data-test":"service-down-banner",class:"border-l-4 border-red-200 bg-red-50 p-4"},An={class:"flex items-start gap-3"},In=O({__name:"ServiceDownBanner",props:{isServiceDown:{type:Boolean}},setup(t){return(a,e)=>t.isServiceDown?(g(),$("div",Bn,[n("div",An,[_(l(Ze),{"data-test":"alert-icon",class:"h-5 w-5 flex-shrink-0 text-red-600"}),e[0]||(e[0]=n("div",{class:"flex-1"},[n("h3",{class:"text-sm font-semibold text-red-800"}," Language processing service is currently unavailable "),n("p",{class:"mt-1 text-sm text-red-700"}," Chat functionality is temporarily disabled. Please try again later. ")],-1))])])):I("",!0)}}),Fn=O({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(t,{emit:a}){const o=Re(t,a);return(r,d)=>(g(),T(l(Zt),F({"data-slot":"dialog"},l(o)),{default:E(()=>[P(r.$slots,"default")]),_:3},16))}}),zn=O({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,e=M(()=>{const{class:s,...o}=a;return o});return(s,o)=>(g(),T(l(Os),F({"data-slot":"dialog-overlay"},e.value,{class:l(te)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",a.class)}),{default:E(()=>[P(s.$slots,"default")]),_:3},16,["class"]))}}),Nn=O({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:a}){const e=t,s=a,o=M(()=>{const{class:d,...f}=e;return f}),r=Re(o,s);return(d,f)=>(g(),T(l(Ms),null,{default:E(()=>[_(zn),_(l(ks),F({"data-slot":"dialog-content"},l(r),{class:l(te)("bg-white text-gray-900 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border border-gray-200 p-6 shadow-lg duration-200 sm:max-w-lg",e.class)}),{default:E(()=>[P(d.$slots,"default"),_(l(es),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},{default:E(()=>[_(l(ke)),f[0]||(f[0]=n("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),qn=O({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,e=M(()=>{const{class:o,...r}=a;return r}),s=Ue(e);return(o,r)=>(g(),T(l(Ds),F({"data-slot":"dialog-description"},l(s),{class:l(te)("text-muted-foreground text-sm",a.class)}),{default:E(()=>[P(o.$slots,"default")]),_:3},16,["class"]))}}),jn=O({__name:"DialogFooter",props:{class:{}},setup(t){const a=t;return(e,s)=>(g(),$("div",{"data-slot":"dialog-footer",class:A(l(te)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a.class))},[P(e.$slots,"default")],2))}}),Rn=O({__name:"DialogHeader",props:{class:{}},setup(t){const a=t;return(e,s)=>(g(),$("div",{"data-slot":"dialog-header",class:A(l(te)("flex flex-col gap-2 text-center sm:text-left",a.class))},[P(e.$slots,"default")],2))}}),Un=O({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,e=M(()=>{const{class:o,...r}=a;return r}),s=Ue(e);return(o,r)=>(g(),T(l(As),F({"data-slot":"dialog-title"},l(s),{class:l(te)("text-lg leading-none font-semibold",a.class)}),{default:E(()=>[P(o.$slots,"default")]),_:3},16,["class"]))}}),Vn={class:"grid gap-6 py-4"},Kn={class:"grid gap-2"},Wn=["value"],Hn={key:0,class:"text-sm text-red-600"},Xn={class:"space-y-4 rounded-lg border border-gray-200 p-4"},Jn={class:"flex items-center justify-between"},Yn={class:"space-y-0.5"},Gn={class:"flex items-center justify-between"},Zn={class:"space-y-0.5"},Qn=O({__name:"ChatSettingsModal",props:{open:{type:Boolean},chatSessionId:{},nativeLanguage:{},targetLanguage:{},proficiencyLevel:{},localizeCorrections:{type:Boolean,default:!0},localizeInsights:{type:Boolean,default:!0}},emits:["update:open","updated"],setup(t,{emit:a}){const e=t,s=a,o=w(e.nativeLanguage),r=w(e.targetLanguage),d=w(e.proficiencyLevel||"A1"),f=w(e.localizeCorrections),i=w(e.localizeInsights),m=w(!1),u=w({}),{languages:c}=zt();X(()=>e.open,k=>{k&&(o.value=e.nativeLanguage,r.value=e.targetLanguage,d.value=e.proficiencyLevel||"A1",f.value=e.localizeCorrections,i.value=e.localizeInsights,u.value={})});const y=[{value:"A1",label:"A1 - Beginner",description:"Can understand and use familiar everyday expressions"},{value:"A2",label:"A2 - Elementary",description:"Can communicate in simple routine tasks"},{value:"B1",label:"B1 - Intermediate",description:"Can deal with most situations while traveling"},{value:"B2",label:"B2 - Upper Intermediate",description:"Can interact with native speakers fluently"},{value:"C1",label:"C1 - Advanced",description:"Can use language flexibly and effectively"},{value:"C2",label:"C2 - Mastery",description:"Can understand virtually everything with ease"}],x=()=>{s("update:open",!1)},p=()=>{u.value={},m.value=!0,Dt.patch(route("language-chat.update-parameters",{chatSession:e.chatSessionId}),{native_language:o.value,target_language:r.value,proficiency_level:d.value,localize_corrections:f.value,localize_insights:i.value},{preserveScroll:!0,onSuccess:()=>{s("updated"),x()},onError:k=>{u.value=k},onFinish:()=>{m.value=!1}})};return(k,v)=>(g(),T(l(Fn),{open:t.open,"onUpdate:open":v[5]||(v[5]=b=>s("update:open",b))},{default:E(()=>[_(l(Nn),{class:"sm:max-w-[500px]"},{default:E(()=>[_(l(Rn),null,{default:E(()=>[_(l(Un),null,{default:E(()=>[...v[6]||(v[6]=[z("Chat Session Settings",-1)])]),_:1}),_(l(qn),null,{default:E(()=>[...v[7]||(v[7]=[z(" Customize the language settings for this chat session. These settings only apply to this conversation. ",-1)])]),_:1})]),_:1}),n("div",Vn,[_(Te,{id:"native-language",label:"Native Language",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=b=>o.value=b),options:l(c),"exclude-value":r.value,placeholder:"Select your native language",error:u.value.native_language},null,8,["modelValue","options","exclude-value","error"]),_(Te,{id:"target-language",label:"Target Language",modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=b=>r.value=b),options:l(c),"exclude-value":o.value,placeholder:"Select language you're learning",error:u.value.target_language},null,8,["modelValue","options","exclude-value","error"]),n("div",Kn,[_(l(ye),{for:"proficiency-level"},{default:E(()=>[...v[8]||(v[8]=[z("Proficiency Level",-1)])]),_:1}),de(n("select",{id:"proficiency-level","onUpdate:modelValue":v[2]||(v[2]=b=>d.value=b),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2"},[(g(),$(W,null,oe(y,b=>n("option",{key:b.value,value:b.value},L(b.label)+" - "+L(b.description),9,Wn)),64))],512),[[Ct,d.value]]),u.value.proficiency_level?(g(),$("p",Hn,L(u.value.proficiency_level),1)):I("",!0)]),n("div",Xn,[v[13]||(v[13]=n("h4",{class:"text-sm font-medium"},"Localization Preferences",-1)),n("div",Jn,[n("div",Yn,[_(l(ye),{for:"localize-corrections",class:"font-normal"},{default:E(()=>[...v[9]||(v[9]=[z(" Localize Corrections ",-1)])]),_:1}),v[10]||(v[10]=n("p",{class:"text-xs text-gray-500"}," Receive error corrections in your native language ",-1))]),de(n("input",{id:"localize-corrections",type:"checkbox","onUpdate:modelValue":v[3]||(v[3]=b=>f.value=b),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,512),[[$e,f.value]])]),n("div",Gn,[n("div",Zn,[_(l(ye),{for:"localize-insights",class:"font-normal"},{default:E(()=>[...v[11]||(v[11]=[z(" Localize Insights ",-1)])]),_:1}),v[12]||(v[12]=n("p",{class:"text-xs text-gray-500"}," Receive learning insights in your native language ",-1))]),de(n("input",{id:"localize-insights",type:"checkbox","onUpdate:modelValue":v[4]||(v[4]=b=>i.value=b),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,512),[[$e,i.value]])])])]),_(l(jn),null,{default:E(()=>[_(l(Se),{variant:"outline",onClick:x,disabled:m.value},{default:E(()=>[...v[14]||(v[14]=[z(" Cancel ",-1)])]),_:1},8,["disabled"]),_(l(Se),{onClick:p,disabled:m.value},{default:E(()=>[z(L(m.value?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}}),eo={"data-test":"main-container",class:"flex h-dvh w-full overflow-hidden bg-gray-50"},to={"data-test":"chat-area",class:"flex min-w-0 flex-1 flex-col"},so={key:0,class:"flex h-full items-center justify-center"},ao={class:"w-full max-w-2xl text-center px-2"},no={class:"mb-6 text-sm text-gray-600 sm:mb-8 sm:text-base"},oo={class:"grid grid-cols-1 gap-3 sm:grid-cols-3 sm:gap-4"},ro={class:"rounded-lg border border-gray-200 bg-white p-3 sm:p-4"},lo={class:"text-xs text-gray-600 text-center sm:text-sm"},io={key:1,class:"mx-auto max-w-3xl space-y-6"},ko=O({__name:"LanguageChat",props:{chatHistory:{},userSettings:{},isServiceAvailable:{type:Boolean}},setup(t){const a=t,e=w(a.chatHistory),s=w(e.value[0]?.id||null),o=w([]),r=w(""),d=w(!1),f=w(!a.isServiceAvailable),i=w(null),m=w(null),u=w(null),c=w(null),y=w(null),x=w(!0),p=w(!0),k=w(a.userSettings.native_language),v=w(a.userSettings.target_language),b=w(a.userSettings.proficiency_level),D=w(a.userSettings.auto_update_proficiency),B=w(!1),G=w(!1);X(()=>a.userSettings.proficiency_level,S=>{b.value=S}),X(()=>a.userSettings.auto_update_proficiency,S=>{D.value=S});const De=S=>S?(Ne().props.languages||[]).find(R=>R.value===S)?.label||S:"",Qe=M(()=>De(u.value)||k.value),et=M(()=>De(c.value)||v.value),tt=M(()=>{const S=y.value||b.value||"";return{A1:"Beginner",A2:"Elementary",B1:"Intermediate",B2:"Upper Intermediate",C1:"Advanced",C2:"Proficient"}[S]||S}),st=M(()=>{if(s.value){const S=e.value.find(C=>C.id===s.value);if(S)return S.title}return"Language Chat"}),Ee=M(()=>e.value.some(S=>S.title==="New Conversation")),at=M(()=>d.value||f.value),re=async()=>{await Y(),i.value&&(i.value.scrollTop=i.value.scrollHeight)},ge=async S=>{try{const h=await(await fetch(route("language-chat.messages",{chatSession:S}))).json();o.value=h.messages.map(R=>({...R,disableTypewriter:!0})),h.session&&(u.value=h.session.native_language,c.value=h.session.target_language,y.value=h.session.proficiency_level,x.value=h.session.localize_corrections??!0,p.value=h.session.localize_insights??!0),await re()}catch(C){console.error("Error loading messages:",C)}},nt=async S=>{try{const h=await(await fetch(route("language-chat.messages",{chatSession:S}))).json();return h.session&&(u.value=h.session.native_language,c.value=h.session.target_language,y.value=h.session.proficiency_level,x.value=h.session.localize_corrections??!0,p.value=h.session.localize_insights??!0),h.session?.proficiency_level}catch(C){return console.error("Error refreshing session data:",C),null}},ot=async(S,C)=>{let h=0;const R=12,q=async()=>{h++;const se=await nt(S);se&&se!==C||h<R&&setTimeout(q,5e3)};setTimeout(q,5e3)},rt=async()=>{if(!r.value.trim())return;if(!s.value&&(await ve(),await new Promise(h=>setTimeout(h,100)),!s.value)){console.error("Failed to create chat session");return}const S=r.value,C={id:Date.now(),content:S,sender_type:"user",created_at:new Date().toISOString()};o.value.push(C),r.value="",d.value=!0,await re(),await Y(),m.value?.focus();try{const h=route("language-chat.message",{chatSession:s.value}),q=await(await fetch(h,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({message:S})})).json(),se=o.value.findIndex(J=>J.id===C.id);se!==-1&&(o.value[se]={...q.user_message,sender_type:"user"}),q.correction_message&&(o.value.push({...q.correction_message,sender_type:"system",message_type:"correction"}),await re()),o.value.push({...q.ai_response,sender_type:"assistant"}),d.value=!1,await re();const me=e.value.findIndex(J=>J.id===s.value);if(me!==-1&&(e.value[me].last_message_at=new Date().toISOString(),q.new_title&&(e.value[me].title=q.new_title)),o.value.filter(J=>J.sender_type==="user").length%10===0&&D.value&&s.value){const J=y.value;ot(s.value,J)}}catch(h){console.error("Error sending message:",h),d.value=!1}},ve=async()=>{const S=e.value.find(C=>C.title==="New Conversation");if(S){le(S.id);return}if(!Ee.value)try{const h=await(await fetch(route("language-chat.create"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({native_language:k.value,target_language:v.value,proficiency_level:b.value})})).json();e.value.unshift({id:h.id,title:"New Conversation",last_message_at:h.created_at,timestamp:h.created_at,isActive:!0,native_language:h.native_language,target_language:h.target_language}),le(h.id)}catch(C){console.error("Error creating new chat:",C)}},le=async S=>{s.value=S,await ge(S)},lt=async S=>{try{(await fetch(route("language-chat.destroy",{chatSession:S}),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).ok&&(e.value=e.value.filter(h=>h.id!==S),s.value===S&&(e.value.length>0?le(e.value[0].id):(s.value=null,o.value=[])))}catch(C){console.error("Error deleting chat:",C)}},it=async(S,C)=>{try{if((await fetch(route("language-chat.update-title",{chatSession:S}),{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({title:C})})).ok){const R=e.value.findIndex(q=>q.id===S);R!==-1&&(e.value[R].title=C)}}catch(h){console.error("Error updating chat title:",h)}},ut=()=>{B.value=!0},dt=()=>{G.value=!G.value},ct=()=>{G.value=!1},pt=async()=>{s.value&&await ge(s.value)};return pe(()=>{s.value&&ge(s.value)}),(S,C)=>(g(),$(W,null,[_(l(Et),{title:st.value},null,8,["title"]),_($t,null,{default:E(()=>[n("div",eo,[_(ua,{chats:e.value,"active-chat":s.value,"has-unused-new-chat":Ee.value,"is-open":G.value,onNewChat:ve,onSelectChat:le,onDeleteChat:lt,onUpdateTitle:it,onClose:ct},null,8,["chats","active-chat","has-unused-new-chat","is-open"]),n("div",to,[_(Ra,{"native-language":Qe.value,"target-language":et.value,"proficiency-level":y.value||b.value,"proficiency-label":tt.value,"auto-update-proficiency":D.value,onSettings:ut,onToggleSidebar:dt},null,8,["native-language","target-language","proficiency-level","proficiency-label","auto-update-proficiency"]),n("div",{ref_key:"chatContainer",ref:i,"data-test":"chat-container",class:"flex-1 overflow-y-auto px-4 py-4 sm:py-6"},[!s.value&&e.value.length===0?(g(),$("div",so,[n("div",ao,[C[7]||(C[7]=n("div",{class:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-blue-100 sm:mb-6 sm:h-20 sm:w-20"},[n("svg",{class:"h-8 w-8 text-blue-600 sm:h-10 sm:w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),C[8]||(C[8]=n("h2",{class:"mb-2 text-xl font-semibold text-gray-900 sm:text-2xl"},"Start Your Language Journey ",-1)),n("p",no,"Practice "+L(v.value)+" with AI-powered conversations tailored to your level",1),n("button",{onClick:ve,class:"mb-4 inline-flex items-center gap-2 rounded-lg bg-blue-600 px-5 py-2.5 text-sm font-medium text-white transition-colors hover:bg-blue-700 sm:mb-6 sm:px-6 sm:py-3 sm:text-base"},[...C[2]||(C[2]=[n("svg",{class:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),z(" Start New Conversation ",-1)])]),n("div",oo,[n("div",ro,[C[3]||(C[3]=n("div",{class:"mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-green-100 mx-auto sm:h-10 sm:w-10"},[n("svg",{class:"h-4 w-4 text-green-600 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),C[4]||(C[4]=n("h3",{class:"mb-1 text-sm font-medium text-gray-900 text-center sm:text-base"},"Adaptive Learning",-1)),n("p",lo,"AI adjusts to your "+L(b.value)+" level",1)]),C[5]||(C[5]=n("div",{class:"rounded-lg border border-gray-200 bg-white p-3 sm:p-4"},[n("div",{class:"mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-purple-100 mx-auto sm:h-10 sm:w-10"},[n("svg",{class:"h-4 w-4 text-purple-600 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})])]),n("h3",{class:"mb-1 text-sm font-medium text-gray-900 text-center sm:text-base"},"Natural Conversation"),n("p",{class:"text-xs text-gray-600 text-center sm:text-sm"},"Practice real-world dialogue ")],-1)),C[6]||(C[6]=n("div",{class:"rounded-lg border border-gray-200 bg-white p-3 sm:p-4"},[n("div",{class:"mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-orange-100 mx-auto sm:h-10 sm:w-10"},[n("svg",{class:"h-4 w-4 text-orange-600 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),n("h3",{class:"mb-1 text-sm font-medium text-gray-900 text-center sm:text-base"},"Instant Feedback"),n("p",{class:"text-xs text-gray-600 text-center sm:text-sm"},"Get corrections and suggestions")],-1))])])])):(g(),$("div",io,[(g(!0),$(W,null,oe(o.value,h=>(g(),$(W,{key:h.id},[h.message_type==="correction"&&h.correction_data?(g(),T(hn,{key:0,content:h.content,"correction-data":h.correction_data,timestamp:new Date(h.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},null,8,["content","correction-data","timestamp"])):h.sender_type!=="system"?(g(),T(Za,{key:1,content:h.content,translation:h.translation,role:h.sender_type,timestamp:new Date(h.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"is-analyzing":h.isAnalyzing,"disable-typewriter":h.disableTypewriter},null,8,["content","translation","role","timestamp","is-analyzing","disable-typewriter"])):I("",!0)],64))),128)),d.value?(g(),T(Mn,{key:0})):I("",!0)]))],512),_(In,{"is-service-down":f.value},null,8,["is-service-down"]),_(On,{modelValue:r.value,"onUpdate:modelValue":C[0]||(C[0]=h=>r.value=h),disabled:at.value,onSend:rt,ref_key:"chatInputRef",ref:m},null,8,["modelValue","disabled"])])]),s.value?(g(),T(Qn,{key:0,open:B.value,"onUpdate:open":C[1]||(C[1]=h=>B.value=h),"chat-session-id":s.value,"native-language":u.value||k.value,"target-language":c.value||v.value,"proficiency-level":y.value||b.value,"localize-corrections":x.value,"localize-insights":p.value,onUpdated:pt},null,8,["open","chat-session-id","native-language","target-language","proficiency-level","localize-corrections","localize-insights"])):I("",!0)]),_:1})],64))}});export{ko as default};
