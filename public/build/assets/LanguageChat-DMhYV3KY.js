import{p as A,q as _,B as J,E as Z,D as ze,d as O,Q as ft,r as P,b as i,i as T,w as E,G as z,o as g,y as ee,R as oe,S as Ne,U as gt,C as fe,a as w,j as F,V as vt,L as mt,M as yt,c as D,F as H,e as a,l as pe,n as I,g as N,m as re,f as ht,k as ce,N as xt,t as L,J as qe,T as bt,W as G,X as _t,I as wt,Y as kt,Z as Ct,_ as Se,K as Dt,h as Et}from"./app-CjSgiM_d.js";import{_ as $t}from"./AppShell.vue_vue_type_script_setup_true_lang-DDErQDYD.js";import{_ as St}from"./AppLogo.vue_vue_type_script_setup_true_lang-BYezj4Ok.js";import{P as te,b as q,_ as je,a as Oe}from"./Spinner.vue_vue_type_script_setup_true_lang-C7FpE8eZ.js";import{g as X,u as Le,b as Ee,P as Re,C as Ot,a as Ue,c as Ve}from"./check-Bk0BIXSE.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as We}from"./createContext-q-OT4Nnw.js";import{c as Lt,d as Tt,i as ge,e as Te,f as Pt,u as Mt,b as At,a as R,o as Bt,g as It,h as Ft}from"./useForwardExpose-C5TLUQno.js";import{c as se}from"./utils-CDN07tui.js";import{_ as xe}from"./Label.vue_vue_type_script_setup_true_lang-B7e8j2O5.js";import{_ as Pe}from"./LanguageSelect.vue_vue_type_script_setup_true_lang-H9ykK9ZB.js";import{u as zt}from"./useLanguageOptions-Bb03pi4c.js";function He(t,n,e){const s=e.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:e});n&&s.addEventListener(t,n,{once:!0}),s.dispatchEvent(o)}const[Nt]=We("ConfigProvider");function be(t){if(t===null||typeof t!="object")return!1;const n=Object.getPrototypeOf(t);return n!==null&&n!==Object.prototype&&Object.getPrototypeOf(n)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Ce(t,n,e=".",s){if(!be(n))return Ce(t,{},e,s);const o=Object.assign({},n);for(const r in t){if(r==="__proto__"||r==="constructor")continue;const d=t[r];d!=null&&(s&&s(o,r,d,e)||(Array.isArray(d)&&Array.isArray(o[r])?o[r]=[...d,...o[r]]:be(d)&&be(o[r])?o[r]=Ce(d,o[r],(e?`${e}.`:"")+r.toString(),s):o[r]=d))}return o}function qt(t){return(...n)=>n.reduce((e,s)=>Ce(e,s,"",t),{})}const jt=qt(),Rt=Lt(()=>{const t=_(new Map),n=_(),e=A(()=>{for(const d of t.value.values())if(d)return!0;return!1}),s=Nt({scrollBody:_(!0)});let o=null;const r=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=n.value??"",Te&&o?.(),n.value=void 0};return J(e,(d,f)=>{if(!ge)return;if(!d){f&&r();return}n.value===void 0&&(n.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,m={padding:l,margin:0},u=s.scrollBody?.value?typeof s.scrollBody.value=="object"?jt({padding:s.scrollBody.value.padding===!0?l:s.scrollBody.value.padding,margin:s.scrollBody.value.margin===!0?l:s.scrollBody.value.margin},m):m:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),Te&&(o=Pt(document,"touchmove",c=>Vt(c),{passive:!1})),Z(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function Ut(t){const n=Math.random().toString(36).substring(2,7),e=Rt();e.value.set(n,t);const s=A({get:()=>e.value.get(n)??!1,set:o=>e.value.set(n,o)});return Tt(()=>{e.value.delete(n)}),s}function Xe(t){const n=window.getComputedStyle(t);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&t.clientWidth<t.scrollWidth||n.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const e=t.parentNode;return!(e instanceof Element)||e.tagName==="BODY"?!1:Xe(e)}}function Vt(t){const n=t||window.event,e=n.target;return e instanceof Element&&Xe(e)?!1:n.touches.length>1?!0:(n.preventDefault&&n.cancelable&&n.preventDefault(),!1)}var Kt=function(t){if(typeof document>"u")return null;var n=Array.isArray(t)?t[0]:t;return n.ownerDocument.body},Q=new WeakMap,ue=new WeakMap,de={},_e=0,Je=function(t){return t&&(t.host||Je(t.parentNode))},Wt=function(t,n){return n.map(function(e){if(t.contains(e))return e;var s=Je(e);return s&&t.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e})},Ht=function(t,n,e,s){var o=Wt(n,Array.isArray(t)?t:[t]);de[e]||(de[e]=new WeakMap);var r=de[e],d=[],f=new Set,l=new Set(o),m=function(c){!c||f.has(c)||(f.add(c),m(c.parentNode))};o.forEach(m);var u=function(c){!c||l.has(c)||Array.prototype.forEach.call(c.children,function(y){if(f.has(y))u(y);else try{var h=y.getAttribute(s),p=h!==null&&h!=="false",k=(Q.get(y)||0)+1,v=(r.get(y)||0)+1;Q.set(y,k),r.set(y,v),d.push(y),k===1&&p&&ue.set(y,!0),v===1&&y.setAttribute(e,"true"),p||y.setAttribute(s,"true")}catch(S){console.error("aria-hidden: cannot operate on ",y,S)}})};return u(n),f.clear(),_e++,function(){d.forEach(function(c){var y=Q.get(c)-1,h=r.get(c)-1;Q.set(c,y),r.set(c,h),y||(ue.has(c)||c.removeAttribute(s),ue.delete(c)),h||c.removeAttribute(e)}),_e--,_e||(Q=new WeakMap,Q=new WeakMap,ue=new WeakMap,de={})}},Xt=function(t,n,e){e===void 0&&(e="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),o=Kt(t);return o?(s.push.apply(s,Array.from(o.querySelectorAll("[aria-live], script"))),Ht(s,o,e,"aria-hidden")):function(){return null}};function Jt(t){let n;J(()=>Mt(t),e=>{e?n=Xt(e):n&&n()}),ze(()=>{n&&n()})}const[K,Yt]=We("DialogRoot");var Gt=O({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:n}){const e=t,o=At(e,"open",n,{defaultValue:e.defaultOpen,passive:e.open===void 0}),r=_(),d=_(),{modal:f}=ft(e);return Yt({open:o,modal:f,openModal:()=>{o.value=!0},onOpenChange:l=>{o.value=l},onOpenToggle:()=>{o.value=!o.value},contentId:"",titleId:"",descriptionId:"",triggerElement:r,contentElement:d}),(l,m)=>P(l.$slots,"default",{open:i(o),close:()=>o.value=!1})}}),Zt=Gt,Qt=O({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const n=t;R();const e=K();return(s,o)=>(g(),T(i(te),z(n,{type:s.as==="button"?"button":void 0,onClick:o[0]||(o[0]=r=>i(e).onOpenChange(!1))}),{default:E(()=>[P(s.$slots,"default")]),_:3},16,["type"]))}}),es=Qt;const ts="dismissableLayer.pointerDownOutside",ss="dismissableLayer.focusOutside";function Ye(t,n){const e=n.closest("[data-dismissable-layer]"),s=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),o=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(e&&(s===e||o.indexOf(s)<o.indexOf(e)))}function as(t,n,e=!0){const s=n?.value?.ownerDocument??globalThis?.document,o=_(!1),r=_(()=>{});return ee(d=>{if(!ge||!oe(e))return;const f=async m=>{const u=m.target;if(!(!n?.value||!u)){if(Ye(n.value,u)){o.value=!1;return}if(m.target&&!o.value){let y=function(){He(ts,t,c)};const c={originalEvent:m};m.pointerType==="touch"?(s.removeEventListener("click",r.value),r.value=y,s.addEventListener("click",r.value,{once:!0})):y()}else s.removeEventListener("click",r.value);o.value=!1}},l=window.setTimeout(()=>{s.addEventListener("pointerdown",f)},0);d(()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",f),s.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>{oe(e)&&(o.value=!0)}}}function ns(t,n,e=!0){const s=n?.value?.ownerDocument??globalThis?.document,o=_(!1);return ee(r=>{if(!ge||!oe(e))return;const d=async f=>{if(!n?.value)return;await Z(),await Z();const l=f.target;!n.value||!l||Ye(n.value,l)||f.target&&!o.value&&He(ss,t,{originalEvent:f})};s.addEventListener("focusin",d),r(()=>s.removeEventListener("focusin",d))}),{onFocusCapture:()=>{oe(e)&&(o.value=!0)},onBlurCapture:()=>{oe(e)&&(o.value=!1)}}}const V=Ne({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var os=O({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:n}){const e=t,s=n,{forwardRef:o,currentElement:r}=R(),d=A(()=>r.value?.ownerDocument??globalThis.document),f=A(()=>V.layersRoot),l=A(()=>r.value?Array.from(f.value).indexOf(r.value):-1),m=A(()=>V.layersWithOutsidePointerEventsDisabled.size>0),u=A(()=>{const p=Array.from(f.value),[k]=[...V.layersWithOutsidePointerEventsDisabled].slice(-1),v=p.indexOf(k);return l.value>=v}),c=as(async p=>{const k=[...V.branches].some(v=>v?.contains(p.target));!u.value||k||(s("pointerDownOutside",p),s("interactOutside",p),await Z(),p.defaultPrevented||s("dismiss"))},r),y=ns(p=>{[...V.branches].some(v=>v?.contains(p.target))||(s("focusOutside",p),s("interactOutside",p),p.defaultPrevented||s("dismiss"))},r);Bt("Escape",p=>{l.value===f.value.size-1&&(s("escapeKeyDown",p),p.defaultPrevented||s("dismiss"))});let h;return ee(p=>{r.value&&(e.disableOutsidePointerEvents&&(V.layersWithOutsidePointerEventsDisabled.size===0&&(h=d.value.body.style.pointerEvents,d.value.body.style.pointerEvents="none"),V.layersWithOutsidePointerEventsDisabled.add(r.value)),f.value.add(r.value),p(()=>{e.disableOutsidePointerEvents&&V.layersWithOutsidePointerEventsDisabled.size===1&&(d.value.body.style.pointerEvents=h)}))}),ee(p=>{p(()=>{r.value&&(f.value.delete(r.value),V.layersWithOutsidePointerEventsDisabled.delete(r.value))})}),(p,k)=>(g(),T(i(te),{ref:i(o),"as-child":p.asChild,as:p.as,"data-dismissable-layer":"",style:gt({pointerEvents:m.value?u.value?"auto":"none":void 0}),onFocusCapture:i(y).onFocusCapture,onBlurCapture:i(y).onBlurCapture,onPointerdownCapture:i(c).onPointerDownCapture},{default:E(()=>[P(p.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),rs=os;const ls=It(()=>_([]));function is(){const t=ls();return{add(n){const e=t.value[0];n!==e&&e?.pause(),t.value=Me(t.value,n),t.value.unshift(n)},remove(n){t.value=Me(t.value,n),t.value[0]?.resume()}}}function Me(t,n){const e=[...t],s=e.indexOf(n);return s!==-1&&e.splice(s,1),e}function us(t){return t.filter(n=>n.tagName!=="A")}const we="focusScope.autoFocusOnMount",ke="focusScope.autoFocusOnUnmount",Ae={bubbles:!1,cancelable:!0};function ds(t,{select:n=!1}={}){const e=X();for(const s of t)if(W(s,{select:n}),X()!==e)return!0}function cs(t){const n=Ge(t),e=Be(n,t),s=Be(n.reverse(),t);return[e,s]}function Ge(t){const n=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)n.push(e.currentNode);return n}function Be(t,n){for(const e of t)if(!ps(e,{upTo:n}))return e}function ps(t,{upTo:n}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(n!==void 0&&t===n)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function fs(t){return t instanceof HTMLInputElement&&"select"in t}function W(t,{select:n=!1}={}){if(t&&t.focus){const e=X();t.focus({preventScroll:!0}),t!==e&&fs(t)&&n&&t.select()}}var gs=O({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:n}){const e=t,s=n,{currentRef:o,currentElement:r}=R(),d=_(null),f=is(),l=Ne({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});ee(u=>{if(!ge)return;const c=r.value;if(!e.trapped)return;function y(v){if(l.paused||!c)return;const S=v.target;c.contains(S)?d.value=S:W(d.value,{select:!0})}function h(v){if(l.paused||!c)return;const S=v.relatedTarget;S!==null&&(c.contains(S)||W(d.value,{select:!0}))}function p(v){c.contains(d.value)||W(c)}document.addEventListener("focusin",y),document.addEventListener("focusout",h);const k=new MutationObserver(p);c&&k.observe(c,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",h),k.disconnect()})}),ee(async u=>{const c=r.value;if(await Z(),!c)return;f.add(l);const y=X();if(!c.contains(y)){const p=new CustomEvent(we,Ae);c.addEventListener(we,k=>s("mountAutoFocus",k)),c.dispatchEvent(p),p.defaultPrevented||(ds(us(Ge(c)),{select:!0}),X()===y&&W(c))}u(()=>{c.removeEventListener(we,v=>s("mountAutoFocus",v));const p=new CustomEvent(ke,Ae),k=v=>{s("unmountAutoFocus",v)};c.addEventListener(ke,k),c.dispatchEvent(p),setTimeout(()=>{p.defaultPrevented||W(y??document.body,{select:!0}),c.removeEventListener(ke,k),f.remove(l)},0)})});function m(u){if(!e.loop&&!e.trapped||l.paused)return;const c=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,y=X();if(c&&y){const h=u.currentTarget,[p,k]=cs(h);p&&k?!u.shiftKey&&y===k?(u.preventDefault(),e.loop&&W(p,{select:!0})):u.shiftKey&&y===p&&(u.preventDefault(),e.loop&&W(k,{select:!0})):y===h&&u.preventDefault()}}return(u,c)=>(g(),T(i(te),{ref_key:"currentRef",ref:o,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:m},{default:E(()=>[P(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),vs=gs;function ms(t){return t?"open":"closed"}var ys=O({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:n}){const e=t,s=n,o=K(),{forwardRef:r,currentElement:d}=R();return o.titleId||=Le(void 0,"reka-dialog-title"),o.descriptionId||=Le(void 0,"reka-dialog-description"),fe(()=>{o.contentElement=d,X()!==document.body&&(o.triggerElement.value=X())}),(f,l)=>(g(),T(i(vs),{"as-child":"",loop:"",trapped:e.trapFocus,onMountAutoFocus:l[5]||(l[5]=m=>s("openAutoFocus",m)),onUnmountAutoFocus:l[6]||(l[6]=m=>s("closeAutoFocus",m))},{default:E(()=>[w(i(rs),z({id:i(o).contentId,ref:i(r),as:f.as,"as-child":f.asChild,"disable-outside-pointer-events":f.disableOutsidePointerEvents,role:"dialog","aria-describedby":i(o).descriptionId,"aria-labelledby":i(o).titleId,"data-state":i(ms)(i(o).open.value)},f.$attrs,{onDismiss:l[0]||(l[0]=m=>i(o).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=m=>s("escapeKeyDown",m)),onFocusOutside:l[2]||(l[2]=m=>s("focusOutside",m)),onInteractOutside:l[3]||(l[3]=m=>s("interactOutside",m)),onPointerDownOutside:l[4]||(l[4]=m=>s("pointerDownOutside",m))}),{default:E(()=>[P(f.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Ze=ys,hs=O({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:n}){const e=t,s=n,o=K(),r=Ee(s),{forwardRef:d,currentElement:f}=R();return Jt(f),(l,m)=>(g(),T(Ze,z({...e,...i(r)},{ref:i(d),"trap-focus":i(o).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:m[0]||(m[0]=u=>{u.defaultPrevented||(u.preventDefault(),i(o).triggerElement.value?.focus())}),onPointerDownOutside:m[1]||(m[1]=u=>{const c=u.detail.originalEvent,y=c.button===0&&c.ctrlKey===!0;(c.button===2||y)&&u.preventDefault()}),onFocusOutside:m[2]||(m[2]=u=>{u.preventDefault()})}),{default:E(()=>[P(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),xs=hs,bs=O({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:n}){const e=t,o=Ee(n);R();const r=K(),d=_(!1),f=_(!1);return(l,m)=>(g(),T(Ze,z({...e,...i(o)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:m[0]||(m[0]=u=>{u.defaultPrevented||(d.value||i(r).triggerElement.value?.focus(),u.preventDefault()),d.value=!1,f.value=!1}),onInteractOutside:m[1]||(m[1]=u=>{u.defaultPrevented||(d.value=!0,u.detail.originalEvent.type==="pointerdown"&&(f.value=!0));const c=u.target;i(r).triggerElement.value?.contains(c)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&f.value&&u.preventDefault()})}),{default:E(()=>[P(l.$slots,"default")]),_:3},16))}}),_s=bs,ws=O({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:n}){const e=t,s=n,o=K(),r=Ee(s),{forwardRef:d}=R();return(f,l)=>(g(),T(i(Re),{present:f.forceMount||i(o).open.value},{default:E(()=>[i(o).modal.value?(g(),T(xs,z({key:0,ref:i(d)},{...e,...i(r),...f.$attrs}),{default:E(()=>[P(f.$slots,"default")]),_:3},16)):(g(),T(_s,z({key:1,ref:i(d)},{...e,...i(r),...f.$attrs}),{default:E(()=>[P(f.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),ks=ws,Cs=O({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(t){const n=t;R();const e=K();return(s,o)=>(g(),T(i(te),z(n,{id:i(e).descriptionId}),{default:E(()=>[P(s.$slots,"default")]),_:3},16,["id"]))}}),Ds=Cs,Es=O({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const n=K();return Ut(!0),R(),(e,s)=>(g(),T(i(te),{as:e.as,"as-child":e.asChild,"data-state":i(n).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:E(()=>[P(e.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),$s=Es,Ss=O({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const n=K(),{forwardRef:e}=R();return(s,o)=>i(n)?.modal.value?(g(),T(i(Re),{key:0,present:s.forceMount||i(n).open.value},{default:E(()=>[w($s,z(s.$attrs,{ref:i(e),as:s.as,"as-child":s.asChild}),{default:E(()=>[P(s.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):F("v-if",!0)}}),Os=Ss,Ls=O({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const n=Ft();return(e,s)=>i(n)||e.forceMount?(g(),T(vt,{key:0,to:e.to,disabled:e.disabled,defer:e.defer},[P(e.$slots,"default")],8,["to","disabled","defer"])):F("v-if",!0)}}),Ts=Ls,Ps=O({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const n=t;return(e,s)=>(g(),T(i(Ts),mt(yt(n)),{default:E(()=>[P(e.$slots,"default")]),_:3},16))}}),Ms=Ps,As=O({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const n=t,e=K();return R(),(s,o)=>(g(),T(i(te),z(n,{id:i(e).titleId}),{default:E(()=>[P(s.$slots,"default")]),_:3},16,["id"]))}}),Bs=As;const Is=q("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Fs=q("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Qe=q("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const zs=q("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Ie=q("LanguagesIcon",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const Fe=q("LightbulbIcon",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const Ns=q("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const qs=q("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const js=q("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Rs=q("SendIcon",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const Us=q("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Vs=q("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Ks=q("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const De=q("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ws={class:"border-b border-gray-200 px-4 py-4"},Hs={class:"flex items-center justify-between"},Xs={class:"border-b border-gray-200 px-4 py-4"},Js=["disabled"],Ys={"data-test":"chat-list",class:"flex-1 overflow-y-auto p-2"},Gs={class:"space-y-1"},Zs=["onClick"],Qs={class:"min-w-0 flex-1"},ea=["onKeydown"],ta=["onClick"],sa={key:1,class:"group/title"},aa={class:"flex items-center gap-1"},na=["title"],oa=["onClick"],ra={class:"mt-0.5 truncate text-xs text-gray-500"},la=["onClick"],ia={class:"border-t border-gray-200 p-3 lg:hidden"},ua=O({__name:"ChatSidebar",props:{chats:{},activeChat:{},hasUnusedNewChat:{type:Boolean},isOpen:{type:Boolean,default:!1}},emits:["new-chat","select-chat","delete-chat","update-title","close"],setup(t,{emit:n}){const e=t,s=n,o=_(null),r=_(""),d=()=>{e.hasUnusedNewChat||s("new-chat")},f=h=>{o.value!==h&&(s("select-chat",h),s("close"))},l=(h,p)=>{h.stopPropagation(),confirm("Are you sure you want to delete this conversation?")&&s("delete-chat",p)},m=(h,p)=>{h.stopPropagation(),o.value=p.id,r.value=p.title},u=(h,p)=>{h.stopPropagation(),r.value.trim()&&s("update-title",p,r.value.trim()),o.value=null,r.value=""},c=h=>{h.stopPropagation(),o.value=null,r.value=""},y=(h,p)=>{h.key==="Enter"?(h.preventDefault(),u(h,p)):h.key==="Escape"&&c(h)};return(h,p)=>(g(),D(H,null,[t.isOpen?(g(),D("div",{key:0,class:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:p[0]||(p[0]=k=>s("close"))})):F("",!0),a("div",{class:I(["fixed lg:static inset-y-0 left-0 z-50 flex h-screen w-64 flex-col border-r border-gray-200 bg-white transform transition-transform duration-300 lg:translate-x-0",t.isOpen?"translate-x-0":"-translate-x-full"])},[a("div",Ws,[a("div",Hs,[w(i(pe),{href:h.route("language-chat.index")},{default:E(()=>[w(St,{size:"sm"})]),_:1},8,["href"]),a("button",{onClick:p[1]||(p[1]=k=>s("close")),class:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close sidebar"},[w(i(De),{class:"h-5 w-5 text-gray-600"})])])]),a("div",Xs,[a("button",{"data-test":"new-chat-button",onClick:d,disabled:t.hasUnusedNewChat,class:I(["flex w-full items-center justify-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors",t.hasUnusedNewChat?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},[w(i(js),{class:"h-4 w-4"}),p[4]||(p[4]=N(" New Chat ",-1))],10,Js)]),a("div",Ys,[a("div",Gs,[(g(!0),D(H,null,re(t.chats,k=>(g(),D("div",{key:k.id,"data-test":"chat-item",onClick:v=>f(k.id),class:I(["group flex w-full items-start gap-3 rounded-lg px-3 py-2.5 text-left transition-colors cursor-pointer",t.activeChat===k.id?"bg-gray-100 hover:bg-gray-200":"hover:bg-gray-100"])},[(g(),D("svg",{class:I(["mt-0.5 h-4 w-4 flex-shrink-0",t.activeChat===k.id?"text-gray-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...p[5]||(p[5]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)])],2)),a("div",Qs,[o.value===k.id?(g(),D("div",{key:0,class:"flex items-center gap-1",onClick:p[3]||(p[3]=ht(()=>{},["stop"]))},[ce(a("input",{"onUpdate:modelValue":p[2]||(p[2]=v=>r.value=v),onKeydown:v=>y(v,k.id),type:"text",class:"flex-1 rounded border border-blue-500 px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",autofocus:""},null,40,ea),[[xt,r.value]]),a("button",{onClick:v=>u(v,k.id),class:"p-1 rounded hover:bg-green-100",title:"Save"},[w(i(Ot),{class:"h-4 w-4 text-green-600"})],8,ta),a("button",{onClick:c,class:"p-1 rounded hover:bg-red-100",title:"Cancel"},[w(i(De),{class:"h-4 w-4 text-red-600"})])])):(g(),D("div",sa,[a("div",aa,[a("p",{class:I(["truncate text-sm font-medium",t.activeChat===k.id?"text-gray-900":"text-gray-700"]),title:k.title},L(k.title),11,na),a("button",{onClick:v=>m(v,k),class:"flex-shrink-0 opacity-0 group-hover/title:opacity-100 p-0.5 rounded hover:bg-gray-200",title:"Edit title"},[w(i(qs),{class:"h-3 w-3 text-gray-500"})],8,oa)]),a("p",ra,L(k.timestamp),1)]))]),a("button",{onClick:v=>l(v,k.id),class:"opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded hover:bg-red-50",title:"Delete conversation"},[w(i(Vs),{class:"h-4 w-4 text-gray-400 hover:text-red-600"})],8,la)],10,Zs))),128))])]),a("div",ia,[w(i(pe),{href:h.route("profile.edit"),class:"flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-100"},{default:E(()=>[...p[6]||(p[6]=[a("svg",{class:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),a("span",null,"Profile Settings",-1)])]),_:1},8,["href"])])],2)],64))}}),da={class:"relative"},ca={key:0,class:"fixed inset-x-4 top-16 sm:absolute sm:inset-x-auto sm:top-auto sm:right-0 mt-2 w-auto sm:w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-[600px] flex flex-col"},pa={class:"px-4 py-3 border-b border-gray-200 flex items-center justify-between"},fa={class:"overflow-y-auto flex-1"},ga={key:0,class:"p-8 text-center text-gray-500"},va={key:1,class:"p-8 text-center"},ma={class:"text-sm text-gray-600 mb-4"},ya={key:2,class:"p-8 text-center text-gray-500"},ha={key:3,class:"divide-y divide-gray-200"},xa={class:"flex items-start gap-3"},ba={class:"text-2xl flex-shrink-0"},_a={class:"flex-1 min-w-0"},wa={class:"flex items-start justify-between gap-2"},ka={class:"font-semibold text-gray-900 text-sm"},Ca={class:"flex items-center gap-1 flex-shrink-0"},Da=["onClick"],Ea=["onClick"],$a={class:"text-sm text-gray-600 mt-1"},Sa={class:"text-xs text-gray-400 mt-2"},Oa=O({__name:"InsightPanel",setup(t){const n=qe(),e=_([]),s=_(0),o=_(!1),r=_(!1),d=_(!1),f=_("");let l=null;const m=A(()=>!!n.props.auth?.user),u=_(!1);let c=null;const y=_(!1);J(s,(M,b)=>{y.value&&M>b&&(u.value=!0,c&&clearTimeout(c),c=setTimeout(()=>{u.value=!1},4e3))});const h=async(M=!1)=>{if(m.value){M||(o.value=!0);try{const{data:b}=await G.get("/insights");d.value=!1,f.value="",JSON.stringify(e.value)!==JSON.stringify(b.insights)&&(e.value=b.insights),s.value!==b.unread_count&&(s.value=b.unread_count)}catch(b){G.isAxiosError(b)&&b.response?.status===401?l!==null&&(clearInterval(l),l=null):G.isAxiosError(b)&&b.response?.status===503?(d.value=!0,f.value=b.response?.data?.message||"Insights service is temporarily unavailable"):G.isAxiosError(b)&&!b.response?(d.value=!0,f.value="Unable to connect to insights service. Please check if the backend is running."):console.error("Error fetching insights:",b)}finally{M||(o.value=!1)}}},p=async M=>{try{await G.patch(`/insights/${M}/read`);const b=e.value.find(B=>B.id===M);b&&(b.is_read=!0,s.value=Math.max(0,s.value-1))}catch(b){console.error("Error marking insight as read:",b)}},k=async()=>{try{await G.post("/insights/mark-all-read"),e.value.forEach(M=>{M.is_read=!0}),s.value=0}catch(M){console.error("Error marking all as read:",M)}},v=async M=>{try{await G.delete(`/insights/${M}`);const b=e.value.findIndex(B=>B.id===M);if(b!==-1){const B=!e.value[b].is_read;e.value.splice(b,1),B&&(s.value=Math.max(0,s.value-1))}}catch(b){console.error("Error deleting insight:",b)}},S=M=>{switch(M){case"grammar_pattern":return"ðŸ“";case"vocabulary_strength":return"ðŸ“š";case"proficiency_suggestion":return"ðŸŽ¯";case"system_error":return"âš ï¸";default:return"ðŸ’¡"}},ae=()=>{r.value=!r.value,r.value&&h()};return fe(()=>{m.value&&(h().finally(()=>{y.value=!0}),l=setInterval(()=>h(!0),3e4))}),ze(()=>{l!==null&&(clearInterval(l),l=null),c&&clearTimeout(c)}),(M,b)=>(g(),D("div",da,[a("button",{onClick:ae,class:I(["relative p-2 text-gray-600 hover:text-gray-900 transition-colors",{"text-blue-600":r.value}])},[b[1]||(b[1]=a("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),s.value>0?(g(),D("span",{key:0,class:I(["absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/5 -translate-y-1/5 bg-red-600 rounded-full transition-all origin-center",{"animate-pulse-subtle":u.value}])},L(s.value),3)):F("",!0)],2),w(bt,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:E(()=>[r.value?(g(),D("div",ca,[a("div",pa,[b[2]||(b[2]=a("h3",{class:"text-lg font-semibold text-gray-900"},"LangGPT Insights",-1)),e.value.length>0&&s.value>0?(g(),D("button",{key:0,onClick:k,class:"text-sm text-blue-600 hover:text-blue-800"}," Mark all read ")):F("",!0)]),a("div",fa,[o.value?(g(),D("div",ga,[w(je,{class:"h-8 w-8 mx-auto mb-2"}),b[3]||(b[3]=N(" Loading insights... ",-1))])):d.value?(g(),D("div",va,[b[4]||(b[4]=a("div",{class:"text-4xl mb-3"},"âš ï¸",-1)),b[5]||(b[5]=a("p",{class:"font-medium text-gray-900 mb-2"},"Insights Service Issue",-1)),a("p",ma,L(f.value),1),b[6]||(b[6]=a("p",{class:"text-xs text-gray-500"},"The system administrator has been notified. Your conversations are still being saved.",-1))])):e.value.length===0?(g(),D("div",ya,[...b[7]||(b[7]=[a("div",{class:"text-4xl mb-2"},"ðŸ’¡",-1),a("p",{class:"font-medium"},"No insights yet",-1),a("p",{class:"text-sm mt-1"},"Keep chatting to receive personalized feedback!",-1)])])):(g(),D("div",ha,[(g(!0),D(H,null,re(e.value,B=>(g(),D("div",{key:B.id,class:I(["p-4 hover:bg-gray-50 transition-colors",{"bg-blue-50/30":!B.is_read}])},[a("div",xa,[a("div",ba,L(S(B.insight_type)),1),a("div",_a,[a("div",wa,[a("h4",ka,L(B.title),1),a("div",Ca,[B.is_read?F("",!0):(g(),D("button",{key:0,onClick:ve=>p(B.id),class:"text-blue-600 hover:text-blue-800 p-1",title:"Mark as read"},[...b[8]||(b[8]=[a("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,Da)),a("button",{onClick:ve=>v(B.id),class:"text-gray-400 hover:text-red-600 p-1",title:"Dismiss"},[...b[9]||(b[9]=[a("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ea)])]),a("p",$a,L(B.message),1),a("p",Sa,L(new Date(B.created_at).toLocaleDateString()),1)])])],2))),128))]))])])):F("",!0)]),_:1}),r.value?(g(),D("div",{key:0,onClick:b[0]||(b[0]=B=>r.value=!1),class:"fixed inset-0 z-40 bg-black/20 sm:bg-transparent"})):F("",!0)]))}}),La={class:"border-b border-gray-200 bg-white px-4 py-3 sm:px-6 sm:py-4"},Ta={class:"flex items-start justify-between gap-3"},Pa={class:"flex min-w-0 flex-1 items-center gap-3"},Ma={class:"flex items-center gap-2 sm:gap-3"},Aa={class:"mt-3 flex flex-wrap items-center gap-2 sm:mt-4 sm:gap-3"},Ba={"data-test":"native-language",class:"flex items-center gap-1.5 rounded-lg bg-blue-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},Ia={class:"flex items-center gap-1 text-sm sm:gap-1.5"},Fa={class:"text-gray-900"},za={"data-test":"target-language",class:"flex items-center gap-1.5 rounded-lg bg-green-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},Na={class:"flex items-center gap-1 text-sm sm:gap-1.5"},qa={class:"text-gray-900"},ja={"data-test":"proficiency-level",class:"flex items-center gap-1.5 rounded-lg bg-purple-50 px-2.5 py-1.5 sm:gap-2 sm:px-3"},Ra={class:"flex items-center gap-1 text-sm sm:gap-1.5"},Ua={class:"text-gray-900"},Va=O({__name:"ChatHeader",props:{nativeLanguage:{},targetLanguage:{},proficiencyLevel:{},proficiencyLabel:{},autoUpdateProficiency:{type:Boolean}},emits:["settings","toggleSidebar"],setup(t,{emit:n}){const e=t,s=n,o=()=>{s("settings")},r=()=>{s("toggleSidebar")},d=A(()=>e.proficiencyLevel?e.autoUpdateProficiency?`Dynamic (${e.proficiencyLabel?`${e.proficiencyLevel} - ${e.proficiencyLabel}`:e.proficiencyLevel})`:e.proficiencyLevel+(e.proficiencyLabel?` (${e.proficiencyLabel})`:""):e.autoUpdateProficiency?"Dynamic (Not Set)":"Not Set");return(f,l)=>(g(),D("div",La,[a("div",Ta,[a("div",Pa,[a("button",{onClick:r,class:"flex-shrink-0 rounded-lg p-2 text-gray-600 transition-colors hover:bg-gray-100 lg:hidden","aria-label":"Toggle sidebar"},[w(i(Ns),{class:"h-5 w-5"})]),l[0]||(l[0]=a("div",{class:"min-w-0 flex-1"},[a("h1",{class:"text-lg font-semibold text-gray-900 sm:text-xl"},"Language Exchange Chat"),a("p",{class:"hidden text-sm text-gray-500 sm:block"}," Practice your language skills with AI assistance ")],-1))]),a("div",Ma,[w(Oa),w(i(pe),{href:f.route("profile.edit"),class:"hidden rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:block"},{default:E(()=>[...l[1]||(l[1]=[N(" Profile ",-1)])]),_:1},8,["href"]),w(i(pe),{href:f.route("logout"),method:"post",as:"button",class:"rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:px-4"},{default:E(()=>[...l[2]||(l[2]=[a("span",{class:"hidden sm:inline"},"Log out",-1),a("span",{class:"sm:hidden"},"Logout",-1)])]),_:1},8,["href"])])]),a("div",Aa,[a("div",Ba,[w(i(Ie),{class:"h-4 w-4 flex-shrink-0 text-blue-600"}),a("div",Ia,[l[3]||(l[3]=a("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Native:",-1)),a("span",Fa,L(t.nativeLanguage),1)])]),w(i(Is),{class:"h-4 w-4 flex-shrink-0 text-gray-400"}),a("div",za,[w(i(Ie),{class:"h-4 w-4 flex-shrink-0 text-green-600"}),a("div",Na,[l[4]||(l[4]=a("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Target:",-1)),a("span",qa,L(t.targetLanguage),1)])]),l[7]||(l[7]=a("div",{class:"hidden h-4 w-px bg-gray-300 sm:block"},null,-1)),a("div",ja,[w(i(Fs),{class:"h-4 w-4 flex-shrink-0 text-purple-600"}),a("div",Ra,[l[5]||(l[5]=a("span",{class:"hidden font-medium text-gray-700 sm:inline"},"Level:",-1)),a("span",Ua,L(d.value),1)])]),a("button",{"data-test":"chat-settings-button",onClick:o,class:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-2.5 py-1.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:ml-2 sm:px-3",title:"Chat Settings"},[w(i(Us),{class:"h-4 w-4 flex-shrink-0"}),l[6]||(l[6]=a("span",{class:"hidden sm:inline"},"Chat Settings",-1))])])]))}}),Ka={class:"relative inline-block"},Wa={class:"invisible","aria-hidden":"true","data-test":"typewriter-size"},Ha=["dir"],Xa=O({__name:"TypewriterText",props:{text:{},speed:{default:30},disabled:{type:Boolean,default:!1}},emits:["complete"],setup(t,{emit:n}){const e=t,s=n,o=_(""),r=_("auto");let d=null;function f(u){const c=/[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]/,y=/[A-Za-z\u00C0-\u024F\u0400-\u04FF\u0370-\u03FF]/,h=c.test(u),p=y.test(u);return h&&p?"auto":h?"rtl":p?"ltr":"auto"}function l(){if(e.disabled){o.value=e.text,s("complete");return}if(o.value="",r.value=f(e.text),!e.text){s("complete");return}let u=0;function c(){u<e.text.length&&(o.value+=e.text[u],u++,u<e.text.length?d=setTimeout(c,e.speed):s("complete"))}d=setTimeout(c,0)}function m(){d&&(clearTimeout(d),d=null)}return J(()=>e.text,()=>{m(),l()},{immediate:!0}),_t(()=>{m()}),(u,c)=>(g(),D("span",Ka,[a("span",Wa,L(t.text),1),a("span",{class:"absolute inset-0","data-test":"typewriter-text",dir:r.value},L(o.value),9,Ha)]))}}),Ja={class:"flex-shrink-0"},Ya={class:"text-sm font-semibold"},Ga={class:"whitespace-pre-wrap break-words text-sm leading-relaxed"},Za={key:1},Qa={key:0,"data-test":"analyzing-indicator",class:"flex items-center gap-1"},en=O({__name:"ChatMessage",props:{content:{},role:{},timestamp:{},translation:{default:null},isAnalyzing:{type:Boolean},disableTypewriter:{type:Boolean,default:!1}},setup(t){return(n,e)=>(g(),D("div",{"data-test":"message-container",class:I(["flex gap-4",t.role==="user"?"flex-row-reverse":"flex-row"])},[a("div",Ja,[a("div",{"data-test":"message-avatar",class:I(["flex h-10 w-10 items-center justify-center rounded-full text-white",t.role==="user"?"bg-blue-600":"bg-gradient-to-br from-purple-600 to-blue-500"])},[a("span",Ya,L(t.role==="user"?"You":"AI"),1)],2)]),a("div",{"data-test":"message-content",class:I(["max-w-[70%] rounded-2xl px-4 py-3",t.role==="user"?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm ring-1 ring-gray-200"])},[a("p",Ga,[t.role==="assistant"&&!t.disableTypewriter?(g(),T(Xa,{key:0,text:t.translation||t.content,speed:30},null,8,["text"])):(g(),D("span",Za,L(t.translation||t.content),1))]),a("div",{class:I(["mt-2 flex items-center gap-2 text-xs",t.role==="user"?"text-blue-100":"text-gray-500"])},[a("span",null,L(t.timestamp),1),t.isAnalyzing?(g(),D("span",Qa,[w(je,{class:"h-3 w-3"}),e[0]||(e[0]=N(" Analyzing... ",-1))])):F("",!0)],2)],2)],2))}}),tn={class:"flex items-center justify-between mb-3"},sn={class:"flex items-center gap-2"},an={class:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3"},nn={class:"space-y-1"},on={class:"p-2 rounded bg-gray-100 dark:bg-gray-900 border-2 border-gray-300 dark:border-gray-600"},rn={class:"text-sm line-through text-gray-800 dark:text-gray-100"},ln={class:"space-y-1"},un={class:"text-xs font-semibold text-green-700 dark:text-green-300 uppercase tracking-wide flex items-center gap-1"},dn={class:"p-2 rounded bg-green-50 dark:bg-green-950/30 border-2 border-green-300 dark:border-green-700"},cn={class:"text-sm font-medium text-green-800 dark:text-green-200"},pn={class:"mb-3 p-3 rounded bg-white/50 dark:bg-gray-800/50"},fn={class:"text-sm text-gray-900 dark:text-gray-50"},gn={class:"mb-3 p-3 rounded bg-white/50 dark:bg-gray-800/50"},vn={class:"text-sm text-gray-900 dark:text-gray-50"},mn={key:0,class:"mb-2 p-3 rounded bg-white/50 dark:bg-gray-800/50"},yn={class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-2 flex items-center gap-1"},hn={class:"space-y-1"},xn={class:"text-xs text-gray-500 dark:text-gray-500 text-right mt-2"},bn=O({__name:"CorrectionMessage",props:{content:{},correctionData:{},timestamp:{}},setup(t){const n=t,e={offensive:"Offensive Language",meaningless:"Unclear Meaning",unnatural:"Unnatural Phrasing",archaic:"Archaic Expression",dangerous:"Potentially Harmful"},s={offensive:"text-red-700 dark:text-red-300",meaningless:"text-orange-700 dark:text-orange-300",unnatural:"text-yellow-700 dark:text-yellow-300",archaic:"text-blue-700 dark:text-blue-300",dangerous:"text-red-800 dark:text-red-200"},o={critical:"bg-red-200 text-red-900 dark:bg-red-900/40 dark:text-red-200",high:"bg-orange-200 text-orange-900 dark:bg-orange-900/40 dark:text-orange-200",medium:"bg-yellow-200 text-yellow-900 dark:bg-yellow-900/40 dark:text-yellow-200"},r={critical:"border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-950/30",high:"border-orange-300 dark:border-orange-700 bg-orange-50 dark:bg-orange-950/30",medium:"border-yellow-300 dark:border-yellow-700 bg-yellow-50 dark:bg-yellow-950/30"},d=A(()=>{switch(n.correctionData.severity){case"critical":return Qe;case"high":return Ks;default:return Fe}});return(f,l)=>(g(),D("div",{class:I(["px-4 py-3 rounded-lg border-2 my-3",r[t.correctionData.severity]])},[a("div",tn,[a("div",sn,[(g(),T(wt(d.value),{class:I(["w-5 h-5",s[t.correctionData.error_type]])},null,8,["class"])),a("span",{class:I(["font-semibold text-sm",s[t.correctionData.error_type]])},L(e[t.correctionData.error_type]),3)]),a("span",{class:I(["text-xs font-medium px-2 py-1 rounded-full uppercase tracking-wide",o[t.correctionData.severity]])},L(t.correctionData.severity),3)]),a("div",an,[a("div",nn,[l[0]||(l[0]=a("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-200 uppercase tracking-wide"}," Original ",-1)),a("div",on,[a("span",rn,L(t.correctionData.original_text),1)])]),a("div",ln,[a("div",un,[w(i(zs),{class:"w-3 h-3"}),l[1]||(l[1]=N(" Suggested ",-1))]),a("div",dn,[a("span",cn,L(t.correctionData.corrected_text),1)])])]),a("div",pn,[l[2]||(l[2]=a("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-1"}," Explanation ",-1)),a("p",fn,L(t.correctionData.explanation),1)]),a("div",gn,[l[3]||(l[3]=a("div",{class:"text-xs font-semibold text-gray-800 dark:text-gray-100 uppercase tracking-wide mb-1"}," Context ",-1)),a("p",vn,L(t.correctionData.context),1)]),t.correctionData.recommendations&&t.correctionData.recommendations.length>0?(g(),D("div",mn,[a("div",yn,[w(i(Fe),{class:"w-3 h-3"}),l[4]||(l[4]=N(" Recommendations ",-1))]),a("ul",hn,[(g(!0),D(H,null,re(t.correctionData.recommendations,(m,u)=>(g(),D("li",{key:u,class:"text-sm text-gray-900 dark:text-gray-50 flex items-start gap-2"},[l[5]||(l[5]=a("span",{class:"text-gray-400 dark:text-gray-500"},"â€¢",-1)),a("span",null,L(m),1)]))),128))])])):F("",!0),a("div",xn,L(t.timestamp),1)],2))}}),_n=O({inheritAttrs:!1,__name:"SendIcon",setup(t){return(n,e)=>(g(),T(i(Rs),z({class:"h-5 w-5"},n.$attrs),null,16))}}),wn={},kn={"data-test":"ai-disclaimer",class:"mt-2 flex flex-col gap-1 text-xs text-gray-500 sm:flex-row sm:items-center sm:justify-between sm:gap-0"};function Cn(t,n){return g(),D("div",kn,[...n[0]||(n[0]=[a("span",{class:"hidden sm:inline"},"Press Enter to send, Shift+Enter for new line",-1),a("span",{class:"sm:text-right"}," AI-generated responses may contain inaccuracies. Always verify important information. ",-1)])])}const Dn=Ke(wn,[["render",Cn]]),En={class:"border-t border-gray-200 bg-white px-3 py-2 sm:px-4 sm:py-4"},$n={class:"mx-auto max-w-3xl"},Sn={class:"relative flex items-end gap-2"},On=["value","disabled","placeholder"],Ln=["disabled"],Tn=O({__name:"ChatInput",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue","send"],setup(t,{expose:n,emit:e}){const s=t,o=e,r=_(null),d=A(()=>window.innerWidth<640?"Type your message...":"Type your message here... (Shift+Enter for new line)"),f=y=>{const h=y.target;o("update:modelValue",h.value)},l=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),s.modelValue.trim()&&!s.disabled&&o("send"))},m=()=>{s.modelValue.trim()&&!s.disabled&&o("send")},u=()=>!s.modelValue.trim()||s.disabled;return J(()=>s.disabled,(y,h)=>{h&&!y&&setTimeout(()=>{r.value?.focus()},100)}),fe(()=>{r.value?.focus()}),n({focus:()=>{r.value?.focus()}}),(y,h)=>(g(),D("div",En,[a("div",$n,[a("div",Sn,[a("textarea",{ref_key:"textareaRef",ref:r,value:t.modelValue,onInput:f,onKeydown:l,disabled:t.disabled,placeholder:d.value,rows:"1",class:"max-h-32 min-h-[44px] flex-1 resize-none rounded-xl border border-gray-300 px-3 py-2.5 pr-12 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 disabled:cursor-not-allowed disabled:opacity-50 sm:px-4 sm:py-3"},null,40,On),a("button",{"data-test":"send-button",onClick:m,disabled:u(),class:"absolute bottom-2 right-2 flex h-8 w-8 items-center justify-center rounded-lg bg-blue-600 text-white transition-all hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50"},[w(_n)],8,Ln)]),w(Dn)])]))}}),Pn={},Mn={class:"flex gap-4"};function An(t,n){return g(),D("div",Mn,[...n[0]||(n[0]=[kt('<div class="flex-shrink-0"><div data-test="typing-avatar" class="flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-purple-600 to-blue-500 text-white"><span class="text-sm font-semibold">AI</span></div></div><div data-test="typing-container" class="rounded-2xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-200"><div class="flex gap-1"><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400 [animation-delay:-0.3s]"></div><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400 [animation-delay:-0.15s]"></div><div data-test="typing-dot" class="h-2 w-2 animate-bounce rounded-full bg-gray-400"></div></div></div>',2)])])}const Bn=Ke(Pn,[["render",An]]),In={key:0,"data-test":"service-down-banner",class:"border-l-4 border-red-200 bg-red-50 p-4"},Fn={class:"flex items-start gap-3"},zn=O({__name:"ServiceDownBanner",props:{isServiceDown:{type:Boolean}},setup(t){return(n,e)=>t.isServiceDown?(g(),D("div",In,[a("div",Fn,[w(i(Qe),{"data-test":"alert-icon",class:"h-5 w-5 flex-shrink-0 text-red-600"}),e[0]||(e[0]=a("div",{class:"flex-1"},[a("h3",{class:"text-sm font-semibold text-red-800"}," Language processing service is currently unavailable "),a("p",{class:"mt-1 text-sm text-red-700"}," Chat functionality is temporarily disabled. Please try again later. ")],-1))])])):F("",!0)}}),Nn=O({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(t,{emit:n}){const o=Ue(t,n);return(r,d)=>(g(),T(i(Zt),z({"data-slot":"dialog"},i(o)),{default:E(()=>[P(r.$slots,"default")]),_:3},16))}}),qn=O({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(t){const n=t,e=A(()=>{const{class:s,...o}=n;return o});return(s,o)=>(g(),T(i(Os),z({"data-slot":"dialog-overlay"},e.value,{class:i(se)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",n.class)}),{default:E(()=>[P(s.$slots,"default")]),_:3},16,["class"]))}}),jn=O({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:n}){const e=t,s=n,o=A(()=>{const{class:d,...f}=e;return f}),r=Ue(o,s);return(d,f)=>(g(),T(i(Ms),null,{default:E(()=>[w(qn),w(i(ks),z({"data-slot":"dialog-content"},i(r),{class:i(se)("bg-white text-gray-900 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border border-gray-200 p-6 shadow-lg duration-200 sm:max-w-lg",e.class)}),{default:E(()=>[P(d.$slots,"default"),w(i(es),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},{default:E(()=>[w(i(De)),f[0]||(f[0]=a("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),Rn=O({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const n=t,e=A(()=>{const{class:o,...r}=n;return r}),s=Ve(e);return(o,r)=>(g(),T(i(Ds),z({"data-slot":"dialog-description"},i(s),{class:i(se)("text-muted-foreground text-sm",n.class)}),{default:E(()=>[P(o.$slots,"default")]),_:3},16,["class"]))}}),Un=O({__name:"DialogFooter",props:{class:{}},setup(t){const n=t;return(e,s)=>(g(),D("div",{"data-slot":"dialog-footer",class:I(i(se)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n.class))},[P(e.$slots,"default")],2))}}),Vn=O({__name:"DialogHeader",props:{class:{}},setup(t){const n=t;return(e,s)=>(g(),D("div",{"data-slot":"dialog-header",class:I(i(se)("flex flex-col gap-2 text-center sm:text-left",n.class))},[P(e.$slots,"default")],2))}}),Kn=O({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const n=t,e=A(()=>{const{class:o,...r}=n;return r}),s=Ve(e);return(o,r)=>(g(),T(i(Bs),z({"data-slot":"dialog-title"},i(s),{class:i(se)("text-lg leading-none font-semibold",n.class)}),{default:E(()=>[P(o.$slots,"default")]),_:3},16,["class"]))}}),Wn={class:"grid gap-6 py-4"},Hn={class:"grid gap-2"},Xn=["value"],Jn={key:0,class:"text-sm text-red-600"},Yn={class:"space-y-4 rounded-lg border border-gray-200 p-4"},Gn={class:"flex items-center justify-between"},Zn={class:"space-y-0.5"},Qn={class:"flex items-center justify-between"},eo={class:"space-y-0.5"},to=O({__name:"ChatSettingsModal",props:{open:{type:Boolean},chatSessionId:{},nativeLanguage:{},targetLanguage:{},proficiencyLevel:{},localizeCorrections:{type:Boolean,default:!0},localizeInsights:{type:Boolean,default:!0}},emits:["update:open","updated"],setup(t,{emit:n}){const e=t,s=n,o=_(e.nativeLanguage),r=_(e.targetLanguage),d=_(e.proficiencyLevel||"A1"),f=_(e.localizeCorrections),l=_(e.localizeInsights),m=_(!1),u=_({}),{languages:c}=zt();J(()=>e.open,k=>{k&&(o.value=e.nativeLanguage,r.value=e.targetLanguage,d.value=e.proficiencyLevel||"A1",f.value=e.localizeCorrections,l.value=e.localizeInsights,u.value={})});const y=[{value:"A1",label:"A1 - Beginner",description:"Can understand and use familiar everyday expressions"},{value:"A2",label:"A2 - Elementary",description:"Can communicate in simple routine tasks"},{value:"B1",label:"B1 - Intermediate",description:"Can deal with most situations while traveling"},{value:"B2",label:"B2 - Upper Intermediate",description:"Can interact with native speakers fluently"},{value:"C1",label:"C1 - Advanced",description:"Can use language flexibly and effectively"},{value:"C2",label:"C2 - Mastery",description:"Can understand virtually everything with ease"}],h=()=>{s("update:open",!1)},p=()=>{u.value={},m.value=!0,Dt.patch(route("language-chat.update-parameters",{chatSession:e.chatSessionId}),{native_language:o.value,target_language:r.value,proficiency_level:d.value,localize_corrections:f.value,localize_insights:l.value},{preserveScroll:!0,onSuccess:()=>{s("updated"),h()},onError:k=>{u.value=k},onFinish:()=>{m.value=!1}})};return(k,v)=>(g(),T(i(Nn),{open:t.open,"onUpdate:open":v[5]||(v[5]=S=>s("update:open",S))},{default:E(()=>[w(i(jn),{class:"sm:max-w-[500px]"},{default:E(()=>[w(i(Vn),null,{default:E(()=>[w(i(Kn),null,{default:E(()=>[...v[6]||(v[6]=[N("Chat Session Settings",-1)])]),_:1}),w(i(Rn),null,{default:E(()=>[...v[7]||(v[7]=[N(" Customize the language settings for this chat session. These settings only apply to this conversation. ",-1)])]),_:1})]),_:1}),a("div",Wn,[w(Pe,{id:"native-language",label:"Native Language",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=S=>o.value=S),options:i(c),"exclude-value":r.value,placeholder:"Select your native language",error:u.value.native_language},null,8,["modelValue","options","exclude-value","error"]),w(Pe,{id:"target-language",label:"Target Language",modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=S=>r.value=S),options:i(c),"exclude-value":o.value,placeholder:"Select language you're learning",error:u.value.target_language},null,8,["modelValue","options","exclude-value","error"]),a("div",Hn,[w(i(xe),{for:"proficiency-level"},{default:E(()=>[...v[8]||(v[8]=[N("Proficiency Level",-1)])]),_:1}),ce(a("select",{id:"proficiency-level","onUpdate:modelValue":v[2]||(v[2]=S=>d.value=S),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2"},[(g(),D(H,null,re(y,S=>a("option",{key:S.value,value:S.value},L(S.label)+" - "+L(S.description),9,Xn)),64))],512),[[Ct,d.value]]),u.value.proficiency_level?(g(),D("p",Jn,L(u.value.proficiency_level),1)):F("",!0)]),a("div",Yn,[v[13]||(v[13]=a("h4",{class:"text-sm font-medium"},"Localization Preferences",-1)),a("div",Gn,[a("div",Zn,[w(i(xe),{for:"localize-corrections",class:"font-normal"},{default:E(()=>[...v[9]||(v[9]=[N(" Localize Corrections ",-1)])]),_:1}),v[10]||(v[10]=a("p",{class:"text-xs text-gray-500"}," Receive error corrections in your native language ",-1))]),ce(a("input",{id:"localize-corrections",type:"checkbox","onUpdate:modelValue":v[3]||(v[3]=S=>f.value=S),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,512),[[Se,f.value]])]),a("div",Qn,[a("div",eo,[w(i(xe),{for:"localize-insights",class:"font-normal"},{default:E(()=>[...v[11]||(v[11]=[N(" Localize Insights ",-1)])]),_:1}),v[12]||(v[12]=a("p",{class:"text-xs text-gray-500"}," Receive learning insights in your native language ",-1))]),ce(a("input",{id:"localize-insights",type:"checkbox","onUpdate:modelValue":v[4]||(v[4]=S=>l.value=S),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,512),[[Se,l.value]])])])]),w(i(Un),null,{default:E(()=>[w(i(Oe),{variant:"outline",onClick:h,disabled:m.value},{default:E(()=>[...v[14]||(v[14]=[N(" Cancel ",-1)])]),_:1},8,["disabled"]),w(i(Oe),{onClick:p,disabled:m.value},{default:E(()=>[N(L(m.value?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}}),so={"data-test":"main-container",class:"flex h-dvh w-full overflow-hidden bg-gray-50"},ao={"data-test":"chat-area",class:"flex min-w-0 flex-1 flex-col"},no={key:0,class:"flex h-full items-center justify-center"},oo={class:"w-full max-w-2xl text-center px-2"},ro={class:"mb-6 text-sm text-gray-600 sm:mb-8 sm:text-base"},lo={class:"grid grid-cols-1 gap-3 sm:grid-cols-3 sm:gap-4"},io={class:"rounded-lg border border-gray-200 bg-white p-3 sm:p-4"},uo={class:"text-xs text-gray-600 text-center sm:text-sm"},co={key:1,class:"mx-auto max-w-3xl space-y-6"},Do=O({__name:"LanguageChat",props:{chatHistory:{},userSettings:{},isServiceAvailable:{type:Boolean}},setup(t){const n=t,e=_(n.chatHistory),s=_(e.value[0]?.id||null),o=_([]),r=_(""),d=_(!1),f=_(!n.isServiceAvailable),l=_(null),m=_(null),u=_(null),c=_(null),y=_(null),h=_(!0),p=_(!0),k=_(n.userSettings.native_language),v=_(n.userSettings.target_language),S=_(n.userSettings.proficiency_level),ae=_(n.userSettings.auto_update_proficiency),M=_(!1),b=_(!1);J(()=>n.userSettings.proficiency_level,$=>{S.value=$}),J(()=>n.userSettings.auto_update_proficiency,$=>{ae.value=$});const B=$=>$?(qe().props.languages||[]).find(U=>U.value===$)?.label||$:"",ve=A(()=>B(u.value)||k.value),et=A(()=>B(c.value)||v.value),tt=A(()=>{const $=y.value||S.value||"";return{A1:"Beginner",A2:"Elementary",B1:"Intermediate",B2:"Upper Intermediate",C1:"Advanced",C2:"Proficient"}[$]||$}),st=A(()=>{if(s.value){const $=e.value.find(C=>C.id===s.value);if($)return $.title}return"Language Chat"}),$e=A(()=>e.value.some($=>$.title==="New Conversation")),at=A(()=>d.value||f.value),le=async()=>{await Z(),l.value&&(l.value.scrollTop=l.value.scrollHeight)},me=async $=>{try{const x=await(await fetch(route("language-chat.messages",{chatSession:$}))).json();o.value=x.messages.map(U=>({...U,disableTypewriter:!0})),x.session&&(u.value=x.session.native_language,c.value=x.session.target_language,y.value=x.session.proficiency_level,h.value=x.session.localize_corrections??!0,p.value=x.session.localize_insights??!0),await le()}catch(C){console.error("Error loading messages:",C)}},nt=async $=>{try{const x=await(await fetch(route("language-chat.messages",{chatSession:$}))).json();return x.session&&(u.value=x.session.native_language,c.value=x.session.target_language,y.value=x.session.proficiency_level,h.value=x.session.localize_corrections??!0,p.value=x.session.localize_insights??!0),x.session?.proficiency_level}catch(C){return console.error("Error refreshing session data:",C),null}},ot=async($,C)=>{let x=0;const U=12,j=async()=>{x++;const ne=await nt($);ne&&ne!==C||x<U&&setTimeout(j,5e3)};setTimeout(j,5e3)},rt=async()=>{if(!r.value.trim())return;if(!s.value&&(await ye(),await new Promise(x=>setTimeout(x,100)),!s.value)){console.error("Failed to create chat session");return}const $=r.value,C={id:Date.now(),content:$,sender_type:"user",created_at:new Date().toISOString()};o.value.push(C),r.value="",d.value=!0,await le(),await Z(),m.value?.focus();try{const x=route("language-chat.message",{chatSession:s.value}),j=await(await fetch(x,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({message:$})})).json(),ne=o.value.findIndex(Y=>Y.id===C.id);ne!==-1&&(o.value[ne]={...j.user_message,sender_type:"user"}),j.correction_message&&(o.value.push({...j.correction_message,sender_type:"system",message_type:"correction"}),await le()),o.value.push({...j.ai_response,sender_type:"assistant"}),d.value=!1,await le();const he=e.value.findIndex(Y=>Y.id===s.value);if(he!==-1&&(e.value[he].last_message_at=new Date().toISOString(),j.new_title&&(e.value[he].title=j.new_title)),o.value.filter(Y=>Y.sender_type==="user").length%10===0&&ae.value&&s.value){const Y=y.value;ot(s.value,Y)}}catch(x){console.error("Error sending message:",x),d.value=!1}},ye=async()=>{const $=e.value.find(C=>C.title==="New Conversation");if($){ie($.id);return}if(!$e.value)try{const x=await(await fetch(route("language-chat.create"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({native_language:k.value,target_language:v.value,proficiency_level:S.value})})).json();e.value.unshift({id:x.id,title:"New Conversation",last_message_at:x.created_at,timestamp:x.created_at,isActive:!0,native_language:x.native_language,target_language:x.target_language}),ie(x.id)}catch(C){console.error("Error creating new chat:",C)}},ie=async $=>{s.value=$,await me($)},lt=async $=>{try{(await fetch(route("language-chat.destroy",{chatSession:$}),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).ok&&(e.value=e.value.filter(x=>x.id!==$),s.value===$&&(e.value.length>0?ie(e.value[0].id):(s.value=null,o.value=[])))}catch(C){console.error("Error deleting chat:",C)}},it=async($,C)=>{try{if((await fetch(route("language-chat.update-title",{chatSession:$}),{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({title:C})})).ok){const U=e.value.findIndex(j=>j.id===$);U!==-1&&(e.value[U].title=C)}}catch(x){console.error("Error updating chat title:",x)}},ut=()=>{M.value=!0},dt=()=>{b.value=!b.value},ct=()=>{b.value=!1},pt=async()=>{s.value&&await me(s.value)};return fe(()=>{s.value&&me(s.value)}),($,C)=>(g(),D(H,null,[w(i(Et),{title:st.value},null,8,["title"]),w($t,null,{default:E(()=>[a("div",so,[w(ua,{chats:e.value,"active-chat":s.value,"has-unused-new-chat":$e.value,"is-open":b.value,onNewChat:ye,onSelectChat:ie,onDeleteChat:lt,onUpdateTitle:it,onClose:ct},null,8,["chats","active-chat","has-unused-new-chat","is-open"]),a("div",ao,[w(Va,{"native-language":ve.value,"target-language":et.value,"proficiency-level":y.value||S.value,"proficiency-label":tt.value,"auto-update-proficiency":ae.value,onSettings:ut,onToggleSidebar:dt},null,8,["native-language","target-language","proficiency-level","proficiency-label","auto-update-proficiency"]),a("div",{ref_key:"chatContainer",ref:l,"data-test":"chat-container",class:"flex-1 overflow-y-auto px-4 py-4 sm:py-6"},[!s.value&&e.value.length===0?(g(),D("div",no,[a("div",oo,[C[7]||(C[7]=a("div",{class:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-blue-100 sm:mb-6 sm:h-20 sm:w-20"},[a("svg",{class:"h-8 w-8 text-blue-600 sm:h-10 sm:w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),C[8]||(C[8]=a("h2",{class:"mb-2 text-xl font-semibold text-gray-900 sm:text-2xl"},"Start Your Language Journey ",-1)),a("p",ro,"Practice "+L(v.value)+" with AI-powered conversations tailored to your level",1),a("button",{onClick:ye,class:"mb-4 inline-flex items-center gap-2 rounded-lg bg-blue-600 px-5 py-2.5 text-sm font-medium text-white transition-colors hover:bg-blue-700 sm:mb-6 sm:px-6 sm:py-3 sm:text-base"},[...C[2]||(C[2]=[a("svg",{class:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),N(" Start New Conversation ",-1)])]),a("div",lo,[a("div",io,[C[3]||(C[3]=a("div",{class:"mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-green-100 mx-auto sm:h-10 sm:w-10"},[a("svg",{class:"h-4 w-4 text-green-600 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),C[4]||(C[4]=a("h3",{class:"mb-1 text-sm font-medium text-gray-900 text-center sm:text-base"},"Adaptive Learning",-1)),a("p",uo,"AI adjusts to your "+L(S.value)+" level",1)]),C[5]||(C[5]=a("div",{class:"rounded-lg border border-gray-200 bg-white p-3 sm:p-4"},[a("div",{class:"mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-purple-100 mx-auto sm:h-10 sm:w-10"},[a("svg",{class:"h-4 w-4 text-purple-600 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})])]),a("h3",{class:"mb-1 text-sm font-medium text-gray-900 text-center sm:text-base"},"Natural Conversation"),a("p",{class:"text-xs text-gray-600 text-center sm:text-sm"},"Practice real-world dialogue ")],-1)),C[6]||(C[6]=a("div",{class:"rounded-lg border border-gray-200 bg-white p-3 sm:p-4"},[a("div",{class:"mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-orange-100 mx-auto sm:h-10 sm:w-10"},[a("svg",{class:"h-4 w-4 text-orange-600 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),a("h3",{class:"mb-1 text-sm font-medium text-gray-900 text-center sm:text-base"},"Instant Feedback"),a("p",{class:"text-xs text-gray-600 text-center sm:text-sm"},"Get corrections and suggestions")],-1))])])])):(g(),D("div",co,[(g(!0),D(H,null,re(o.value,x=>(g(),D(H,{key:x.id},[x.message_type==="correction"&&x.correction_data?(g(),T(bn,{key:0,content:x.content,"correction-data":x.correction_data,timestamp:new Date(x.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},null,8,["content","correction-data","timestamp"])):x.sender_type!=="system"?(g(),T(en,{key:1,content:x.content,translation:x.translation,role:x.sender_type,timestamp:new Date(x.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"is-analyzing":x.isAnalyzing,"disable-typewriter":x.disableTypewriter},null,8,["content","translation","role","timestamp","is-analyzing","disable-typewriter"])):F("",!0)],64))),128)),d.value?(g(),T(Bn,{key:0})):F("",!0)]))],512),w(zn,{"is-service-down":f.value},null,8,["is-service-down"]),w(Tn,{modelValue:r.value,"onUpdate:modelValue":C[0]||(C[0]=x=>r.value=x),disabled:at.value,onSend:rt,ref_key:"chatInputRef",ref:m},null,8,["modelValue","disabled"])])]),s.value?(g(),T(to,{key:0,open:M.value,"onUpdate:open":C[1]||(C[1]=x=>M.value=x),"chat-session-id":s.value,"native-language":u.value||k.value,"target-language":c.value||v.value,"proficiency-level":y.value||S.value,"localize-corrections":h.value,"localize-insights":p.value,onUpdated:pt},null,8,["open","chat-session-id","native-language","target-language","proficiency-level","localize-corrections","localize-insights"])):F("",!0)]),_:1})],64))}});export{Do as default};
