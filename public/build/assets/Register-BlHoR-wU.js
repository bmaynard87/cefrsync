import{d as E,S,k as A,u as P,C as b,c as $,a as t,b as e,h as R,w as l,i as c,j as g,e as n,o as u,g as i,t as f,f as G,l as I,F as N,R as U}from"./app-Cw0b_xqt.js";import{G as q,_ as h}from"./GoogleSignInButton-BdwOGaC9.js";import{_,a as y}from"./index-BS1gsnhY.js";import{_ as B,a as F}from"./LoadingButton.vue_vue_type_script_setup_true_lang-COr4aCEe.js";import{_ as p}from"./FormField.vue_vue_type_script_setup_true_lang-C5y1Wooy.js";import{_ as T}from"./PasswordStrengthIndicator.vue_vue_type_script_setup_true_lang-tOE8mhYh.js";import{u as H}from"./useRecaptcha-N_L4l72x.js";import"./utils-CDN07tui.js";import"./useForwardExpose-D7qJyn18.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DxpHpDuD.js";import"./Spinner.vue_vue_type_script_setup_true_lang-D8PolyJC.js";import"./Label.vue_vue_type_script_setup_true_lang-Cww-1DxD.js";const j={class:"mb-6"},D={class:"relative my-6"},J={class:"absolute inset-0 flex items-center"},K={class:"grid grid-cols-2 gap-4"},L={class:"space-y-2"},M={class:"text-center text-sm text-gray-600"},ne=E({__name:"Register",setup(O){const v=S(),w=A(()=>v.props.flash?.error),r=P({first_name:"",last_name:"",email:"",password:"",password_confirmation:"",recaptcha_token:""}),{executeRecaptcha:x}=H(),d=b(null),m=b(null),V=async()=>{m.value=null;try{console.log("Attempting reCAPTCHA execution..."),console.log("Site key available:",!!v.props.recaptcha?.siteKey);const a=await x("register");console.log("reCAPTCHA token received:",a?"yes":"no"),r.recaptcha_token=a,r.post(route("register"),{onFinish:()=>r.reset("password","password_confirmation"),onError:()=>{m.value="Registration failed. Please try again."}})}catch(a){console.error("reCAPTCHA error details:",a),console.error("Error type:",typeof a),console.error("Error message:",a instanceof Error?a.message:String(a)),m.value="Unable to verify reCAPTCHA. Please refresh the page and try again."}},C=a=>{d.value=null,U.post(route("auth.google.callback"),{credential:a.credential},{onError:o=>{d.value=o.credential||"Authentication failed. Please try again."}})},k=a=>{console.error("Google Sign-In error:",a),d.value="Google Sign-In failed. Please try again."};return(a,o)=>(u(),$(N,null,[t(e(R),{title:"Register"}),t(F,{title:"Create your account",subtitle:"Start your language learning journey today"},{default:l(()=>[w.value?(u(),c(e(_),{key:0,class:"mb-6 border-red-200 bg-red-50"},{default:l(()=>[t(e(y),{class:"text-sm text-red-800"},{default:l(()=>[i(f(w.value),1)]),_:1})]),_:1})):g("",!0),m.value?(u(),c(e(_),{key:1,class:"mb-6 border-red-200 bg-red-50"},{default:l(()=>[t(e(y),{class:"text-sm text-red-800"},{default:l(()=>[i(f(m.value),1)]),_:1})]),_:1})):g("",!0),d.value?(u(),c(e(_),{key:2,class:"mb-6 border-red-200 bg-red-50"},{default:l(()=>[t(e(y),{class:"text-sm text-red-800"},{default:l(()=>[i(f(d.value),1)]),_:1})]),_:1})):g("",!0),n("div",j,[a.$page.props.auth?.googleClientId?(u(),c(q,{key:0,"client-id":a.$page.props.auth.googleClientId,onSignin:C,onError:k},null,8,["client-id"])):g("",!0)]),n("div",D,[n("div",J,[t(e(h))]),o[5]||(o[5]=n("div",{class:"relative flex justify-center text-sm"},[n("span",{class:"bg-white px-2 text-gray-500"},"OR")],-1))]),n("form",{onSubmit:G(V,["prevent"]),class:"space-y-5"},[n("div",K,[t(p,{id:"first_name",label:"First Name",modelValue:e(r).first_name,"onUpdate:modelValue":o[0]||(o[0]=s=>e(r).first_name=s),error:e(r).errors.first_name,placeholder:"John",required:"",autofocus:"",autocomplete:"given-name"},null,8,["modelValue","error"]),t(p,{id:"last_name",label:"Last Name",modelValue:e(r).last_name,"onUpdate:modelValue":o[1]||(o[1]=s=>e(r).last_name=s),error:e(r).errors.last_name,placeholder:"Doe",required:"",autocomplete:"family-name"},null,8,["modelValue","error"])]),t(p,{id:"email",label:"Email",type:"email",modelValue:e(r).email,"onUpdate:modelValue":o[2]||(o[2]=s=>e(r).email=s),error:e(r).errors.email,placeholder:"you@example.com",required:"",autocomplete:"username"},null,8,["modelValue","error"]),n("div",L,[t(p,{id:"password",label:"Password",type:"password",modelValue:e(r).password,"onUpdate:modelValue":o[3]||(o[3]=s=>e(r).password=s),error:e(r).errors.password,placeholder:"••••••••",required:"",autocomplete:"new-password"},null,8,["modelValue","error"]),t(T,{password:e(r).password},null,8,["password"])]),t(p,{id:"password_confirmation",label:"Confirm Password",type:"password",modelValue:e(r).password_confirmation,"onUpdate:modelValue":o[4]||(o[4]=s=>e(r).password_confirmation=s),error:e(r).errors.password_confirmation,placeholder:"••••••••",required:"",autocomplete:"new-password"},null,8,["modelValue","error"]),t(B,{loading:e(r).processing,"loading-text":"Creating account..."},{default:l(()=>[...o[6]||(o[6]=[i(" Create account ",-1)])]),_:1},8,["loading"])],32),t(e(h),{class:"my-6"}),n("p",M,[o[8]||(o[8]=i(" Already have an account? ",-1)),t(e(I),{href:a.route("login"),class:"font-medium text-gray-900 hover:text-gray-700 hover:underline"},{default:l(()=>[...o[7]||(o[7]=[i(" Sign in ",-1)])]),_:1},8,["href"])])]),_:1})],64))}});export{ne as default};
