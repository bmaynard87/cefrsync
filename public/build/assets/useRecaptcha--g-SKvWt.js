import{C as s,S as p,N as d}from"./app-DFAIjR6O.js";function h(){const r=s(!1),i=s(!1),c=s(null),o=p().props.recaptcha?.siteKey,u=()=>new Promise((a,t)=>{if(window.grecaptcha){r.value=!0,a();return}const n=document.querySelector('script[src*="google.com/recaptcha"]');if(n){n.addEventListener("load",()=>{r.value=!0,a()});return}const e=document.createElement("script");e.src=`https://www.google.com/recaptcha/api.js?render=${o}`,e.async=!0,e.defer=!0,e.onload=()=>{r.value=!0,a()},e.onerror=()=>{c.value="Failed to load reCAPTCHA",t(new Error("Failed to load reCAPTCHA script"))},document.head.appendChild(e)}),l=async(a="submit")=>{if(!o)return console.log("reCAPTCHA site key not configured - skipping verification"),"";try{return i.value=!0,c.value=null,r.value||await u(),await new Promise((t,n)=>{window.grecaptcha.ready(async()=>{try{const e=await window.grecaptcha.execute(o,{action:a});t(e)}catch(e){n(e)}})})}catch(t){throw c.value=t instanceof Error?t.message:"reCAPTCHA execution failed",t}finally{i.value=!1}};return d(()=>{o&&u().catch(console.error)}),{isLoaded:r,isExecuting:i,error:c,executeRecaptcha:l}}export{h as u};
